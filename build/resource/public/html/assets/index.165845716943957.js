var Le=Object.defineProperty;var Ae=Object.getOwnPropertySymbols;var Fe=Object.prototype.hasOwnProperty,Ie=Object.prototype.propertyIsEnumerable;var je=(xt,$,f)=>$ in xt?Le(xt,$,{enumerable:!0,configurable:!0,writable:!0,value:f}):xt[$]=f,ke=(xt,$)=>{for(var f in $||($={}))Fe.call($,f)&&je(xt,f,$[f]);if(Ae)for(var f of Ae($))Ie.call($,f)&&je(xt,f,$[f]);return xt};import{j as Re,a as ve,aw as Te,$ as Ne,x as Be,d as Ge,D as He,ac as Ue,l as Jt,S as Ye,m as Nt,V as qt,O as Xe,F as be,a3 as ye,J as _e,n as me,_ as ne,k as Qt,U as Pe,I as Oe,Z as Ve}from"./vue.1658457169439.js";import{j as kt,_ as We,a as ze,u as qe,M as $e,E as ae,L as Ke}from"./index.1658457169439.js";import{S as Ze}from"./sortable.esm.1658457169439.js";import Je from"./index.165845716943958.js";import Qe from"./help.1658457169439.js";import tn from"./index.165845716943959.js";import en from"./index.165845716943960.js";import"./line.1658457169439.js";import"./node.1658457169439.js";import"./echarts.1658457169439.js";var Ee={};(function(xt){(function(){typeof Math.sgn=="undefined"&&(Math.sgn=function(c){return c==0?0:c>0?1:-1});var $={subtract:function(c,_){return{x:c.x-_.x,y:c.y-_.y}},dotProduct:function(c,_){return c.x*_.x+c.y*_.y},square:function(c){return Math.sqrt(c.x*c.x+c.y*c.y)},scale:function(c,_){return{x:c.x*_,y:c.y*_}}},f=64,V=Math.pow(2,-f-1),nt=function(c,_){for(var R=[],U=Q(c,_),Y=_.length-1,n=2*Y-1,a=u(U,n,R,0),t=$.subtract(c,_[0]),v=$.square(t),m=0,I=0;I<a;I++){t=$.subtract(c,b(_,Y,R[I],null,null));var F=$.square(t);F<v&&(v=F,m=R[I])}return t=$.subtract(c,_[Y]),F=$.square(t),F<v&&(v=F,m=1),{location:m,distance:v}},K=function(c,_){var R=nt(c,_);return{point:b(_,_.length-1,R.location,null,null),location:R.location}},Q=function(c,_){for(var R=_.length-1,U=2*R-1,Y=[],n=[],a=[],t=[],v=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],m=0;m<=R;m++)Y[m]=$.subtract(_[m],c);for(var m=0;m<=R-1;m++)n[m]=$.subtract(_[m+1],_[m]),n[m]=$.scale(n[m],3);for(var I=0;I<=R-1;I++)for(var F=0;F<=R;F++)a[I]||(a[I]=[]),a[I][F]=$.dotProduct(n[I],Y[F]);for(m=0;m<=U;m++)t[m]||(t[m]=[]),t[m].y=0,t[m].x=parseFloat(m)/U;for(var X=R,N=R-1,W=0;W<=X+N;W++){var ot=Math.max(0,W-N),st=Math.min(W,X);for(m=ot;m<=st;m++){var it=W-m;t[m+it].y+=a[it][m]*v[it][m]}}return t},u=function(c,_,R,U){var Y=[],n=[],a,t,v=[],m=[];switch(M(c,_)){case 0:return 0;case 1:{if(U>=f)return R[0]=(c[0].x+c[_].x)/2,1;if(s(c,_))return R[0]=i(c,_),1;break}}b(c,_,.5,Y,n),a=u(Y,_,v,U+1),t=u(n,_,m,U+1);for(var I=0;I<a;I++)R[I]=v[I];for(var I=0;I<t;I++)R[I+a]=m[I];return a+t},M=function(c,_){var R=0,U,Y;U=Y=Math.sgn(c[0].y);for(var n=1;n<=_;n++)U=Math.sgn(c[n].y),U!=Y&&R++,Y=U;return R},s=function(c,_){var R,U,Y,n,a,t,v,m,I,F,X,N,W,ot,st,it;t=c[0].y-c[_].y,v=c[_].x-c[0].x,m=c[0].x*c[_].y-c[_].x*c[0].y;var rt,pt;rt=pt=0;for(var dt=1;dt<_;dt++){var lt=t*c[dt].x+v*c[dt].y+m;lt>rt?rt=lt:lt<pt&&(pt=lt)}return X=0,N=1,W=0,ot=t,st=v,it=m-rt,I=X*st-ot*N,F=1/I,U=(N*it-st*W)*F,ot=t,st=v,it=m-pt,I=X*st-ot*N,F=1/I,Y=(N*it-st*W)*F,n=Math.min(U,Y),a=Math.max(U,Y),R=a-n,R<V?1:0},i=function(c,_){var R=1,U=0,Y=c[_].x-c[0].x,n=c[_].y-c[0].y,a=c[0].x-0,t=c[0].y-0,v=Y*U-n*R,m=1/v,I=(Y*t-n*a)*m;return 0+R*I},b=function(c,_,R,U,Y){for(var n=[[]],a=0;a<=_;a++)n[0][a]=c[a];for(var t=1;t<=_;t++)for(var a=0;a<=_-t;a++)n[t]||(n[t]=[]),n[t][a]||(n[t][a]={}),n[t][a].x=(1-R)*n[t-1][a].x+R*n[t-1][a+1].x,n[t][a].y=(1-R)*n[t-1][a].y+R*n[t-1][a+1].y;if(U!=null)for(a=0;a<=_;a++)U[a]=n[a][0];if(Y!=null)for(a=0;a<=_;a++)Y[a]=n[_-a][a];return n[_][0]},D={},T=function(c){var _=D[c];if(!_){_=[];var R=function(){return function(F){return Math.pow(F,c)}},U=function(){return function(F){return Math.pow(1-F,c)}},Y=function(F){return function(X){return F}},n=function(){return function(F){return F}},a=function(){return function(F){return 1-F}},t=function(F){return function(X){for(var N=1,W=0;W<F.length;W++)N=N*F[W](X);return N}};_.push(new R);for(var v=1;v<c;v++){for(var m=[new Y(c)],I=0;I<c-v;I++)m.push(new n);for(var I=0;I<v;I++)m.push(new a);_.push(new t(m))}_.push(new U),D[c]=_}return _},E=function(c,_){for(var R=T(c.length-1),U=0,Y=0,n=0;n<c.length;n++)U=U+c[n].x*R[n](_),Y=Y+c[n].y*R[n](_);return{x:U,y:Y}},p=function(c,_){return Math.sqrt(Math.pow(c.x-_.x,2)+Math.pow(c.y-_.y,2))},e=function(c){return c[0].x===c[1].x&&c[0].y===c[1].y},O=function(c,_,R){if(e(c))return{point:c[0],location:_};for(var U=E(c,_),Y=0,n=_,a=R>0?1:-1,t=null;Y<Math.abs(R);)n+=.005*a,t=E(c,n),Y+=p(t,U),U=t;return{point:t,location:n}},L=function(c){var _=new Date().getTime();if(e(c))return 0;for(var R=E(c,0),U=0,Y=0,n=1,a=null;Y<1;)Y+=.005*n,a=E(c,Y),U+=p(a,R),R=a;return console.log("length",new Date().getTime()-_),U},G=function(c,_,R){return O(c,_,R).point},B=function(c,_,R){return O(c,_,R).location},S=function(c,_){var R=E(c,_),U=E(c.slice(0,c.length-1),_),Y=U.y-R.y,n=U.x-R.x;return Y===0?1/0:Math.atan(Y/n)},A=function(c,_,R){var U=O(c,_,R);return U.location>1&&(U.location=1),U.location<0&&(U.location=0),S(c,U.location)},o=function(c,_,R,U){U=U==null?0:U;var Y=O(c,_,U),n=S(c,Y.location),a=Math.atan(-1/n),t=R/2*Math.sin(a),v=R/2*Math.cos(a);return[{x:Y.point.x+v,y:Y.point.y+t},{x:Y.point.x-v,y:Y.point.y-t}]},d=function(c,_,R,U,Y){var n=U-_,a=c-R,t=c*(_-U)+_*(R-c),v=h(Y),m=[n*v[0][0]+a*v[1][0],n*v[0][1]+a*v[1][1],n*v[0][2]+a*v[1][2],n*v[0][3]+a*v[1][3]+t],I=g.apply(null,m),F=[];if(I!=null)for(var X=0;X<3;X++){var N=I[X],W=Math.pow(N,2),ot=Math.pow(N,3),st=[v[0][0]*ot+v[0][1]*W+v[0][2]*N+v[0][3],v[1][0]*ot+v[1][1]*W+v[1][2]*N+v[1][3]],it;R-c!==0?it=(st[0]-c)/(R-c):it=(st[1]-_)/(U-_),N>=0&&N<=1&&it>=0&&it<=1&&F.push(st)}return F},l=function(c,_,R,U,Y){var n=[];return n.push.apply(n,d(c,_,c+R,_,Y)),n.push.apply(n,d(c+R,_,c+R,_+U,Y)),n.push.apply(n,d(c+R,_+U,c,_+U,Y)),n.push.apply(n,d(c,_+U,c,_,Y)),n},C=function(c,_){var R=[];return R.push.apply(R,d(c.x,c.y,c.x+c.w,c.y,_)),R.push.apply(R,d(c.x+c.w,c.y,c.x+c.w,c.y+c.h,_)),R.push.apply(R,d(c.x+c.w,c.y+c.h,c.x,c.y+c.h,_)),R.push.apply(R,d(c.x,c.y+c.h,c.x,c.y,_)),R};function w(c,_){return[-c[0][_]+3*c[1][_]+-3*c[2][_]+c[3][_],3*c[0][_]-6*c[1][_]+3*c[2][_],-3*c[0][_]+3*c[1][_],c[0][_]]}function h(c){return[w(c,"x"),w(c,"y")]}function j(c){return c<0?-1:c>0?1:0}function g(c,_,R,U){var Y=_/c,n=R/c,a=U/c,t=(3*n-Math.pow(Y,2))/9,v=(9*Y*n-27*a-2*Math.pow(Y,3))/54,m=Math.pow(t,3)+Math.pow(v,2),I,F,X=[];if(m>=0)I=j(v+Math.sqrt(m))*Math.pow(Math.abs(v+Math.sqrt(m)),1/3),F=j(v-Math.sqrt(m))*Math.pow(Math.abs(v-Math.sqrt(m)),1/3),X[0]=-Y/3+(I+F),X[1]=-Y/3-(I+F)/2,X[2]=-Y/3-(I+F)/2,Math.abs(Math.sqrt(3)*(I-F)/2)!==0&&(X[1]=-1,X[2]=-1);else{var N=Math.acos(v/Math.sqrt(-Math.pow(t,3)));X[0]=2*Math.sqrt(-t)*Math.cos(N/3)-Y/3,X[1]=2*Math.sqrt(-t)*Math.cos((N+2*Math.PI)/3)-Y/3,X[2]=2*Math.sqrt(-t)*Math.cos((N+4*Math.PI)/3)-Y/3}for(var W=0;W<3;W++)(X[W]<0||X[W]>1)&&(X[W]=-1);return X}var P=this.jsBezier={distanceFromCurve:nt,gradientAtPoint:S,gradientAtPointAlongCurveFrom:A,nearestPointOnCurve:K,pointOnCurve:E,pointAlongCurveFrom:G,perpendicularToCurveAt:o,locationAlongCurveFrom:B,getLength:L,lineIntersection:d,boxIntersection:l,boundingBoxIntersection:C,version:"0.9.0"};xt.jsBezier=P}).call(typeof window!="undefined"?window:kt),function(){var $=this,f=$.Biltong={version:"0.4.0"};xt.Biltong=f;var V=function(s){return Object.prototype.toString.call(s)==="[object Array]"},nt=function(s,i,b){return s=V(s)?s:[s.x,s.y],i=V(i)?i:[i.x,i.y],b(s,i)},K=f.gradient=function(s,i){return nt(s,i,function(b,D){return D[0]==b[0]?D[1]>b[1]?1/0:-1/0:D[1]==b[1]?D[0]>b[0]?0:-0:(D[1]-b[1])/(D[0]-b[0])})};f.normal=function(s,i){return-1/K(s,i)},f.lineLength=function(s,i){return nt(s,i,function(b,D){return Math.sqrt(Math.pow(D[1]-b[1],2)+Math.pow(D[0]-b[0],2))})};var Q=f.quadrant=function(s,i){return nt(s,i,function(b,D){return D[0]>b[0]||D[0]==b[0]?D[1]>b[1]?2:1:D[1]>b[1]?3:4})};f.theta=function(s,i){return nt(s,i,function(b,D){var T=K(b,D),E=Math.atan(T),p=Q(b,D);return(p==4||p==3)&&(E+=Math.PI),E<0&&(E+=2*Math.PI),E})},f.intersects=function(s,i){var b=s.x,D=s.x+s.w,T=s.y,E=s.y+s.h,p=i.x,e=i.x+i.w,O=i.y,L=i.y+i.h;return b<=p&&p<=D&&T<=O&&O<=E||b<=e&&e<=D&&T<=O&&O<=E||b<=p&&p<=D&&T<=L&&L<=E||b<=e&&p<=D&&T<=L&&L<=E||p<=b&&b<=e&&O<=T&&T<=L||p<=D&&D<=e&&O<=T&&T<=L||p<=b&&b<=e&&O<=E&&E<=L||p<=D&&b<=e&&O<=E&&E<=L},f.encloses=function(s,i,b){var D=s.x,T=s.x+s.w,E=s.y,p=s.y+s.h,e=i.x,O=i.x+i.w,L=i.y,G=i.y+i.h,B=function(S,A,o,d){return b?S<=A&&o>=d:S<A&&o>d};return B(D,e,T,O)&&B(E,L,p,G)};var u=[null,[1,-1],[1,1],[-1,1],[-1,-1]],M=[null,[-1,-1],[-1,1],[1,1],[1,-1]];f.pointOnLine=function(s,i,b){var D=K(s,i),T=Q(s,i),E=b>0?u[T]:M[T],p=Math.atan(D),e=Math.abs(b*Math.sin(p))*E[1],O=Math.abs(b*Math.cos(p))*E[0];return{x:s.x+O,y:s.y+e}},f.perpendicularLineTo=function(s,i,b){var D=K(s,i),T=Math.atan(-1/D),E=b/2*Math.sin(T),p=b/2*Math.cos(T);return[{x:i.x+p,y:i.y+E},{x:i.x-p,y:i.y-E}]}}.call(typeof window!="undefined"?window:kt),function(){function $(n,a,t,v,m,I,F,X){return new Touch({target:a,identifier:Y(),pageX:t,pageY:v,screenX:m,screenY:I,clientX:F||m,clientY:X||I})}function f(){var n=[];return Array.prototype.push.apply(n,arguments),n.item=function(a){return this[a]},n}function V(n,a,t,v,m,I,F,X){return f($.apply(null,arguments))}var nt=this,K=function(n,a,t){t=t||n.parentNode;for(var v=t.querySelectorAll(a),m=0;m<v.length;m++)if(v[m]===n)return!0;return!1},Q=function(n){return typeof n=="string"||n.constructor===String?document.getElementById(n):n},u=function(n){return n.srcElement||n.target},M=function(n,a,t,v){if(v){if(typeof n.path!="undefined"&&n.path.indexOf)return{path:n.path,end:n.path.indexOf(t)};var m={path:[],end:-1},I=function(F){m.path.push(F),F===t?m.end=m.path.length-1:F.parentNode!=null&&I(F.parentNode)};return I(a),m}else return{path:[a],end:1}},s=function(n,a){for(var t=0,v=n.length;t<v&&n[t]!=a;t++);t<n.length&&n.splice(t,1)},i=1,b=function(n,a,t){var v=i++;return n.__ta=n.__ta||{},n.__ta[a]=n.__ta[a]||{},n.__ta[a][v]=t,t.__tauid=v,v},D=function(n,a,t){if(n.__ta&&n.__ta[a]&&delete n.__ta[a][t.__tauid],t.__taExtra){for(var v=0;v<t.__taExtra.length;v++)R(n,t.__taExtra[v][0],t.__taExtra[v][1]);t.__taExtra.length=0}t.__taUnstore&&t.__taUnstore()},T=function(n,a,t,v){if(n==null)return t;var m=n.split(","),I=function(F){I.__tauid=t.__tauid;var X=u(F),N=X,W=M(F,X,a,n!=null);if(W.end!=-1)for(var ot=0;ot<W.end;ot++){N=W.path[ot];for(var st=0;st<m.length;st++)K(N,m[st],a)&&t.apply(N,arguments)}};return E(t,v,I),I},E=function(n,a,t){n.__taExtra=n.__taExtra||[],n.__taExtra.push([a,t])},p=function(n,a,t,v){if(S&&o[a]){var m=T(v,n,t,o[a]);_(n,o[a],m,t)}a==="focus"&&n.getAttribute("tabindex")==null&&n.setAttribute("tabindex","1"),_(n,a,T(v,n,t,a),t)},e=function(n,a,t,v){if(n.__taSmartClicks==null){var m=function(X){n.__tad=w(X)},I=function(X){n.__tau=w(X)},F=function(X){if(n.__tad&&n.__tau&&n.__tad[0]===n.__tau[0]&&n.__tad[1]===n.__tau[1])for(var N=0;N<n.__taSmartClicks.length;N++)n.__taSmartClicks[N].apply(u(X),[X])};p(n,"mousedown",m,v),p(n,"mouseup",I,v),p(n,"click",F,v),n.__taSmartClicks=[]}n.__taSmartClicks.push(t),t.__taUnstore=function(){s(n.__taSmartClicks,t)}},O={tap:{touches:1,taps:1},dbltap:{touches:1,taps:2},contextmenu:{touches:2,taps:1}},L=function(n,a){return function(t,v,m,I){if(v=="contextmenu"&&A)p(t,v,m,I);else{if(t.__taTapHandler==null){var F=t.__taTapHandler={tap:[],dbltap:[],contextmenu:[],down:!1,taps:0,downSelectors:[]},X=function(st){for(var it=u(st),rt=M(st,it,t,I!=null),pt=!1,dt=0;dt<rt.end;dt++){if(pt)return;it=rt.path[dt];for(var lt=0;lt<F.downSelectors.length;lt++)if(F.downSelectors[lt]==null||K(it,F.downSelectors[lt],t)){F.down=!0,setTimeout(W,n),setTimeout(ot,a),pt=!0;break}}},N=function(st){if(F.down){var it=u(st),rt,pt;F.taps++;var dt=c(st);for(var lt in O)if(O.hasOwnProperty(lt)){var bt=O[lt];if(bt.touches===dt&&(bt.taps===1||bt.taps===F.taps))for(var gt=0;gt<F[lt].length;gt++){pt=M(st,it,t,F[lt][gt][1]!=null);for(var Z=0;Z<pt.end;Z++)if(rt=pt.path[Z],F[lt][gt][1]==null||K(rt,F[lt][gt][1],t)){F[lt][gt][0].apply(rt,[st]);break}}}}},W=function(){F.down=!1},ot=function(){F.taps=0};p(t,"mousedown",X),p(t,"mouseup",N)}t.__taTapHandler.downSelectors.push(I),t.__taTapHandler[v].push([m,I]),m.__taUnstore=function(){s(t.__taTapHandler[v],m)}}}},G=function(n,a,t,v){for(var m in t.__tamee[n])t.__tamee[n].hasOwnProperty(m)&&t.__tamee[n][m].apply(v,[a])},B=function(){var n=[];return function(a,t,v,m){if(!a.__tamee){a.__tamee={over:!1,mouseenter:[],mouseexit:[]};var I=function(X){var N=u(X);(m==null&&N==a&&!a.__tamee.over||K(N,m,a)&&(N.__tamee==null||!N.__tamee.over))&&(G("mouseenter",X,a,N),N.__tamee=N.__tamee||{},N.__tamee.over=!0,n.push(N))},F=function(X){for(var N=u(X),W=0;W<n.length;W++)N==n[W]&&!K(X.relatedTarget||X.toElement,"*",N)&&(N.__tamee.over=!1,n.splice(W,1),G("mouseexit",X,a,N))};_(a,"mouseover",T(m,a,I,"mouseover"),I),_(a,"mouseout",T(m,a,F,"mouseout"),F)}v.__taUnstore=function(){delete a.__tamee[t][v.__tauid]},b(a,t,v),a.__tamee[t][v.__tauid]=v}},S="ontouchstart"in document.documentElement||navigator.maxTouchPoints,A="onmousedown"in document.documentElement,o={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},d=function(){var n=-1;if(navigator.appName=="Microsoft Internet Explorer"){var a=navigator.userAgent,t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");t.exec(a)!=null&&(n=parseFloat(RegExp.$1))}return n}(),l=d>-1&&d<9,C=function(n,a){if(n==null)return[0,0];var t=P(n),v=g(t,0);return[v[a+"X"],v[a+"Y"]]},w=function(n){return n==null?[0,0]:l?[n.clientX+document.documentElement.scrollLeft,n.clientY+document.documentElement.scrollTop]:C(n,"page")},h=function(n){return C(n,"screen")},j=function(n){return C(n,"client")},g=function(n,a){return n.item?n.item(a):n[a]},P=function(n){return n.touches&&n.touches.length>0?n.touches:n.changedTouches&&n.changedTouches.length>0?n.changedTouches:n.targetTouches&&n.targetTouches.length>0?n.targetTouches:[n]},c=function(n){return P(n).length},_=function(n,a,t,v){if(b(n,a,t),v.__tauid=t.__tauid,n.addEventListener)n.addEventListener(a,t,!1);else if(n.attachEvent){var m=a+t.__tauid;n["e"+m]=t,n[m]=function(){n["e"+m]&&n["e"+m](window.event)},n.attachEvent("on"+a,n[m])}},R=function(n,a,t){t!=null&&U(n,function(){var v=Q(this);if(D(v,a,t),t.__tauid!=null){if(v.removeEventListener)v.removeEventListener(a,t,!1),S&&o[a]&&v.removeEventListener(o[a],t,!1);else if(this.detachEvent){var m=a+t.__tauid;v[m]&&v.detachEvent("on"+a,v[m]),v[m]=null,v["e"+m]=null}}t.__taTouchProxy&&R(n,t.__taTouchProxy[1],t.__taTouchProxy[0])})},U=function(n,a){if(n!=null){n=typeof Window!="undefined"&&typeof n.top!="unknown"&&n==n.top?[n]:typeof n!="string"&&n.tagName==null&&n.length!=null?n:typeof n=="string"?document.querySelectorAll(n):[n];for(var t=0;t<n.length;t++)a.apply(n[t])}},Y=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var a=Math.random()*16|0,t=n=="x"?a:a&3|8;return t.toString(16)})};nt.Mottle=function(n){n=n||{};var a=n.clickThreshold||250,t=n.dblClickThreshold||450,v=new B,m=new L(a,t),I=n.smartClicks,F=function(X,N,W,ot){W!=null&&U(X,function(){var st=Q(this);I&&N==="click"?e(st,N,W,ot):N==="tap"||N==="dbltap"||N==="contextmenu"?m(st,N,W,ot):N==="mouseenter"||N=="mouseexit"?v(st,N,W,ot):p(st,N,W,ot)})};this.remove=function(X){return U(X,function(){var N=Q(this);if(N.__ta){for(var W in N.__ta)if(N.__ta.hasOwnProperty(W))for(var ot in N.__ta[W])N.__ta[W].hasOwnProperty(ot)&&R(N,W,N.__ta[W][ot])}N.parentNode&&N.parentNode.removeChild(N)}),this},this.on=function(X,N,W,ot){var st=arguments[0],it=arguments.length==4?arguments[2]:null,rt=arguments[1],pt=arguments[arguments.length-1];return F(st,rt,pt,it),this},this.off=function(X,N,W){return R(X,N,W),this},this.trigger=function(X,N,W,ot){var st=A&&(typeof MouseEvent=="undefined"||W==null||W.constructor===MouseEvent),it=S&&!A&&o[N]?o[N]:N,rt=!(S&&!A&&o[N]),pt=w(W),dt=h(W),lt=j(W);return U(X,function(){var bt=Q(this),gt;W=W||{screenX:dt[0],screenY:dt[1],clientX:lt[0],clientY:lt[1]};var Z=function(vt){ot&&(vt.payload=ot)},q={TouchEvent:function(vt){var St=V(window,bt,0,pt[0],pt[1],dt[0],dt[1],lt[0],lt[1]),Tt=vt.initTouchEvent||vt.initEvent;Tt(it,!0,!0,window,null,dt[0],dt[1],lt[0],lt[1],!1,!1,!1,!1,St,St,St,1,0)},MouseEvents:function(vt){vt.initMouseEvent(it,!0,!0,window,0,dt[0],dt[1],lt[0],lt[1],!1,!1,!1,!1,1,bt)}};if(document.createEvent){var J=!rt&&!st&&S&&o[N],ut=J?"TouchEvent":"MouseEvents";gt=document.createEvent(ut),q[ut](gt),Z(gt),bt.dispatchEvent(gt)}else document.createEventObject&&(gt=document.createEventObject(),gt.eventType=gt.eventName=it,gt.screenX=dt[0],gt.screenY=dt[1],gt.clientX=lt[0],gt.clientY=lt[1],Z(gt),bt.fireEvent("on"+it,gt))}),this}},nt.Mottle.consume=function(n,a){n.stopPropagation?n.stopPropagation():n.returnValue=!1,!a&&n.preventDefault&&n.preventDefault()},nt.Mottle.pageLocation=w,nt.Mottle.setForceTouchEvents=function(n){S=n},nt.Mottle.setForceMouseEvents=function(n){A=n},nt.Mottle.version="0.8.0",xt.Mottle=nt.Mottle}.call(typeof window=="undefined"?kt:window),function(){var $=this,f=function(n,a,t){return n.indexOf(a)===-1?(t?n.unshift(a):n.push(a),!0):!1},V=function(n,a){var t=n.indexOf(a);t!==-1&&n.splice(t,1)},nt=function(n,a){for(var t=[],v=0;v<n.length;v++)a.indexOf(n[v])===-1&&t.push(n[v]);return t},K=function(n){return n==null?!1:typeof n=="string"||n.constructor===String},Q=function(n){var a=n.getBoundingClientRect(),t=document.body,v=document.documentElement,m=window.pageYOffset||v.scrollTop||t.scrollTop,I=window.pageXOffset||v.scrollLeft||t.scrollLeft,F=v.clientTop||t.clientTop||0,X=v.clientLeft||t.clientLeft||0,N=a.top+m-F,W=a.left+I-X;return{top:Math.round(N),left:Math.round(W)}},u=function(n,a,t){t=t||n.parentNode;for(var v=t.querySelectorAll(a),m=0;m<v.length;m++)if(v[m]===n)return!0;return!1},M=function(n,a,t){if(u(a,t,n))return a;for(var v=a.parentNode;v!=null&&v!==n;){if(u(v,t,n))return v;v=v.parentNode}},s=function(n,a,t){for(var v=null,m=a.getAttribute("katavorio-draggable"),I=m!=null?"[katavorio-draggable='"+m+"'] ":"",F=0;F<n.length;F++)if(v=M(a,t,I+n[F].selector),v!=null){if(n[F].filter){var X=u(t,n[F].filter,v),N=n[F].filterExclude===!0;if(N&&!X||X)return null}return[n[F],v]}return null},i=function(){var n=-1;if(navigator.appName==="Microsoft Internet Explorer"){var a=navigator.userAgent,t=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");t.exec(a)!=null&&(n=parseFloat(RegExp.$1))}return n}(),b=10,D=10,T=i>-1&&i<9,E=i===9,p=function(n){if(T)return[n.clientX+document.documentElement.scrollLeft,n.clientY+document.documentElement.scrollTop];var a=O(n),t=e(a,0);return E?[t.pageX||t.clientX,t.pageY||t.clientY]:[t.pageX,t.pageY]},e=function(n,a){return n.item?n.item(a):n[a]},O=function(n){return n.touches&&n.touches.length>0?n.touches:n.changedTouches&&n.changedTouches.length>0?n.changedTouches:n.targetTouches&&n.targetTouches.length>0?n.targetTouches:[n]},L={delegatedDraggable:"katavorio-delegated-draggable",draggable:"katavorio-draggable",droppable:"katavorio-droppable",drag:"katavorio-drag",selected:"katavorio-drag-selected",active:"katavorio-drag-active",hover:"katavorio-drag-hover",noSelect:"katavorio-drag-no-select",ghostProxy:"katavorio-ghost-proxy",clonedDrag:"katavorio-clone-drag"},G="katavorio-drag-scope",B=["stop","start","drag","drop","over","out","beforeStart"],S=function(){},A=function(){return!0},o=function(n,a,t){for(var v=0;v<n.length;v++)n[v]!=t&&a(n[v])},d=function(n,a,t,v){o(n,function(m){m.setActive(a),a&&m.updatePosition(),t&&m.setHover(v,a)})},l=function(n,a){if(n!=null){n=!K(n)&&n.tagName==null&&n.length!=null?n:[n];for(var t=0;t<n.length;t++)a.apply(n[t],[n[t]])}},C=function(n){n.stopPropagation?(n.stopPropagation(),n.preventDefault()):n.returnValue=!1},w="input,textarea,select,button,option",h=function(n,a,t){var v=n.srcElement||n.target;return!u(v,t.getInputFilterSelector(),a)},j=function(n,a,t,v){this.params=a||{},this.el=n,this.params.addClass(this.el,this._class),this.uuid=R();var m=!0;return this.setEnabled=function(I){m=I},this.isEnabled=function(){return m},this.toggleEnabled=function(){m=!m},this.setScope=function(I){this.scopes=I?I.split(/\s+/):[v]},this.addScope=function(I){var F={};l(this.scopes,function(N){F[N]=!0}),l(I?I.split(/\s+/):[],function(N){F[N]=!0}),this.scopes=[];for(var X in F)this.scopes.push(X)},this.removeScope=function(I){var F={};l(this.scopes,function(N){F[N]=!0}),l(I?I.split(/\s+/):[],function(N){delete F[N]}),this.scopes=[];for(var X in F)this.scopes.push(X)},this.toggleScope=function(I){var F={};l(this.scopes,function(N){F[N]=!0}),l(I?I.split(/\s+/):[],function(N){F[N]?delete F[N]:F[N]=!0}),this.scopes=[];for(var X in F)this.scopes.push(X)},this.setScope(a.scope),this.k=a.katavorio,a.katavorio},g=function(){return!0},P=function(){return!1},c=function(n,a,t,v){this._class=t.draggable;var m=j.apply(this,arguments);this.rightButtonCanDrag=this.params.rightButtonCanDrag;var I=[0,0],F=null,X=null,N=[0,0],W=!1,ot=[0,0],st=this.params.consumeStartEvent!==!1,it=this.el,rt=this.params.clone;this.params.scroll;var pt=a.multipleDrop!==!1,dt=!1,lt,bt,gt=null,Z=[],q=null,J=a.ghostProxyParent,ut,vt,St,Tt;if(a.ghostProxy===!0?lt=g:a.ghostProxy&&typeof a.ghostProxy=="function"?lt=a.ghostProxy:lt=function(tt,_t){return q&&q.useGhostProxy?q.useGhostProxy(tt,_t):!1},a.makeGhostProxy?bt=a.makeGhostProxy:bt=function(tt){return q&&q.makeGhostProxy?q.makeGhostProxy(tt):tt.cloneNode(!0)},a.selector){var It=n.getAttribute("katavorio-draggable");It==null&&(It=""+new Date().getTime(),n.setAttribute("katavorio-draggable",It)),Z.push(a)}var Bt=a.snapThreshold,Gt=function(tt,_t,Pt,yt,Et){var wt=Math.floor(tt[0]/_t),r=_t*wt,x=r+_t,y=Math.abs(tt[0]-r)<=yt?r:Math.abs(x-tt[0])<=yt?x:tt[0],k=Math.floor(tt[1]/Pt),H=Pt*k,z=H+Pt,et=Math.abs(tt[1]-H)<=Et?H:Math.abs(z-tt[1])<=Et?z:tt[1];return[y,et]};this.posses=[],this.posseRoles={},this.toGrid=function(tt){if(this.params.grid==null)return tt;var _t=this.params.grid?this.params.grid[0]/2:Bt||b/2,Pt=this.params.grid?this.params.grid[1]/2:Bt||D/2;return Gt(tt,this.params.grid[0],this.params.grid[1],_t,Pt)},this.snap=function(tt,_t){if(it!=null){tt=tt||(this.params.grid?this.params.grid[0]:b),_t=_t||(this.params.grid?this.params.grid[1]:D);var Pt=this.params.getPosition(it),yt=this.params.grid?this.params.grid[0]/2:Bt,Et=this.params.grid?this.params.grid[1]/2:Bt,wt=Gt(Pt,tt,_t,yt,Et);return this.params.setPosition(it,wt),wt}},this.setUseGhostProxy=function(tt){lt=tt?g:P};var Ht,le=function(tt){return a.allowNegative===!1?[Math.max(0,tt[0]),Math.max(0,tt[1])]:tt},ue=function(tt){Ht=typeof tt=="function"?tt:tt?function(_t,Pt,yt,Et){return le([Math.max(0,Math.min(yt.w-Et[0],_t[0])),Math.max(0,Math.min(yt.h-Et[1],_t[1]))])}.bind(this):function(_t){return le(_t)}}.bind(this);ue(typeof this.params.constrain=="function"?this.params.constrain:this.params.constrain||this.params.containment),this.setConstrain=function(tt){ue(tt)};var he=function(tt,_t,Pt,yt){return q!=null&&q.constrain&&typeof q.constrain=="function"?q.constrain(tt,_t,Pt,yt):Ht(tt,_t,Pt,yt)},Ut;this.setRevert=function(tt){Ut=tt},this.params.revert&&(Ut=this.params.revert);var te=function(tt){return typeof tt=="function"?(tt._katavorioId=R(),tt._katavorioId):tt},Yt={},ee=function(tt){for(var _t in Yt){var Pt=Yt[_t],yt=Pt[0](tt);if(Pt[1]&&(yt=!yt),!yt)return!1}return!0},ie=this.setFilter=function(tt,_t){if(tt){var Pt=te(tt);Yt[Pt]=[function(yt){var Et=yt.srcElement||yt.target,wt;return K(tt)?wt=u(Et,tt,n):typeof tt=="function"&&(wt=tt(yt,n)),wt},_t!==!1]}};this.addFilter=ie,this.removeFilter=function(tt){var _t=typeof tt=="function"?tt._katavorioId:tt;delete Yt[_t]},this.clearAllFilters=function(){Yt={}},this.canDrag=this.params.canDrag||A;var se,jt=[],Xt=[];this.addSelector=function(tt){tt.selector&&Z.push(tt)},this.downListener=function(tt){if(!tt.defaultPrevented){var _t=this.rightButtonCanDrag||tt.which!==3&&tt.button!==2;if(_t&&this.isEnabled()&&this.canDrag()){var Pt=ee(tt)&&h(tt,this.el,this.k);if(Pt){if(q=null,gt=null,Z.length>0){var yt=s(Z,this.el,tt.target||tt.srcElement);if(yt!=null&&(q=yt[0],gt=yt[1]),gt==null)return}else gt=this.el;if(rt)if(it=gt.cloneNode(!0),this.params.addClass(it,L.clonedDrag),it.setAttribute("id",null),it.style.position="absolute",this.params.parent!=null){var Et=this.params.getPosition(this.el);it.style.left=Et[0]+"px",it.style.top=Et[1]+"px",this.params.parent.appendChild(it)}else{var wt=Q(gt);it.style.left=wt.left+"px",it.style.top=wt.top+"px",document.body.appendChild(it)}else it=gt;st&&C(tt),I=p(tt),it&&it.parentNode&&(ot=[it.parentNode.scrollLeft,it.parentNode.scrollTop]),this.params.bind(document,"mousemove",this.moveListener),this.params.bind(document,"mouseup",this.upListener),m.markSelection(this),m.markPosses(this),this.params.addClass(document.body,t.noSelect),Vt("beforeStart",{el:this.el,pos:F,e:tt,drag:this})}else this.params.consumeFilteredEvents&&C(tt)}}}.bind(this),this.moveListener=function(tt){if(I){if(!W){var _t=Vt("start",{el:this.el,pos:F,e:tt,drag:this});if(_t!==!1){if(!I)return;this.mark(!0),W=!0}else this.abort()}if(I){Xt.length=0;var Pt=p(tt),yt=Pt[0]-I[0],Et=Pt[1]-I[1],wt=this.params.ignoreZoom?1:m.getZoom();it&&it.parentNode&&(yt+=it.parentNode.scrollLeft-ot[0],Et+=it.parentNode.scrollTop-ot[1]),yt/=wt,Et/=wt,this.moveBy(yt,Et,tt),m.updateSelection(yt,Et,this),m.updatePosses(yt,Et,this)}}}.bind(this),this.upListener=function(tt){I&&(I=null,this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.params.removeClass(document.body,t.noSelect),this.unmark(tt),m.unmarkSelection(this,tt),m.unmarkPosses(this,tt),this.stop(tt),m.notifyPosseDragStop(this,tt),W=!1,Xt.length=0,rt?(it&&it.parentNode&&it.parentNode.removeChild(it),it=null):Ut&&Ut(it,this.params.getPosition(it))===!0&&(this.params.setPosition(it,F),Vt("revert",it)))}.bind(this),this.getFilters=function(){return Yt},this.abort=function(){I!=null&&this.upListener()},this.getDragElement=function(tt){return tt?gt||this.el:it||this.el};var Mt={start:[],drag:[],stop:[],over:[],out:[],beforeStart:[],revert:[]};a.events.start&&Mt.start.push(a.events.start),a.events.beforeStart&&Mt.beforeStart.push(a.events.beforeStart),a.events.stop&&Mt.stop.push(a.events.stop),a.events.drag&&Mt.drag.push(a.events.drag),a.events.revert&&Mt.revert.push(a.events.revert),this.on=function(tt,_t){Mt[tt]&&Mt[tt].push(_t)},this.off=function(tt,_t){if(Mt[tt]){for(var Pt=[],yt=0;yt<Mt[tt].length;yt++)Mt[tt][yt]!==_t&&Pt.push(Mt[tt][yt]);Mt[tt]=Pt}};var Vt=function(tt,_t){var Pt=null;if(q&&q[tt])Pt=q[tt](_t);else if(Mt[tt])for(var yt=0;yt<Mt[tt].length;yt++)try{var Et=Mt[tt][yt](_t);Et!=null&&(Pt=Et)}catch{}return Pt};this.notifyStart=function(tt){Vt("start",{el:this.el,pos:this.params.getPosition(it),e:tt,drag:this})},this.stop=function(tt,_t){if(_t||W){var Pt=[],yt=m.getSelection(),Et=this.params.getPosition(it);if(yt.length>0)for(var wt=0;wt<yt.length;wt++){var r=this.params.getPosition(yt[wt].el);Pt.push([yt[wt].el,{left:r[0],top:r[1]},yt[wt]])}else Pt.push([it,{left:Et[0],top:Et[1]},this]);Vt("stop",{el:it,pos:$t||Et,finalPos:Et,e:tt,drag:this,selection:Pt})}},this.mark=function(tt){F=this.params.getPosition(it),X=this.params.getPosition(it,!0),N=[X[0]-F[0],X[1]-F[1]],this.size=this.params.getSize(it),jt=m.getMatchingDroppables(this),d(jt,!0,!1,this),this.params.addClass(it,this.params.dragClass||t.drag);var _t;this.params.getConstrainingRectangle?_t=this.params.getConstrainingRectangle(it):_t=this.params.getSize(it.parentNode),se={w:_t[0],h:_t[1]},St=0,Tt=0,tt&&m.notifySelectionDragStart(this)};var $t;this.unmark=function(tt,_t){if(d(jt,!1,!0,this),dt&&lt(gt,it)?($t=[it.offsetLeft-St,it.offsetTop-Tt],it.parentNode.removeChild(it),it=gt):$t=null,this.params.removeClass(it,this.params.dragClass||t.drag),jt.length=0,dt=!1,!_t){Xt.length>0&&$t&&a.setPosition(gt,$t),Xt.sort(U);for(var Pt=0;Pt<Xt.length;Pt++){var yt=Xt[Pt].drop(this,tt);if(yt===!0)break}}},this.moveBy=function(tt,_t,Pt){Xt.length=0;var yt=this.toGrid([F[0]+tt,F[1]+_t]),Et=he(yt,it,se,this.size);if(lt(this.el,it))if(yt[0]!==Et[0]||yt[1]!==Et[1]){if(!dt){var wt=bt(gt);a.addClass(wt,L.ghostProxy),J?(J.appendChild(wt),ut=a.getPosition(gt.parentNode,!0),vt=a.getPosition(a.ghostProxyParent,!0),St=ut[0]-vt[0],Tt=ut[1]-vt[1]):gt.parentNode.appendChild(wt),it=wt,dt=!0}Et=yt}else dt&&(it.parentNode.removeChild(it),it=gt,dt=!1,ut=null,vt=null,St=0,Tt=0);var r={x:Et[0],y:Et[1],w:this.size[0],h:this.size[1]},x={x:r.x+N[0],y:r.y+N[1],w:r.w,h:r.h},y=null;this.params.setPosition(it,[Et[0]+St,Et[1]+Tt]);for(var k=0;k<jt.length;k++){var H={x:jt[k].pagePosition[0],y:jt[k].pagePosition[1],w:jt[k].size[0],h:jt[k].size[1]};this.params.intersects(x,H)&&(pt||y==null||y===jt[k].el)&&jt[k].canDrop(this)?(y||(y=jt[k].el),Xt.push(jt[k]),jt[k].setHover(this,!0,Pt)):jt[k].isHover()&&jt[k].setHover(this,!1,Pt)}Vt("drag",{el:this.el,pos:Et,e:Pt,drag:this})},this.destroy=function(){this.params.unbind(this.el,"mousedown",this.downListener),this.params.unbind(document,"mousemove",this.moveListener),this.params.unbind(document,"mouseup",this.upListener),this.downListener=null,this.upListener=null,this.moveListener=null},this.params.bind(this.el,"mousedown",this.downListener),this.params.handle?ie(this.params.handle,!1):ie(this.params.filter,this.params.filterExclude)},_=function(n,a,t,v){this._class=t.droppable,this.params=a||{},this.rank=a.rank||0,this._activeClass=this.params.activeClass||t.active,this._hoverClass=this.params.hoverClass||t.hover,j.apply(this,arguments);var m=!1;this.allowLoopback=this.params.allowLoopback!==!1,this.setActive=function(I){this.params[I?"addClass":"removeClass"](this.el,this._activeClass)},this.updatePosition=function(){this.position=this.params.getPosition(this.el),this.pagePosition=this.params.getPosition(this.el,!0),this.size=this.params.getSize(this.el)},this.canDrop=this.params.canDrop||function(I){return!0},this.isHover=function(){return m},this.setHover=function(I,F,X){(F||this.el._katavorioDragHover==null||this.el._katavorioDragHover===I.el._katavorio)&&(this.params[F?"addClass":"removeClass"](this.el,this._hoverClass),this.el._katavorioDragHover=F?I.el._katavorio:null,m!==F&&this.params.events[F?"over":"out"]({el:this.el,e:X,drag:I,drop:this}),m=F)},this.drop=function(I,F){return this.params.events.drop({drag:I,e:F,drop:this})},this.destroy=function(){this._class=null,this._activeClass=null,this._hoverClass=null,m=null}},R=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var a=Math.random()*16|0,t=n==="x"?a:a&3|8;return t.toString(16)})},U=function(n,a){return n.rank<a.rank?1:n.rank>a.rank?-1:0},Y=function(n){return n==null||(n=typeof n=="string"||n.constructor===String?document.getElementById(n):n,n==null)?null:(n._katavorio=n._katavorio||R(),n)};$.Katavorio=function(n){var a=[],t={};this._dragsByScope={},this._dropsByScope={};var v=1,m=function(Z,q){l(Z,function(J){for(var ut=0;ut<J.scopes.length;ut++)q[J.scopes[ut]]=q[J.scopes[ut]]||[],q[J.scopes[ut]].push(J)})},I=function(Z,q){var J=0;return l(Z,function(ut){for(var vt=0;vt<ut.scopes.length;vt++)if(q[ut.scopes[vt]]){var St=n.indexOf(q[ut.scopes[vt]],ut);St!==-1&&(q[ut.scopes[vt]].splice(St,1),J++)}}),J>0};this.getMatchingDroppables=function(Z){for(var q=[],J={},ut=0;ut<Z.scopes.length;ut++){var vt=this._dropsByScope[Z.scopes[ut]];if(vt)for(var St=0;St<vt.length;St++)vt[St].canDrop(Z)&&!J[vt[St].uuid]&&(vt[St].allowLoopback||vt[St].el!==Z.el)&&(J[vt[St].uuid]=!0,q.push(vt[St]))}return q.sort(U),q};var F=function(Z){Z=Z||{};var q={events:{}},J;for(J in n)q[J]=n[J];for(J in Z)q[J]=Z[J];for(J=0;J<B.length;J++)q.events[B[J]]=Z[B[J]]||S;return q.katavorio=this,q}.bind(this),X=function(Z,q){for(var J=0;J<B.length;J++)q[B[J]]&&Z.on(B[J],q[B[J]])}.bind(this),N={},W=n.css||{},ot=n.scope||G;for(var st in L)N[st]=L[st];for(var st in W)N[st]=W[st];var it=n.inputFilterSelector||w;this.getInputFilterSelector=function(){return it},this.setInputFilterSelector=function(Z){return it=Z,this},this.draggable=function(Z,q){var J=[];return l(Z,function(ut){if(ut=Y(ut),ut!=null)if(ut._katavorioDrag==null){var vt=F(q);ut._katavorioDrag=new c(ut,vt,N,ot),m(ut._katavorioDrag,this._dragsByScope),J.push(ut._katavorioDrag),n.addClass(ut,vt.selector?N.delegatedDraggable:N.draggable)}else X(ut._katavorioDrag,q)}.bind(this)),J},this.droppable=function(Z,q){var J=[];return l(Z,function(ut){if(ut=Y(ut),ut!=null){var vt=new _(ut,F(q),N,ot);ut._katavorioDrop=ut._katavorioDrop||[],ut._katavorioDrop.push(vt),m(vt,this._dropsByScope),J.push(vt),n.addClass(ut,N.droppable)}}.bind(this)),J},this.select=function(Z){return l(Z,function(){var q=Y(this);q&&q._katavorioDrag&&(t[q._katavorio]||(a.push(q._katavorioDrag),t[q._katavorio]=[q,a.length-1],n.addClass(q,N.selected)))}),this},this.deselect=function(Z){return l(Z,function(){var q=Y(this);if(q&&q._katavorio){var J=t[q._katavorio];if(J){for(var ut=[],vt=0;vt<a.length;vt++)a[vt].el!==q&&ut.push(a[vt]);a=ut,delete t[q._katavorio],n.removeClass(q,N.selected)}}}),this},this.deselectAll=function(){for(var Z in t){var q=t[Z];n.removeClass(q[0],N.selected)}a.length=0,t={}},this.markSelection=function(Z){o(a,function(q){q.mark()},Z)},this.markPosses=function(Z){Z.posses&&l(Z.posses,function(q){Z.posseRoles[q]&&bt[q]&&o(bt[q].members,function(J){J.mark()},Z)})},this.unmarkSelection=function(Z,q){o(a,function(J){J.unmark(q)},Z)},this.unmarkPosses=function(Z,q){Z.posses&&l(Z.posses,function(J){Z.posseRoles[J]&&bt[J]&&o(bt[J].members,function(ut){ut.unmark(q,!0)},Z)})},this.getSelection=function(){return a.slice(0)},this.updateSelection=function(Z,q,J){o(a,function(ut){ut.moveBy(Z,q)},J)};var rt=function(Z,q){q.posses&&l(q.posses,function(J){q.posseRoles[J]&&bt[J]&&o(bt[J].members,function(ut){Z(ut)},q)})};this.updatePosses=function(Z,q,J){rt(function(ut){ut.moveBy(Z,q)},J)},this.notifyPosseDragStop=function(Z,q){rt(function(J){J.stop(q,!0)},Z)},this.notifySelectionDragStop=function(Z,q){o(a,function(J){J.stop(q,!0)},Z)},this.notifySelectionDragStart=function(Z,q){o(a,function(J){J.notifyStart(q)},Z)},this.setZoom=function(Z){v=Z},this.getZoom=function(){return v};var pt=function(Z,q,J,ut){l(Z,function(vt){I(vt,J),vt[ut](q),m(vt,J)})};l(["set","add","remove","toggle"],function(Z){this[Z+"Scope"]=function(q,J){pt(q._katavorioDrag,J,this._dragsByScope,Z+"Scope"),pt(q._katavorioDrop,J,this._dropsByScope,Z+"Scope")}.bind(this),this[Z+"DragScope"]=function(q,J){pt(q.constructor===c?q:q._katavorioDrag,J,this._dragsByScope,Z+"Scope")}.bind(this),this[Z+"DropScope"]=function(q,J){pt(q.constructor===_?q:q._katavorioDrop,J,this._dropsByScope,Z+"Scope")}.bind(this)}.bind(this)),this.snapToGrid=function(Z,q){for(var J in this._dragsByScope)o(this._dragsByScope[J],function(ut){ut.snap(Z,q)})},this.getDragsForScope=function(Z){return this._dragsByScope[Z]},this.getDropsForScope=function(Z){return this._dropsByScope[Z]};var dt=function(Z,q,J){if(Z=Y(Z),Z[q]){var ut=a.indexOf(Z[q]);ut>=0&&a.splice(ut,1),I(Z[q],J)&&l(Z[q],function(vt){vt.destroy()}),delete Z[q]}},lt=function(Z,q,J,ut){Z=Y(Z),Z[q]&&Z[q].off(J,ut)};this.elementRemoved=function(Z){Z._katavorioDrag&&this.destroyDraggable(Z),Z._katavorioDrop&&this.destroyDroppable(Z)},this.destroyDraggable=function(Z,q,J){arguments.length===1?dt(Z,"_katavorioDrag",this._dragsByScope):lt(Z,"_katavorioDrag",q,J)},this.destroyDroppable=function(Z,q,J){arguments.length===1?dt(Z,"_katavorioDrop",this._dropsByScope):lt(Z,"_katavorioDrop",q,J)},this.reset=function(){this._dragsByScope={},this._dropsByScope={},a=[],t={},bt={}};var bt={},gt=function(Z,q,J){var ut=K(q)?q:q.id,vt=K(q)?!0:q.active!==!1,St=bt[ut]||function(){var Tt={name:ut,members:[]};return bt[ut]=Tt,Tt}();return l(Z,function(Tt){if(Tt._katavorioDrag){if(J&&Tt._katavorioDrag.posseRoles[St.name]!=null)return;f(St.members,Tt._katavorioDrag),f(Tt._katavorioDrag.posses,St.name),Tt._katavorioDrag.posseRoles[St.name]=vt}}),St};this.addToPosse=function(Z,q){for(var J=[],ut=1;ut<arguments.length;ut++)J.push(gt(Z,arguments[ut]));return J.length===1?J[0]:J},this.setPosse=function(Z,q){for(var J=[],ut=1;ut<arguments.length;ut++)J.push(gt(Z,arguments[ut],!0).name);return l(Z,function(vt){if(vt._katavorioDrag){var St=nt(vt._katavorioDrag.posses,J),Tt=[];Array.prototype.push.apply(Tt,vt._katavorioDrag.posses);for(var It=0;It<St.length;It++)this.removeFromPosse(vt,St[It])}}.bind(this)),J.length===1?J[0]:J},this.removeFromPosse=function(Z,q){if(arguments.length<2)throw new TypeError("No posse id provided for remove operation");for(var J=1;J<arguments.length;J++)q=arguments[J],l(Z,function(ut){if(ut._katavorioDrag&&ut._katavorioDrag.posses){var vt=ut._katavorioDrag;l(q,function(St){V(bt[St].members,vt),V(vt.posses,St),delete vt.posseRoles[St]})}})},this.removeFromAllPosses=function(Z){l(Z,function(q){if(q._katavorioDrag&&q._katavorioDrag.posses){var J=q._katavorioDrag;l(J.posses,function(ut){V(bt[ut].members,J)}),J.posses.length=0,J.posseRoles={}}})},this.setPosseState=function(Z,q,J){var ut=bt[q];ut&&l(Z,function(vt){vt._katavorioDrag&&vt._katavorioDrag.posses&&(vt._katavorioDrag.posseRoles[ut.name]=J)})}},$.Katavorio.version="1.0.0",xt.Katavorio=$.Katavorio}.call(typeof window!="undefined"?window:kt),function(){var $=this;$.jsPlumbUtil=$.jsPlumbUtil||{};var f=$.jsPlumbUtil;xt.jsPlumbUtil=f;function V(n){return Object.prototype.toString.call(n)==="[object Array]"}f.isArray=V;function nt(n){return Object.prototype.toString.call(n)==="[object Number]"}f.isNumber=nt;function K(n){return typeof n=="string"}f.isString=K;function Q(n){return typeof n=="boolean"}f.isBoolean=Q;function u(n){return n==null}f.isNull=u;function M(n){return n==null?!1:Object.prototype.toString.call(n)==="[object Object]"}f.isObject=M;function s(n){return Object.prototype.toString.call(n)==="[object Date]"}f.isDate=s;function i(n){return Object.prototype.toString.call(n)==="[object Function]"}f.isFunction=i;function b(n){return i(n)&&n.name!=null&&n.name.length>0}f.isNamedFunction=b;function D(n){for(var a in n)if(n.hasOwnProperty(a))return!1;return!0}f.isEmpty=D;function T(n){if(K(n))return""+n;if(Q(n))return!!n;if(s(n))return new Date(n.getTime());if(i(n))return n;if(V(n)){for(var a=[],t=0;t<n.length;t++)a.push(T(n[t]));return a}else if(M(n)){var v={};for(var m in n)v[m]=T(n[m]);return v}else return n}f.clone=T;function E(n,a,t,v){var m={},I,F,X={};for(t=t||[],v=v||[],F=0;F<t.length;F++)m[t[F]]=!0;for(F=0;F<v.length;F++)X[v[F]]=!0;var N=T(n);for(F in a)if(N[F]==null||X[F])N[F]=a[F];else if(K(a[F])||Q(a[F]))m[F]?(I=[],I.push.apply(I,V(N[F])?N[F]:[N[F]]),I.push.apply(I,Q(a[F])?a[F]:[a[F]]),N[F]=I):N[F]=a[F];else if(V(a[F]))I=[],V(N[F])&&I.push.apply(I,N[F]),I.push.apply(I,a[F]),N[F]=I;else if(M(a[F])){M(N[F])||(N[F]={});for(var W in a[F])N[F][W]=a[F][W]}return N}f.merge=E;function p(n,a,t){if(n!=null){var v=n,m=v;return a.replace(/([^\.])+/g,function(I,F,X,N){var W=I.match(/([^\[0-9]+){1}(\[)([0-9+])/),ot=X+I.length>=N.length,st=function(){return m[W[1]]||function(){return m[W[1]]=[],m[W[1]]}()};if(ot)W?st()[W[3]]=t:m[I]=t;else if(W){var it=st();m=it[W[3]]||function(){return it[W[3]]={},it[W[3]]}()}else m=m[I]||function(){return m[I]={},m[I]}();return""}),n}}f.replace=p;function e(n,a,t){for(var v=0;v<t.length;v++){var m=t[v][0][t[v][1]].apply(t[v][0],t[v][2]);if(m===a)return m}return n}f.functionChain=e;function O(n,a,t,v){var m=function(F){var X=F.match(/(\${.*?})/g);if(X!=null)for(var N=0;N<X.length;N++){var W=a[X[N].substring(2,X[N].length-1)]||"";W!=null&&(F=F.replace(X[N],W))}return F},I=function(F){if(F!=null){if(K(F))return m(F);if(i(F)&&!v&&(t==null||(F.name||"").indexOf(t)===0))return F(a);if(V(F)){for(var X=[],N=0;N<F.length;N++)X.push(I(F[N]));return X}else if(M(F)){var W={};for(var ot in F)W[ot]=I(F[ot]);return W}else return F}};return I(n)}f.populate=O;function L(n,a){if(n){for(var t=0;t<n.length;t++)if(a(n[t]))return t}return-1}f.findWithFunction=L;function G(n,a){var t=L(n,a);return t>-1&&n.splice(t,1),t!==-1}f.removeWithFunction=G;function B(n,a){var t=n.indexOf(a);return t>-1&&n.splice(t,1),t!==-1}f.remove=B;function S(n,a,t){L(n,t)===-1&&n.push(a)}f.addWithFunction=S;function A(n,a,t,v){var m=n[a];return m==null&&(m=[],n[a]=m),m[v?"unshift":"push"](t),m}f.addToList=A;function o(n,a,t){return n.indexOf(a)===-1?(t?n.unshift(a):n.push(a),!0):!1}f.suggest=o;function d(n,a,t){var v;a=V(a)?a:[a];var m=function(N){for(var W=N.__proto__;W!=null;)if(W.prototype!=null){for(var ot in W.prototype)W.prototype.hasOwnProperty(ot)&&!n.prototype.hasOwnProperty(ot)&&(n.prototype[ot]=W.prototype[ot]);W=W.prototype.__proto__}else W=null};for(v=0;v<a.length;v++){for(var I in a[v].prototype)a[v].prototype.hasOwnProperty(I)&&!n.prototype.hasOwnProperty(I)&&(n.prototype[I]=a[v].prototype[I]);m(a[v])}var F=function(N,W){return function(){for(v=0;v<a.length;v++)a[v].prototype[N]&&a[v].prototype[N].apply(this,arguments);return W.apply(this,arguments)}},X=function(N){for(var W in N)n.prototype[W]=F(W,N[W])};if(arguments.length>2)for(v=2;v<arguments.length;v++)X(arguments[v]);return n}f.extend=d;for(var l=[],C=0;C<256;C++)l[C]=(C<16?"0":"")+C.toString(16);function w(){var n=Math.random()*4294967295|0,a=Math.random()*4294967295|0,t=Math.random()*4294967295|0,v=Math.random()*4294967295|0;return l[n&255]+l[n>>8&255]+l[n>>16&255]+l[n>>24&255]+"-"+l[a&255]+l[a>>8&255]+"-"+l[a>>16&15|64]+l[a>>24&255]+"-"+l[t&63|128]+l[t>>8&255]+"-"+l[t>>16&255]+l[t>>24&255]+l[v&255]+l[v>>8&255]+l[v>>16&255]+l[v>>24&255]}f.uuid=w;function h(n){if(n==null)return null;for(var a=n.replace(/^\s\s*/,""),t=/\s/,v=a.length;t.test(a.charAt(--v)););return a.slice(0,v+1)}f.fastTrim=h;function j(n,a){n=n.length==null||typeof n=="string"?[n]:n;for(var t=0;t<n.length;t++)a(n[t])}f.each=j;function g(n,a){for(var t=[],v=0;v<n.length;v++)t.push(a(n[v]));return t}f.map=g;function P(n,a,t){t=t||"parent";var v=function(N){return N?a[N]:null},m=function(N){return N?v(N[t]):null},I=function(N,W){if(N==null)return W;var ot=["anchor","anchors","cssClass","connector","paintStyle","hoverPaintStyle","endpoint","endpoints"];W.mergeStrategy==="override"&&Array.prototype.push.apply(ot,["events","overlays"]);var st=E(N,W,[],ot);return I(m(N),st)},F=function(N){if(N==null)return{};if(typeof N=="string")return v(N);if(N.length){for(var W=!1,ot=0,st=void 0;!W&&ot<N.length;)st=F(N[ot]),st?W=!0:ot++;return st}},X=F(n);return X?I(m(X),X):{}}f.mergeWithParents=P,f.logEnabled=!0;function c(){if(f.logEnabled&&typeof console!="undefined")try{var n=arguments[arguments.length-1];console.log(n)}catch{}}f.log=c;function _(n,a,t){return function(){var v=null;try{a!=null&&(v=a.apply(this,arguments))}catch(m){c("jsPlumb function failed : "+m)}if(n!=null&&(t==null||v!==t))try{v=n.apply(this,arguments)}catch(m){c("wrapped function failed : "+m)}return v}}f.wrap=_;var R=function(){function n(){var a=this;this._listeners={},this.eventsSuspended=!1,this.tick=!1,this.eventsToDieOn={ready:!0},this.queue=[],this.bind=function(t,v,m){var I=function(X){A(a._listeners,X,v,m),v.__jsPlumb=v.__jsPlumb||{},v.__jsPlumb[w()]=X};if(typeof t=="string")I(t);else if(t.length!=null)for(var F=0;F<t.length;F++)I(t[F]);return a},this.fire=function(t,v,m){if(this.tick)this.queue.unshift(arguments);else{if(this.tick=!0,!this.eventsSuspended&&this._listeners[t]){var I=this._listeners[t].length,F=0,X=!1,N=null;if(!this.shouldFireEvent||this.shouldFireEvent(t,v,m))for(;!X&&F<I&&N!==!1;){if(this.eventsToDieOn[t])this._listeners[t][F].apply(this,[v,m]);else try{N=this._listeners[t][F].apply(this,[v,m])}catch(W){c("jsPlumb: fire failed for event "+t+" : "+W)}F++,(this._listeners==null||this._listeners[t]==null)&&(X=!0)}}this.tick=!1,this._drain()}return this},this._drain=function(){var t=a.queue.pop();t&&a.fire.apply(a,t)},this.unbind=function(t,v){if(arguments.length===0)this._listeners={};else if(arguments.length===1){if(typeof t=="string")delete this._listeners[t];else if(t.__jsPlumb){var m=void 0;for(var I in t.__jsPlumb)m=t.__jsPlumb[I],B(this._listeners[m]||[],t)}}else arguments.length===2&&B(this._listeners[t]||[],v);return this},this.getListener=function(t){return a._listeners[t]},this.setSuspendEvents=function(t){a.eventsSuspended=t},this.isSuspendEvents=function(){return a.eventsSuspended},this.silently=function(t){a.setSuspendEvents(!0);try{t()}catch(v){c("Cannot execute silent function "+v)}a.setSuspendEvents(!1)},this.cleanupListeners=function(){for(var t in a._listeners)a._listeners[t]=null}}return n}();f.EventGenerator=R;function U(n,a,t){var v=[n[0]-a[0],n[1]-a[1]],m=Math.cos(t/360*Math.PI*2),I=Math.sin(t/360*Math.PI*2);return[v[0]*m-v[1]*I+a[0],v[1]*m+v[0]*I+a[1],m,I]}f.rotatePoint=U;function Y(n,a){var t=U(n,[0,0],a);return[Math.round(t[0]),Math.round(t[1])]}f.rotateAnchorOrientation=Y}.call(typeof window!="undefined"?window:kt),function(){var $=this;$.jsPlumbUtil.matchesSelector=function(f,V,nt){nt=nt||f.parentNode;for(var K=nt.querySelectorAll(V),Q=0;Q<K.length;Q++)if(K[Q]===f)return!0;return!1},$.jsPlumbUtil.consume=function(f,V){f.stopPropagation?f.stopPropagation():f.returnValue=!1,!V&&f.preventDefault&&f.preventDefault()},$.jsPlumbUtil.sizeElement=function(f,V,nt,K,Q){f&&(f.style.height=Q+"px",f.height=Q,f.style.width=K+"px",f.width=K,f.style.left=V+"px",f.style.top=nt+"px")}}.call(typeof window!="undefined"?window:kt),function(){var $={deriveAnchor:function(K,Q,u,M){return{top:["TopRight","TopLeft"],bottom:["BottomRight","BottomLeft"]}[K][Q]}},f=this,V=function(K,Q){this.count=0,this.instance=K,this.lists={},this.options=Q||{},this.instance.addList=function(u,M){return this.listManager.addList(u,M)},this.instance.removeList=function(u){this.listManager.removeList(u)},this.instance.bind("manageElement",function(u){for(var M=this.instance.getSelector(u.el,"[jtk-scrollable-list]"),s=0;s<M.length;s++)this.addList(M[s])}.bind(this)),this.instance.bind("unmanageElement",function(u){this.removeList(u.el)}),this.instance.bind("connection",function(u,M){M==null&&(this._maybeUpdateParentList(u.source),this._maybeUpdateParentList(u.target))}.bind(this))};f.jsPlumbListManager=V,V.prototype={addList:function(K,Q){var u=this.instance.extend({},$);this.instance.extend(u,this.options),Q=this.instance.extend(u,Q||{});var M=[this.instance.getInstanceIndex(),this.count++].join("_");this.lists[M]=new nt(this.instance,K,Q,M)},removeList:function(K){var Q=this.lists[K._jsPlumbList];Q&&(Q.destroy(),delete this.lists[K._jsPlumbList])},_maybeUpdateParentList:function(K){for(var Q=K.parentNode,u=this.instance.getContainer();Q!=null&&Q!==u;){if(Q._jsPlumbList!=null&&this.lists[Q._jsPlumbList]!=null){Q._jsPlumbScrollHandler();return}Q=Q.parentNode}}};var nt=function(K,Q,u,M){Q._jsPlumbList=M;function s(T,E,p,e){return u.anchor?u.anchor:u.deriveAnchor(T,E,p,e)}function i(T,E,p,e){return u.deriveEndpoint?u.deriveEndpoint(T,E,p,e):u.endpoint?u.endpoint:p.type}function b(T){for(var E=T.parentNode,p=K.getContainer();E!=null&&E!==p;){if(K.hasClass(E,"jtk-managed")){K.recalculateOffsets(E);return}E=E.parentNode}}var D=function(T){for(var E=K.getSelector(Q,".jtk-managed"),p=K.getId(Q),e=0;e<E.length;e++){if(E[e].offsetTop<Q.scrollTop)E[e]._jsPlumbProxies||(E[e]._jsPlumbProxies=E[e]._jsPlumbProxies||[],K.select({source:E[e]}).each(function(L){K.proxyConnection(L,0,Q,p,function(){return i("top",0,L.endpoints[0],L)},function(){return s("top",0,L.endpoints[0],L)}),E[e]._jsPlumbProxies.push([L,0])}),K.select({target:E[e]}).each(function(L){K.proxyConnection(L,1,Q,p,function(){return i("top",1,L.endpoints[1],L)},function(){return s("top",1,L.endpoints[1],L)}),E[e]._jsPlumbProxies.push([L,1])}));else if(E[e].offsetTop+E[e].offsetHeight>Q.scrollTop+Q.offsetHeight)E[e]._jsPlumbProxies||(E[e]._jsPlumbProxies=E[e]._jsPlumbProxies||[],K.select({source:E[e]}).each(function(L){K.proxyConnection(L,0,Q,p,function(){return i("bottom",0,L.endpoints[0],L)},function(){return s("bottom",0,L.endpoints[0],L)}),E[e]._jsPlumbProxies.push([L,0])}),K.select({target:E[e]}).each(function(L){K.proxyConnection(L,1,Q,p,function(){return i("bottom",1,L.endpoints[1],L)},function(){return s("bottom",1,L.endpoints[1],L)}),E[e]._jsPlumbProxies.push([L,1])}));else if(E[e]._jsPlumbProxies){for(var O=0;O<E[e]._jsPlumbProxies.length;O++)K.unproxyConnection(E[e]._jsPlumbProxies[O][0],E[e]._jsPlumbProxies[O][1],p);delete E[e]._jsPlumbProxies}K.revalidate(E[e])}b(Q)};K.setAttribute(Q,"jtk-scrollable-list","true"),Q._jsPlumbScrollHandler=D,K.on(Q,"scroll",D),D(),this.destroy=function(){K.off(Q,"scroll",D),delete Q._jsPlumbScrollHandler;for(var T=K.getSelector(Q,".jtk-managed"),E=K.getId(Q),p=0;p<T.length;p++)if(T[p]._jsPlumbProxies){for(var e=0;e<T[p]._jsPlumbProxies.length;e++)K.unproxyConnection(T[p]._jsPlumbProxies[e][0],T[p]._jsPlumbProxies[e][1],E);delete T[p]._jsPlumbProxies}}}}.call(typeof window!="undefined"?window:kt),function(){var $=this,f=$.jsPlumbUtil,V=function(p){if(p._jsPlumb.paintStyle&&p._jsPlumb.hoverPaintStyle){var e={};E.extend(e,p._jsPlumb.paintStyle),E.extend(e,p._jsPlumb.hoverPaintStyle),delete p._jsPlumb.hoverPaintStyle,e.gradient&&p._jsPlumb.paintStyle.fill&&delete e.gradient,p._jsPlumb.hoverPaintStyle=e}},nt=["tap","dbltap","click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu"],K=function(p,e,O,L){var G=p.getAttachedElements();if(G)for(var B=0,S=G.length;B<S;B++)(!L||L!==G[B])&&G[B].setHover(e,!0,O)},Q=function(p){return p==null?null:p.split(" ")},u=function(p,e,O){for(var L in e)p[L]=O},M=function(p,e,O){if(p.getDefaultType){var L=p.getTypeDescriptor(),G={},B=p.getDefaultType(),S=f.merge({},B);u(G,B,"__default");for(var A=0,o=p._jsPlumb.types.length;A<o;A++){var d=p._jsPlumb.types[A];if(d!=="__default"){var l=p._jsPlumb.instance.getType(d,L);if(l!=null){var C=["anchor","anchors","connector","paintStyle","hoverPaintStyle","endpoint","endpoints","connectorOverlays","connectorStyle","connectorHoverStyle","endpointStyle","endpointHoverStyle"],w=[];l.mergeStrategy==="override"?Array.prototype.push.apply(C,["events","overlays","cssClass"]):w.push("cssClass"),S=f.merge(S,l,w,C),u(G,l,d)}}}e&&(S=f.populate(S,e,"_")),p.applyType(S,O,G),O||p.repaint()}},s=$.jsPlumbUIComponent=function(p){f.EventGenerator.apply(this,arguments);var e=this,O=arguments,L=e.idPrefix,G=L+new Date().getTime();this._jsPlumb={instance:p._jsPlumb,parameters:p.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:!1,beforeDetach:p.beforeDetach,beforeDrop:p.beforeDrop,overlayPlacements:[],hoverClass:p.hoverClass||p._jsPlumb.Defaults.HoverClass,types:[],typeCache:{}},this.cacheTypeItem=function(w,h,j){this._jsPlumb.typeCache[j]=this._jsPlumb.typeCache[j]||{},this._jsPlumb.typeCache[j][w]=h},this.getCachedTypeItem=function(w,h){return this._jsPlumb.typeCache[h]?this._jsPlumb.typeCache[h][w]:null},this.getId=function(){return G};var B=p.overlays||[],S={};if(this.defaultOverlayKeys){for(var A=0;A<this.defaultOverlayKeys.length;A++)Array.prototype.push.apply(B,this._jsPlumb.instance.Defaults[this.defaultOverlayKeys[A]]||[]);for(A=0;A<B.length;A++){var o=E.convertToFullOverlaySpec(B[A]);S[o[1].id]=o}}var d={overlays:S,parameters:p.parameters||{},scope:p.scope||this._jsPlumb.instance.getDefaultScope()};if(this.getDefaultType=function(){return d},this.appendToDefaultType=function(w){for(var h in w)d[h]=w[h]},p.events)for(var l in p.events)e.bind(l,p.events[l]);this.clone=function(){var w=Object.create(this.constructor.prototype);return this.constructor.apply(w,O),w}.bind(this),this.isDetachAllowed=function(w){var h=!0;if(this._jsPlumb.beforeDetach)try{h=this._jsPlumb.beforeDetach(w)}catch(j){f.log("jsPlumb: beforeDetach callback failed",j)}return h},this.isDropAllowed=function(w,h,j,g,P,c,_){var R=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:w,targetId:h,scope:j,connection:g,dropEndpoint:P,source:c,target:_});if(this._jsPlumb.beforeDrop)try{R=this._jsPlumb.beforeDrop({sourceId:w,targetId:h,scope:j,connection:g,dropEndpoint:P,source:c,target:_})}catch(U){f.log("jsPlumb: beforeDrop callback failed",U)}return R};var C=[];this.setListenerComponent=function(w){for(var h=0;h<C.length;h++)C[h][3]=w}},i=function(p,e){var O=p._jsPlumb.types[e],L=p._jsPlumb.instance.getType(O,p.getTypeDescriptor());L!=null&&L.cssClass&&p.canvas&&p._jsPlumb.instance.removeClass(p.canvas,L.cssClass)};f.extend($.jsPlumbUIComponent,f.EventGenerator,{getParameter:function(p){return this._jsPlumb.parameters[p]},setParameter:function(p,e){this._jsPlumb.parameters[p]=e},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(p){this._jsPlumb.parameters=p},getClass:function(){return E.getClass(this.canvas)},hasClass:function(p){return E.hasClass(this.canvas,p)},addClass:function(p){E.addClass(this.canvas,p)},removeClass:function(p){E.removeClass(this.canvas,p)},updateClasses:function(p,e){E.updateClasses(this.canvas,p,e)},setType:function(p,e,O){this.clearTypes(),this._jsPlumb.types=Q(p)||[],M(this,e,O)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(p,e){M(this,p,e)},hasType:function(p){return this._jsPlumb.types.indexOf(p)!==-1},addType:function(p,e,O){var L=Q(p),G=!1;if(L!=null){for(var B=0,S=L.length;B<S;B++)this.hasType(L[B])||(this._jsPlumb.types.push(L[B]),G=!0);G&&M(this,e,O)}},removeType:function(p,e,O){var L=Q(p),G=!1,B=function(o){var d=this._jsPlumb.types.indexOf(o);return d!==-1?(i(this,d),this._jsPlumb.types.splice(d,1),!0):!1}.bind(this);if(L!=null){for(var S=0,A=L.length;S<A;S++)G=B(L[S])||G;G&&M(this,e,O)}},clearTypes:function(p,e){for(var O=this._jsPlumb.types.length,L=0;L<O;L++)i(this,0),this._jsPlumb.types.splice(0,1);M(this,p,e)},toggleType:function(p,e,O){var L=Q(p);if(L!=null){for(var G=0,B=L.length;G<B;G++){var S=this._jsPlumb.types.indexOf(L[G]);S!==-1?(i(this,S),this._jsPlumb.types.splice(S,1)):this._jsPlumb.types.push(L[G])}M(this,e,O)}},applyType:function(p,e){if(this.setPaintStyle(p.paintStyle,e),this.setHoverPaintStyle(p.hoverPaintStyle,e),p.parameters)for(var O in p.parameters)this.setParameter(O,p.parameters[O]);this._jsPlumb.paintStyleInUse=this.getPaintStyle()},setPaintStyle:function(p,e){this._jsPlumb.paintStyle=p,this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle,V(this),e||this.repaint()},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(p,e){this._jsPlumb.hoverPaintStyle=p,V(this),e||this.repaint()},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},destroy:function(p){(p||this.typeId==null)&&(this.cleanupListeners(),this.clone=null,this._jsPlumb=null)},isHover:function(){return this._jsPlumb.hover},setHover:function(p,e,O){if(this._jsPlumb&&!this._jsPlumb.instance.currentlyDragging&&!this._jsPlumb.instance.isHoverSuspended()){this._jsPlumb.hover=p;var L=p?"addClass":"removeClass";this.canvas!=null&&(this._jsPlumb.instance.hoverClass!=null&&this._jsPlumb.instance[L](this.canvas,this._jsPlumb.instance.hoverClass),this._jsPlumb.hoverClass!=null&&this._jsPlumb.instance[L](this.canvas,this._jsPlumb.hoverClass)),this._jsPlumb.hoverPaintStyle!=null&&(this._jsPlumb.paintStyleInUse=p?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle,this._jsPlumb.instance.isSuspendDrawing()||(O=O||jsPlumbUtil.uuid(),this.repaint({timestamp:O,recalc:!1}))),this.getAttachedElements&&!e&&K(this,p,jsPlumbUtil.uuid(),this)}}});var b=0,D=function(){var p=b+1;return b++,p},T=$.jsPlumbInstance=function(p){this.version="2.15.6",this.Defaults={Anchor:"Bottom",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:!1,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fill:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},ListStyle:{},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{"stroke-width":4,stroke:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"},p&&E.extend(this.Defaults,p),this.logEnabled=this.Defaults.LogEnabled,this._connectionTypes={},this._endpointTypes={},f.EventGenerator.apply(this);var e=this,O=D(),L=e.bind,G={},B=1,S=function(r){if(r==null)return null;if(r.nodeType===3||r.nodeType===8)return{el:r,text:!0};var x=e.getElement(r);return{el:x,id:f.isString(r)&&x==null?r:lt(x)}};this.getInstanceIndex=function(){return O},this.setZoom=function(r,x){return B=r,e.fire("zoom",B),x&&e.repaintEverything(),!0},this.getZoom=function(){return B};for(var A in this.Defaults)G[A]=this.Defaults[A];var o,d=[];this.unbindContainer=function(){if(o!=null&&d.length>0)for(var r=0;r<d.length;r++)e.off(o,d[r][0],d[r][1])},this.setContainer=function(r){this.unbindContainer(),r=this.getElement(r),this.select().each(function(ct){ct.moveParent(r)}),this.selectEndpoints().each(function(ct){ct.moveParent(r)});var x=o;o=r,d.length=0;for(var y={endpointclick:"endpointClick",endpointdblclick:"endpointDblClick"},k=function(ct,ht,Ct){var mt=ht.srcElement||ht.target,Dt=(mt&&mt.parentNode?mt.parentNode._jsPlumb:null)||(mt?mt._jsPlumb:null)||(mt&&mt.parentNode&&mt.parentNode.parentNode?mt.parentNode.parentNode._jsPlumb:null);if(Dt){Dt.fire(ct,Dt,ht);var At=Ct&&y[Ct+ct]||ct;e.fire(At,Dt.component||Dt,ht)}},H=function(ct,ht,Ct){d.push([ct,Ct]),e.on(o,ct,ht,Ct)},z=function(ct){H(ct,".jtk-connector",function(ht){k(ct,ht)}),H(ct,".jtk-endpoint",function(ht){k(ct,ht,"endpoint")}),H(ct,".jtk-overlay",function(ht){k(ct,ht)})},et=0;et<nt.length;et++)z(nt[et]);for(var ft in g){var at=g[ft].el;at.parentNode===x&&(x.removeChild(at),o.appendChild(at))}},this.getContainer=function(){return o},this.bind=function(r,x){r==="ready"&&C?x():L.apply(e,[r,x])},e.importDefaults=function(r){for(var x in r)e.Defaults[x]=r[x];return r.Container&&e.setContainer(r.Container),e},e.restoreDefaults=function(){return e.Defaults=E.extend({},G),e};var l=null,C=!1,w=[],h={},j={},g={},P={},c={},_=!1,R=[],U=!1,Y=null,n=this.Defaults.Scope,a=1,t=function(){return""+a++},v=function(r,x){o?o.appendChild(r):x?this.getElement(x).appendChild(r):this.appendToRoot(r)}.bind(this),m=function(r,x,y,k){var H={c:[],e:[]};if(!U&&(r=e.getElement(r),r!=null)){var z=lt(r),et=r.querySelectorAll(".jtk-managed");y==null&&(y=jsPlumbUtil.uuid()),jt({elId:z,offset:x,recalc:!1,timestamp:y});for(var ft=0;ft<et.length;ft++)jt({elId:et[ft].getAttribute("id"),recalc:!0,timestamp:y});var at=e.router.redraw(z,x,y,null,k);if(Array.prototype.push.apply(H.c,at.c),Array.prototype.push.apply(H.e,at.e),et)for(var ct=0;ct<et.length;ct++)at=e.router.redraw(et[ct].getAttribute("id"),null,y,null,k,!0),Array.prototype.push.apply(H.c,at.c),Array.prototype.push.apply(H.e,at.e)}return H},I=function(r){return j[r]},F=function(r,x){for(var y=r.scope.split(/\s/),k=x.scope.split(/\s/),H=0;H<y.length;H++)for(var z=0;z<k.length;z++)if(k[z]===y[H])return!0;return!1},X=function(r,x){var y=E.extend({},r);for(var k in x)x[k]&&(y[k]=x[k]);return y},N=function(r,x){var y=E.extend({},r);if(x&&E.extend(y,x),y.source&&(y.source.endpoint?y.sourceEndpoint=y.source:y.source=e.getElement(y.source)),y.target&&(y.target.endpoint?y.targetEndpoint=y.target:y.target=e.getElement(y.target)),r.uuids&&(y.sourceEndpoint=I(r.uuids[0]),y.targetEndpoint=I(r.uuids[1])),y.sourceEndpoint&&y.sourceEndpoint.isFull()){f.log(e,"could not add connection; source endpoint is full");return}if(y.targetEndpoint&&y.targetEndpoint.isFull()){f.log(e,"could not add connection; target endpoint is full");return}if(!y.type&&y.sourceEndpoint&&(y.type=y.sourceEndpoint.connectionType),y.sourceEndpoint&&y.sourceEndpoint.connectorOverlays){y.overlays=y.overlays||[];for(var k=0,H=y.sourceEndpoint.connectorOverlays.length;k<H;k++)y.overlays.push(y.sourceEndpoint.connectorOverlays[k])}y.sourceEndpoint&&y.sourceEndpoint.scope&&(y.scope=y.sourceEndpoint.scope),!y["pointer-events"]&&y.sourceEndpoint&&y.sourceEndpoint.connectorPointerEvents&&(y["pointer-events"]=y.sourceEndpoint.connectorPointerEvents);var z=function(ft,at,ct){var ht=X(at,{anchor:y.anchors?y.anchors[ct]:y.anchor,endpoint:y.endpoints?y.endpoints[ct]:y.endpoint,paintStyle:y.endpointStyles?y.endpointStyles[ct]:y.endpointStyle,hoverPaintStyle:y.endpointHoverStyles?y.endpointHoverStyles[ct]:y.endpointHoverStyle});return e.addEndpoint(ft,ht)},et=function(ft,at,ct,ht){if(y[ft]&&!y[ft].endpoint&&!y[ft+"Endpoint"]&&!y.newConnection){var Ct=lt(y[ft]),mt=ct[Ct];if(mt=mt?mt[ht]:null,mt){if(!mt.enabled)return!1;var Dt=E.extend({},mt.def);delete Dt.label;var At=mt.endpoint!=null&&mt.endpoint._jsPlumb?mt.endpoint:z(y[ft],Dt,at);if(At.isFull())return!1;y[ft+"Endpoint"]=At,!y.scope&&Dt.scope&&(y.scope=Dt.scope),mt.uniqueEndpoint?mt.endpoint?At.finalEndpoint=mt.endpoint:(mt.endpoint=At,At.setDeleteOnEmpty(!1)):At.setDeleteOnEmpty(!0),at===0&&mt.def.connectorOverlays&&(y.overlays=y.overlays||[],Array.prototype.push.apply(y.overlays,mt.def.connectorOverlays))}}};if(et("source",0,this.sourceEndpointDefinitions,y.type||"default")!==!1&&et("target",1,this.targetEndpointDefinitions,y.type||"default")!==!1)return y.sourceEndpoint&&y.targetEndpoint&&(F(y.sourceEndpoint,y.targetEndpoint)||(y=null)),y}.bind(e),W=function(r){var x=e.Defaults.ConnectionType||e.getDefaultConnectionType();r._jsPlumb=e,r.newConnection=W,r.newEndpoint=st,r.endpointsByUUID=j,r.endpointsByElement=h,r.finaliseConnection=ot,r.id="con_"+t();var y=new x(r);return y.isDetachable()&&(y.endpoints[0].initDraggable("_jsPlumbSource"),y.endpoints[1].initDraggable("_jsPlumbTarget")),y},ot=e.finaliseConnection=function(r,x,y,k){if(x=x||{},r.suspendedEndpoint||w.push(r),r.pending=null,r.endpoints[0].isTemporarySource=!1,k!==!1&&e.router.newConnection(r),m(r.source),!x.doNotFireConnectionEvent&&x.fireEvent!==!1){var H={connection:r,source:r.source,target:r.target,sourceId:r.sourceId,targetId:r.targetId,sourceEndpoint:r.endpoints[0],targetEndpoint:r.endpoints[1]};e.fire("connection",H,y)}},st=function(r,x){var y=e.Defaults.EndpointType||E.Endpoint,k=E.extend({},r);k._jsPlumb=e,k.newConnection=W,k.newEndpoint=st,k.endpointsByUUID=j,k.endpointsByElement=h,k.fireDetachEvent=Z,k.elementId=x||lt(k.source);var H=new y(k);return H.id="ep_"+t(),se(k.elementId,k.source),E.headless||e.getDragManager().endpointAdded(k.source,x),H},it=function(r,x,y){var k=h[r];if(k&&k.length)for(var H=0,z=k.length;H<z;H++){for(var et=0,ft=k[H].connections.length;et<ft;et++){var at=x(k[H].connections[et]);if(at)return}y&&y(k[H])}},rt=function(r,x,y){x=x==="block";var k=null;y&&(k=function(z){z.setVisible(x,!0,!0)});var H=S(r);it(H.id,function(z){if(x&&y){var et=z.sourceId===H.id?1:0;z.endpoints[et].isVisible()&&z.setVisible(!0)}else z.setVisible(x)},k)},pt=function(r,x){var y=null;x&&(y=function(k){var H=k.isVisible();k.setVisible(!H)}),it(r,function(k){var H=k.isVisible();k.setVisible(!H)},y)},dt=function(r){var x=P[r];return x?{o:x,s:R[r]}:jt({elId:r})},lt=function(r,x,y){if(f.isString(r))return r;if(r==null)return null;var k=e.getAttribute(r,"id");return(!k||k==="undefined")&&(arguments.length===2&&arguments[1]!==void 0?k=x:(arguments.length===1||arguments.length===3&&!arguments[2])&&(k="jsPlumb_"+O+"_"+t()),y||e.setAttribute(r,"id",k)),k};this.setConnectionBeingDragged=function(r){_=r},this.isConnectionBeingDragged=function(){return _},this.getManagedElements=function(){return g},this.connectorClass="jtk-connector",this.connectorOutlineClass="jtk-connector-outline",this.connectedClass="jtk-connected",this.hoverClass="jtk-hover",this.endpointClass="jtk-endpoint",this.endpointConnectedClass="jtk-endpoint-connected",this.endpointFullClass="jtk-endpoint-full",this.endpointDropAllowedClass="jtk-endpoint-drop-allowed",this.endpointDropForbiddenClass="jtk-endpoint-drop-forbidden",this.overlayClass="jtk-overlay",this.draggingClass="jtk-dragging",this.elementDraggingClass="jtk-element-dragging",this.sourceElementDraggingClass="jtk-source-element-dragging",this.targetElementDraggingClass="jtk-target-element-dragging",this.endpointAnchorClassPrefix="jtk-endpoint-anchor",this.hoverSourceClass="jtk-source-hover",this.hoverTargetClass="jtk-target-hover",this.dragSelectClass="jtk-drag-select",this.Anchors={},this.Connectors={svg:{}},this.Endpoints={svg:{}},this.Overlays={svg:{}},this.ConnectorRenderers={},this.SVG="svg",this.addEndpoint=function(r,x,y){y=y||{};var k=E.extend({},y);E.extend(k,x),k.endpoint=k.endpoint||e.Defaults.Endpoint,k.paintStyle=k.paintStyle||e.Defaults.EndpointStyle;for(var H=[],z=f.isArray(r)||r.length!=null&&!f.isString(r)?r:[r],et=0,ft=z.length;et<ft;et++){k.source=e.getElement(z[et]),ee(k.source);var at=lt(k.source),ct=st(k,at),ht=se(at,k.source,null,!U).info.o;f.addToList(h,at,ct),U||ct.paint({anchorLoc:ct.anchor.compute({xy:[ht.left,ht.top],wh:R[at],element:ct,timestamp:Y,rotation:this.getRotation(at)}),timestamp:Y}),H.push(ct)}return H.length===1?H[0]:H},this.addEndpoints=function(r,x,y){for(var k=[],H=0,z=x.length;H<z;H++){var et=e.addEndpoint(r,x[H],y);f.isArray(et)?Array.prototype.push.apply(k,et):k.push(et)}return k},this.animate=function(r,x,y){if(!this.animationSupported)return!1;y=y||{};var k=e.getElement(r),H=lt(k),z=E.animEvents.step,et=E.animEvents.complete;y[z]=f.wrap(y[z],function(){e.revalidate(H)}),y[et]=f.wrap(y[et],function(){e.revalidate(H)}),e.doAnimate(k,x,y)},this.checkCondition=function(r,x){var y=e.getListener(r),k=!0;if(y&&y.length>0){var H=Array.prototype.slice.call(arguments,1);try{for(var z=0,et=y.length;z<et;z++)k=k&&y[z].apply(y[z],H)}catch(ft){f.log(e,"cannot check condition ["+r+"]"+ft)}}return k},this.connect=function(r,x){var y=N(r,x),k;if(y){if(y.source==null&&y.sourceEndpoint==null){f.log("Cannot establish connection - source does not exist");return}if(y.target==null&&y.targetEndpoint==null){f.log("Cannot establish connection - target does not exist");return}ee(y.source),k=W(y),ot(k,y)}return k};var bt=[{el:"source",elId:"sourceId",epDefs:"sourceEndpointDefinitions"},{el:"target",elId:"targetId",epDefs:"targetEndpointDefinitions"}],gt=function(r,x,y,k){var H,z=bt[y],et=r[z.elId];r[z.el];var ft,at,ct=r.endpoints[y],ht={index:y,originalSourceId:y===0?et:r.sourceId,newSourceId:r.sourceId,originalTargetId:y===1?et:r.targetId,newTargetId:r.targetId,connection:r};if(x.constructor===E.Endpoint)H=x,H.addConnection(r),x=H.element;else if(ft=lt(x),at=this[z.epDefs][ft],ft===r[z.elId])H=null;else if(at)for(var Ct in at){if(!at[Ct].enabled)return;H=at[Ct].endpoint!=null&&at[Ct].endpoint._jsPlumb?at[Ct].endpoint:this.addEndpoint(x,at[Ct].def),at[Ct].uniqueEndpoint&&(at[Ct].endpoint=H),H.addConnection(r)}else H=r.makeEndpoint(y===0,x,ft);return H!=null&&(ct.detachFromConnection(r),r.endpoints[y]=H,r[z.el]=H.element,r[z.elId]=H.elementId,ht[y===0?"newSourceId":"newTargetId"]=H.elementId,q(ht),k||r.repaint()),ht.element=x,ht}.bind(this);this.setSource=function(r,x,y){var k=gt(r,x,0,y);this.router.sourceOrTargetChanged(k.originalSourceId,k.newSourceId,r,k.el,0)},this.setTarget=function(r,x,y){var k=gt(r,x,1,y);this.router.sourceOrTargetChanged(k.originalTargetId,k.newTargetId,r,k.el,1)},this.deleteEndpoint=function(r,x,y){var k=typeof r=="string"?j[r]:r;return k&&e.deleteObject({endpoint:k,dontUpdateHover:x,deleteAttachedObjects:y}),e},this.deleteEveryEndpoint=function(){var r=e.setSuspendDrawing(!0);for(var x in h){var y=h[x];if(y&&y.length)for(var k=0,H=y.length;k<H;k++)e.deleteEndpoint(y[k],!0)}h={},g={},j={},P={},c={},e.router.reset();var z=e.getDragManager();return z&&z.reset(),r||e.setSuspendDrawing(!1),e};var Z=function(r,x,y){var k=e.Defaults.ConnectionType||e.getDefaultConnectionType(),H=r.constructor===k,z=H?{connection:r,source:r.source,target:r.target,sourceId:r.sourceId,targetId:r.targetId,sourceEndpoint:r.endpoints[0],targetEndpoint:r.endpoints[1]}:r;x&&e.fire("connectionDetached",z,y),e.fire("internal.connectionDetached",z,y),e.router.connectionDetached(z)},q=e.fireMoveEvent=function(r,x){e.fire("connectionMoved",r,x)};this.unregisterEndpoint=function(r){r._jsPlumb.uuid&&(j[r._jsPlumb.uuid]=null),e.router.deleteEndpoint(r);for(var x in h){var y=h[x];if(y){for(var k=[],H=0,z=y.length;H<z;H++)y[H]!==r&&k.push(y[H]);h[x]=k}h[x].length<1&&delete h[x]}};var J="isDetachAllowed",ut="beforeDetach",vt="checkCondition";this.deleteConnection=function(r,x){return r!=null&&(x=x||{},x.force||f.functionChain(!0,!1,[[r.endpoints[0],J,[r]],[r.endpoints[1],J,[r]],[r,J,[r]],[e,vt,[ut,r]]]))?(r.setHover(!1),Z(r,!r.pending&&x.fireEvent!==!1,x.originalEvent),r.endpoints[0].detachFromConnection(r),r.endpoints[1].detachFromConnection(r),f.removeWithFunction(w,function(y){return r.id===y.id}),r.cleanup(),r.destroy(),!0):!1},this.deleteEveryConnection=function(r){r=r||{};var x=w.length,y=0;return e.batch(function(){for(var k=0;k<x;k++)y+=e.deleteConnection(w[0],r)?1:0}),y},this.deleteConnectionsForElement=function(r,x){x=x||{},r=e.getElement(r);var y=lt(r),k=h[y];if(k&&k.length)for(var H=0,z=k.length;H<z;H++)k[H].deleteEveryConnection(x);return e},this.deleteObject=function(r){var x={endpoints:{},connections:{},endpointCount:0,connectionCount:0},y=r.deleteAttachedObjects!==!1,k=function(ht){ht!=null&&x.connections[ht.id]==null&&(!r.dontUpdateHover&&ht._jsPlumb!=null&&ht.setHover(!1),x.connections[ht.id]=ht,x.connectionCount++)},H=function(ht){if(ht!=null&&x.endpoints[ht.id]==null&&(!r.dontUpdateHover&&ht._jsPlumb!=null&&ht.setHover(!1),x.endpoints[ht.id]=ht,x.endpointCount++,y))for(var Ct=0;Ct<ht.connections.length;Ct++){var mt=ht.connections[Ct];k(mt)}};r.connection?k(r.connection):H(r.endpoint);for(var z in x.connections){var et=x.connections[z];if(et._jsPlumb){f.removeWithFunction(w,function(ht){return et.id===ht.id}),Z(et,r.fireEvent===!1?!1:!et.pending,r.originalEvent);var ft=r.deleteAttachedObjects==null?null:!r.deleteAttachedObjects;et.endpoints[0].detachFromConnection(et,null,ft),et.endpoints[1].detachFromConnection(et,null,ft),et.cleanup(!0),et.destroy(!0)}}for(var at in x.endpoints){var ct=x.endpoints[at];ct._jsPlumb&&(e.unregisterEndpoint(ct),ct.cleanup(!0),ct.destroy(!0))}return x};var St=function(r,x,y,k){for(var H=0,z=r.length;H<z;H++)r[H][x].apply(r[H],y);return k(r)},Tt=function(r,x,y){for(var k=[],H=0,z=r.length;H<z;H++)k.push([r[H][x].apply(r[H],y),r[H]]);return k},It=function(r,x,y){return function(){return St(r,x,arguments,y)}},Bt=function(r,x){return function(){return Tt(r,x,arguments)}},Gt=function(r,x){var y=[];if(r)if(typeof r=="string"){if(r==="*")return r;y.push(r)}else if(x)y=r;else if(r.length)for(var k=0,H=r.length;k<H;k++)y.push(S(r[k]).id);else y.push(S(r).id);return y},Ht=function(r,x,y){return r==="*"?!0:r.length>0?r.indexOf(x)!==-1:!y};this.getConnections=function(r,x){r?r.constructor===String&&(r={scope:r}):r={};for(var y=r.scope||e.getDefaultScope(),k=Gt(y,!0),H=Gt(r.source),z=Gt(r.target),et=!x&&k.length>1?{}:[],ft=function(Dt,At){if(!x&&k.length>1){var Ot=et[Dt];Ot==null&&(Ot=et[Dt]=[]),Ot.push(At)}else et.push(At)},at=0,ct=w.length;at<ct;at++){var ht=w[at],Ct=ht.proxies&&ht.proxies[0]?ht.proxies[0].originalEp.elementId:ht.sourceId,mt=ht.proxies&&ht.proxies[1]?ht.proxies[1].originalEp.elementId:ht.targetId;Ht(k,ht.scope)&&Ht(H,Ct)&&Ht(z,mt)&&ft(ht.scope,ht)}return et};var le=function(r,x){return function(y){for(var k=0,H=r.length;k<H;k++)y(r[k]);return x(r)}},ue=function(r){return function(x){return r[x]}},he=function(r,x){var y={length:r.length,each:le(r,x),get:ue(r)},k=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],H=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"],z,et;for(z=0,et=k.length;z<et;z++)y[k[z]]=It(r,k[z],x);for(z=0,et=H.length;z<et;z++)y[H[z]]=Bt(r,H[z]);return y},Ut=function(r){var x=he(r,Ut);return E.extend(x,{setDetachable:It(r,"setDetachable",Ut),setReattach:It(r,"setReattach",Ut),setConnector:It(r,"setConnector",Ut),delete:function(){for(var y=0,k=r.length;y<k;y++)e.deleteConnection(r[y])},isDetachable:Bt(r,"isDetachable"),isReattach:Bt(r,"isReattach")})},te=function(r){var x=he(r,te);return E.extend(x,{setEnabled:It(r,"setEnabled",te),setAnchor:It(r,"setAnchor",te),isEnabled:Bt(r,"isEnabled"),deleteEveryConnection:function(){for(var y=0,k=r.length;y<k;y++)r[y].deleteEveryConnection()},delete:function(){for(var y=0,k=r.length;y<k;y++)e.deleteEndpoint(r[y])}})};this.select=function(r){return r=r||{},r.scope=r.scope||"*",Ut(r.connections||e.getConnections(r,!0))},this.selectEndpoints=function(r){r=r||{},r.scope=r.scope||"*";var x=!r.element&&!r.source&&!r.target,y=x?"*":Gt(r.element),k=x?"*":Gt(r.source),H=x?"*":Gt(r.target),z=Gt(r.scope,!0),et=[];for(var ft in h){var at=Ht(y,ft,!0),ct=Ht(k,ft,!0),ht=k!=="*",Ct=Ht(H,ft,!0),mt=H!=="*";if(at||ct||Ct){t:for(var Dt=0,At=h[ft].length;Dt<At;Dt++){var Ot=h[ft][Dt];if(Ht(z,Ot.scope,!0)){var ce=ht&&k.length>0&&!Ot.isSource,fe=mt&&H.length>0&&!Ot.isTarget;if(ce||fe)continue t;et.push(Ot)}}}}return te(et)},this.getAllConnections=function(){return w},this.getDefaultScope=function(){return n},this.getEndpoint=I,this.getEndpoints=function(r){return h[S(r).id]||[]},this.getDefaultEndpointType=function(){return E.Endpoint},this.getDefaultConnectionType=function(){return E.Connection},this.getId=lt,this.draw=m,this.info=S,this.appendElement=v;var Yt=!1;this.isHoverSuspended=function(){return Yt},this.setHoverSuspended=function(r){Yt=r},this.hide=function(r,x){return rt(r,"none",x),e},this.idstamp=t;var ee=function(r){if(!o&&r){var x=e.getElement(r);x.offsetParent&&e.setContainer(x.offsetParent)}},ie=function(){e.Defaults.Container&&e.setContainer(e.Defaults.Container)},se=e.manage=function(r,x,y,k){return g[r]?k&&(g[r].info=jt({elId:r,timestamp:Y,recalc:!0})):(g[r]={el:x,endpoints:[],connections:[],rotation:0},g[r].info=jt({elId:r,timestamp:Y}),e.addClass(x,"jtk-managed"),y||e.fire("manageElement",{id:r,info:g[r].info,el:x})),g[r]};this.unmanage=function(r){if(g[r]){var x=g[r].el;e.removeClass(x,"jtk-managed"),delete g[r],e.fire("unmanageElement",{id:r,el:x})}},this.rotate=function(r,x,y){return g[r]&&(g[r].rotation=x,g[r].el.style.transform="rotate("+x+"deg)",g[r].el.style.transformOrigin="center center",y!==!0)?this.revalidate(r):{c:[],e:[]}},this.getRotation=function(r){return g[r]&&g[r].rotation||0};var jt=function(r){var x=r.timestamp,y=r.recalc,k=r.offset,H=r.elId,z;return U&&!x&&(x=Y),!y&&x&&x===c[H]?{o:r.offset||P[H],s:R[H]}:(y||!k&&P[H]==null?(z=g[H]?g[H].el:null,z!=null&&(R[H]=e.getSize(z),P[H]=e.getOffset(z),c[H]=x)):(P[H]=k||P[H],R[H]==null&&(z=g[H].el,z!=null&&(R[H]=e.getSize(z))),c[H]=x),P[H]&&!P[H].right&&(P[H].right=P[H].left+R[H][0],P[H].bottom=P[H].top+R[H][1],P[H].width=R[H][0],P[H].height=R[H][1],P[H].centerx=P[H].left+P[H].width/2,P[H].centery=P[H].top+P[H].height/2),{o:P[H],s:R[H]})};this.updateOffset=jt,this.init=function(){C||(ie(),e.router=new $.jsPlumb.DefaultRouter(e),e.anchorManager=e.router.anchorManager,C=!0,e.fire("ready",e))}.bind(this),this.log=l,this.jsPlumbUIComponent=s,this.makeAnchor=function(){var r,x=function(et,ft){if($.jsPlumb.Anchors[et])return new $.jsPlumb.Anchors[et](ft);if(!e.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown anchor type '"+et+"'"}};if(arguments.length===0)return null;var y=arguments[0],k=arguments[1],H=null;if(y.compute&&y.getOrientation)return y;if(typeof y=="string")H=x(arguments[0],{elementId:k,jsPlumbInstance:e});else if(f.isArray(y))if(f.isArray(y[0])||f.isString(y[0]))y.length===2&&f.isObject(y[1])?f.isString(y[0])?(r=$.jsPlumb.extend({elementId:k,jsPlumbInstance:e},y[1]),H=x(y[0],r)):(r=$.jsPlumb.extend({elementId:k,jsPlumbInstance:e,anchors:y[0]},y[1]),H=new $.jsPlumb.DynamicAnchor(r)):H=new E.DynamicAnchor({anchors:y,selector:null,elementId:k,jsPlumbInstance:e});else{var z={x:y[0],y:y[1],orientation:y.length>=4?[y[2],y[3]]:[0,0],offsets:y.length>=6?[y[4],y[5]]:[0,0],elementId:k,jsPlumbInstance:e,cssClass:y.length===7?y[6]:null};H=new $.jsPlumb.Anchor(z),H.clone=function(){return new $.jsPlumb.Anchor(z)}}return H.id||(H.id="anchor_"+t()),H},this.makeAnchors=function(r,x,y){for(var k=[],H=0,z=r.length;H<z;H++)typeof r[H]=="string"?k.push($.jsPlumb.Anchors[r[H]]({elementId:x,jsPlumbInstance:y})):f.isArray(r[H])&&k.push(e.makeAnchor(r[H],x,y));return k},this.makeDynamicAnchor=function(r,x){return new $.jsPlumb.DynamicAnchor({anchors:r,selector:x,elementId:null,jsPlumbInstance:e})},this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={};var Xt=function(r,x,y,k,H){for(var z=r.target||r.srcElement,et=!1,ft=k.getSelector(x,y),at=0;at<ft.length;at++)if(ft[at]===z){et=!0;break}return H?!et:et},Mt=function(r,x,y,k,H){var z=new s(x),et=x._jsPlumb.EndpointDropHandler({jsPlumb:e,enabled:function(){return r.def.enabled},isFull:function(){var at=e.select({target:r.id}).length;return r.def.maxConnections>0&&at>=r.def.maxConnections},element:r.el,elementId:r.id,isSource:k,isTarget:H,addClass:function(at){e.addClass(r.el,at)},removeClass:function(at){e.removeClass(r.el,at)},onDrop:function(at){var ct=at.endpoints[0];ct.anchor.locked=!1},isDropAllowed:function(){return z.isDropAllowed.apply(z,arguments)},isRedrop:function(at){return at.suspendedElement!=null&&at.suspendedEndpoint!=null&&at.suspendedEndpoint.element===r.el},getEndpoint:function(at){var ct=r.def.endpoint;if(ct==null||ct._jsPlumb==null){var ht=e.deriveEndpointAndAnchorSpec(at.getType().join(" "),!0),Ct=ht.endpoints?$.jsPlumb.extend(x,{endpoint:r.def.def.endpoint||ht.endpoints[1]}):x;ht.anchors&&(Ct=$.jsPlumb.extend(Ct,{anchor:r.def.def.anchor||ht.anchors[1]})),ct=e.addEndpoint(r.el,Ct),ct._mtNew=!0}if(x.uniqueEndpoint&&(r.def.endpoint=ct),ct.setDeleteOnEmpty(!0),at.isDetachable()&&ct.initDraggable(),ct.anchor.positionFinder!=null){var mt=e.getUIPosition(arguments,e.getZoom()),Dt=e.getOffset(r.el),At=e.getSize(r.el),Ot=mt==null?[0,0]:ct.anchor.positionFinder(mt,Dt,At,ct.anchor.constructorParams);ct.anchor.x=Ot[0],ct.anchor.y=Ot[1]}return ct},maybeCleanup:function(at){at._mtNew&&at.connections.length===0?e.deleteObject({endpoint:at}):delete at._mtNew}}),ft=$.jsPlumb.dragEvents.drop;return y.scope=y.scope||x.scope||e.Defaults.Scope,y[ft]=f.wrap(y[ft],et,!0),y.rank=x.rank||0,H&&(y[$.jsPlumb.dragEvents.over]=function(){return!0}),x.allowLoopback===!1&&(y.canDrop=function(at){var ct=at.getDragElement()._jsPlumbRelatedElement;return ct!==r.el}),e.initDroppable(r.el,y,"internal"),et};this.makeTarget=function(r,x,y){var k=$.jsPlumb.extend({_jsPlumb:this},y);$.jsPlumb.extend(k,x);for(var H=k.maxConnections||-1,z=function(ct){var ht=S(ct),Ct=ht.id,mt=$.jsPlumb.extend({},k.dropOptions||{}),Dt=k.connectionType||"default";this.targetEndpointDefinitions[Ct]=this.targetEndpointDefinitions[Ct]||{},ee(Ct),ht.el._isJsPlumbGroup&&mt.rank==null&&(mt.rank=-1);var At={def:$.jsPlumb.extend({},k),uniqueEndpoint:k.uniqueEndpoint,maxConnections:H,enabled:!0};k.createEndpoint&&(At.uniqueEndpoint=!0,At.endpoint=e.addEndpoint(ct,At.def),At.endpoint.setDeleteOnEmpty(!1)),ht.def=At,this.targetEndpointDefinitions[Ct][Dt]=At,Mt(ht,k,mt,k.isSource===!0,!0),ht.el._katavorioDrop[ht.el._katavorioDrop.length-1].targetDef=At}.bind(this),et=r.length&&r.constructor!==String?r:[r],ft=0,at=et.length;ft<at;ft++)z(et[ft]);return this},this.unmakeTarget=function(r,x){var y=S(r);return e.destroyDroppable(y.el,"internal"),x||delete this.targetEndpointDefinitions[y.id],this},this.makeSource=function(r,x,y){var k=$.jsPlumb.extend({_jsPlumb:this},y);$.jsPlumb.extend(k,x);var H=k.connectionType||"default",z=e.deriveEndpointAndAnchorSpec(H);k.endpoint=k.endpoint||z.endpoints[0],k.anchor=k.anchor||z.anchors[0];for(var et=k.maxConnections||-1,ft=k.onMaxConnections,at=function(mt){var Dt=mt.id,At=this.getElement(mt.el);this.sourceEndpointDefinitions[Dt]=this.sourceEndpointDefinitions[Dt]||{},ee(Dt);var Ot={def:$.jsPlumb.extend({},k),uniqueEndpoint:k.uniqueEndpoint,maxConnections:et,enabled:!0};k.createEndpoint&&(Ot.uniqueEndpoint=!0,Ot.endpoint=e.addEndpoint(r,Ot.def),Ot.endpoint.setDeleteOnEmpty(!1)),this.sourceEndpointDefinitions[Dt][H]=Ot,mt.def=Ot;var ce=$.jsPlumb.dragEvents.stop,fe=$.jsPlumb.dragEvents.drag,zt=$.jsPlumb.extend({},k.dragOptions||{}),De=zt.drag,Se=zt.stop,Lt=null,de=!1;zt.scope=zt.scope||k.scope,zt[fe]=f.wrap(zt[fe],function(){De&&De.apply(this,arguments),de=!1}),zt[ce]=f.wrap(zt[ce],function(){if(Se&&Se.apply(this,arguments),this.currentlyDragging=!1,Lt._jsPlumb!=null){var Rt=k.anchor||this.Defaults.Anchor,Ft=Lt.anchor,pe=Lt.connections[0],Kt=this.makeAnchor(Rt,Dt,this),re=Lt.element;if(Kt.positionFinder!=null){var Wt=e.getOffset(re),Zt=this.getSize(re),ge={left:Wt.left+Ft.x*Zt[0],top:Wt.top+Ft.y*Zt[1]},oe=Kt.positionFinder(ge,Wt,Zt,Kt.constructorParams);Kt.x=oe[0],Kt.y=oe[1]}Lt.setAnchor(Kt,!0),Lt.repaint(),this.repaint(Lt.elementId),pe!=null&&this.repaint(pe.targetId)}}.bind(this));var xe=function(Rt){if(!(Rt.which===3||Rt.button===2)){Dt=this.getId(this.getElement(mt.el));var Ft=this.sourceEndpointDefinitions[Dt][H];if(!!Ft.enabled){if(k.filter){var pe=f.isString(k.filter)?Xt(Rt,mt.el,k.filter,this,k.filterExclude):k.filter(Rt,mt.el);if(pe===!1)return}var Kt=this.select({source:Dt}).length;if(Ft.maxConnections>=0&&Kt>=Ft.maxConnections)return ft&&ft({element:mt.el,maxConnections:et},Rt),!1;var re=$.jsPlumb.getPositionOnElement(Rt,At,B),Wt={};$.jsPlumb.extend(Wt,Ft.def),Wt.isTemporarySource=!0,Wt.anchor=[re[0],re[1],0,0],Wt.dragOptions=zt,Ft.def.scope&&(Wt.scope=Ft.def.scope),Lt=this.addEndpoint(Dt,Wt),de=!0,Lt.setDeleteOnEmpty(!0),Ft.uniqueEndpoint&&(Ft.endpoint?Lt.finalEndpoint=Ft.endpoint:(Ft.endpoint=Lt,Lt.setDeleteOnEmpty(!1)));var Zt=function(){e.off(Lt.canvas,"mouseup",Zt),e.off(mt.el,"mouseup",Zt),de&&(de=!1,e.deleteEndpoint(Lt))};e.on(Lt.canvas,"mouseup",Zt),e.on(mt.el,"mouseup",Zt);var ge={};if(Ft.def.extract)for(var oe in Ft.def.extract){var we=(Rt.srcElement||Rt.target).getAttribute(oe);we&&(ge[Ft.def.extract[oe]]=we)}e.trigger(Lt.canvas,"mousedown",Rt,ge),f.consume(Rt)}}}.bind(this);this.on(mt.el,"mousedown",xe),Ot.trigger=xe,k.filter&&(f.isString(k.filter)||f.isFunction(k.filter))&&e.setDragFilter(mt.el,k.filter);var Me=$.jsPlumb.extend({},k.dropOptions||{});Mt(mt,k,Me,!0,k.isTarget===!0)}.bind(this),ct=r.length&&r.constructor!==String?r:[r],ht=0,Ct=ct.length;ht<Ct;ht++)at(S(ct[ht]));return this},this.unmakeSource=function(r,x,y){var k=S(r);e.destroyDroppable(k.el,"internal");var H=this.sourceEndpointDefinitions[k.id];if(H){for(var z in H)if(x==null||x===z){var et=H[z].trigger;et&&e.off(k.el,"mousedown",et),y||delete this.sourceEndpointDefinitions[k.id][z]}}return this},this.unmakeEverySource=function(){for(var r in this.sourceEndpointDefinitions)e.unmakeSource(r,null,!0);return this.sourceEndpointDefinitions={},this};var Vt=function(r,x,y){x=f.isArray(x)?x:[x];var k=lt(r);y=y||"default";for(var H=0;H<x.length;H++){var z=this[x[H]][k];if(z&&z[y])return z[y].def.scope||this.Defaults.Scope}}.bind(this),$t=function(r,x,y,k){y=f.isArray(y)?y:[y];var H=lt(r);k=k||"default";for(var z=0;z<y.length;z++){var et=this[y[z]][H];et&&et[k]&&(et[k].def.scope=x)}}.bind(this);this.getScope=function(r,x){return Vt(r,["sourceEndpointDefinitions","targetEndpointDefinitions"])},this.getSourceScope=function(r){return Vt(r,"sourceEndpointDefinitions")},this.getTargetScope=function(r){return Vt(r,"targetEndpointDefinitions")},this.setScope=function(r,x,y){this.setSourceScope(r,x,y),this.setTargetScope(r,x,y)},this.setSourceScope=function(r,x,y){$t(r,x,"sourceEndpointDefinitions",y),this.setDragScope(r,x)},this.setTargetScope=function(r,x,y){$t(r,x,"targetEndpointDefinitions",y),this.setDropScope(r,x)},this.unmakeEveryTarget=function(){for(var r in this.targetEndpointDefinitions)e.unmakeTarget(r,!0);return this.targetEndpointDefinitions={},this};var tt=function(r,x,y,k,H){var z=r==="source"?this.sourceEndpointDefinitions:this.targetEndpointDefinitions,et,ft,at;if(H=H||"default",x.length&&!f.isString(x)){et=[];for(var ct=0,ht=x.length;ct<ht;ct++)ft=S(x[ct]),z[ft.id]&&z[ft.id][H]&&(et[ct]=z[ft.id][H].enabled,at=k?!et[ct]:y,z[ft.id][H].enabled=at,e[at?"removeClass":"addClass"](ft.el,"jtk-"+r+"-disabled"))}else{ft=S(x);var Ct=ft.id;z[Ct]&&z[Ct][H]&&(et=z[Ct][H].enabled,at=k?!et:y,z[Ct][H].enabled=at,e[at?"removeClass":"addClass"](ft.el,"jtk-"+r+"-disabled"))}return et}.bind(this),_t=function(r,x){if(r!=null){if(f.isString(r)||!r.length)return x.apply(this,[r]);if(r.length)return x.apply(this,[r[0]])}}.bind(this);this.toggleSourceEnabled=function(r,x){return tt("source",r,null,!0,x),this.isSourceEnabled(r,x)},this.setSourceEnabled=function(r,x,y){return tt("source",r,x,null,y)},this.isSource=function(r,x){return x=x||"default",_t(r,function(y){var k=this.sourceEndpointDefinitions[S(y).id];return k!=null&&k[x]!=null}.bind(this))},this.isSourceEnabled=function(r,x){return x=x||"default",_t(r,function(y){var k=this.sourceEndpointDefinitions[S(y).id];return k&&k[x]&&k[x].enabled===!0}.bind(this))},this.toggleTargetEnabled=function(r,x){return tt("target",r,null,!0,x),this.isTargetEnabled(r,x)},this.isTarget=function(r,x){return x=x||"default",_t(r,function(y){var k=this.targetEndpointDefinitions[S(y).id];return k!=null&&k[x]!=null}.bind(this))},this.isTargetEnabled=function(r,x){return x=x||"default",_t(r,function(y){var k=this.targetEndpointDefinitions[S(y).id];return k&&k[x]&&k[x].enabled===!0}.bind(this))},this.setTargetEnabled=function(r,x,y){return tt("target",r,x,null,y)},this.ready=function(r){e.bind("ready",r)};var Pt=function(r,x){if(typeof r=="object"&&r.length)for(var y=0,k=r.length;y<k;y++)x(r[y]);else x(r);return e};this.repaint=function(r,x,y){return Pt(r,function(k){m(k,x,y)})},this.revalidate=function(r,x,y){var k=y?r:e.getId(r);e.updateOffset({elId:k,recalc:!0,timestamp:x});var H=e.getDragManager();return H&&H.updateOffsets(k),m(r,null,x)},this.repaintEverything=function(){var r=jsPlumbUtil.uuid(),x;for(x in h)e.updateOffset({elId:x,recalc:!0,timestamp:r});for(x in h)m(x,null,r);return this},this.removeAllEndpoints=function(r,x,y){y=y||[];var k=function(H){var z=S(H),et=h[z.id],ft,at;if(et)for(y.push(z),ft=0,at=et.length;ft<at;ft++)e.deleteEndpoint(et[ft],!1);if(delete h[z.id],x&&z.el&&z.el.nodeType!==3&&z.el.nodeType!==8)for(ft=0,at=z.el.childNodes.length;ft<at;ft++)k(z.el.childNodes[ft])};return k(r),this};var yt=function(r,x){e.removeAllEndpoints(r.id,!0,x);for(var y=e.getDragManager(),k=function(z){y&&y.elementRemoved(z.id),e.router.elementRemoved(z.id),e.isSource(z.el)&&e.unmakeSource(z.el),e.isTarget(z.el)&&e.unmakeTarget(z.el),e.destroyDraggable(z.el),e.destroyDroppable(z.el),delete e.floatingConnections[z.id],delete g[z.id],delete P[z.id],z.el&&(e.removeElement(z.el),z.el._jsPlumb=null)},H=1;H<x.length;H++)k(x[H]);k(r)};this.remove=function(r,x){var y=S(r),k=[];return y.text&&y.el.parentNode?y.el.parentNode.removeChild(y.el):y.id&&e.batch(function(){yt(y,k)},x===!0),e},this.empty=function(r,x){var y=[],k=function(H,z){var et=S(H);if(et.text)et.el.parentNode.removeChild(et.el);else if(et.el){for(;et.el.childNodes.length>0;)k(et.el.childNodes[0]);z||yt(et,y)}};return e.batch(function(){k(r,!0)},x===!1),e},this.reset=function(r){e.silently(function(){Yt=!1,e.removeAllGroups(),e.removeGroupManager(),e.deleteEveryEndpoint(),r||e.unbind(),this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={},w.length=0,this.doReset&&this.doReset()}.bind(this))},this.destroy=function(){this.reset(),o=null,d=null};var Et=function(r){r.canvas&&r.canvas.parentNode&&r.canvas.parentNode.removeChild(r.canvas),r.cleanup(),r.destroy()};this.clear=function(){e.select().each(Et),e.selectEndpoints().each(Et),h={},j={}},this.setDefaultScope=function(r){return n=r,e},this.deriveEndpointAndAnchorSpec=function(r,x){for(var y=((x?"":"default ")+r).split(/[\s]/),k=null,H=null,z=null,et=null,ft=0;ft<y.length;ft++){var at=e.getType(y[ft],"connection");at&&(at.endpoints&&(k=at.endpoints),at.endpoint&&(H=at.endpoint),at.anchors&&(et=at.anchors),at.anchor&&(z=at.anchor))}return{endpoints:k||[H,H],anchors:et||[z,z]}},this.setId=function(r,x,y){var k;f.isString(r)?k=r:(r=this.getElement(r),k=this.getId(r));var H=this.getConnections({source:k,scope:"*"},!0),z=this.getConnections({target:k,scope:"*"},!0);x=""+x,y?r=this.getElement(x):(r=this.getElement(k),this.setAttribute(r,"id",x)),h[x]=h[k]||[];for(var et=0,ft=h[x].length;et<ft;et++)h[x][et].setElementId(x),h[x][et].setReferenceElement(r);delete h[k],this.sourceEndpointDefinitions[x]=this.sourceEndpointDefinitions[k],delete this.sourceEndpointDefinitions[k],this.targetEndpointDefinitions[x]=this.targetEndpointDefinitions[k],delete this.targetEndpointDefinitions[k],this.router.changeId(k,x);var at=this.getDragManager();at&&at.changeId(k,x),g[x]=g[k],delete g[k];var ct=function(ht,Ct,mt){for(var Dt=0,At=ht.length;Dt<At;Dt++)ht[Dt].endpoints[Ct].setElementId(x),ht[Dt].endpoints[Ct].setReferenceElement(r),ht[Dt][mt+"Id"]=x,ht[Dt][mt]=r};ct(H,0,"source"),ct(z,1,"target"),this.repaint(x)},this.setDebugLog=function(r){l=r},this.setSuspendDrawing=function(r,x){var y=U;return U=r,r?Y=new Date().getTime():Y=null,x&&this.repaintEverything(),y},this.isSuspendDrawing=function(){return U},this.getSuspendedAt=function(){return Y},this.batch=function(r,x){var y=this.isSuspendDrawing();y||this.setSuspendDrawing(!0);try{r()}catch(k){f.log("Function run while suspended failed",k)}y||this.setSuspendDrawing(!1,!x)},this.doWhileSuspended=this.batch,this.getCachedData=dt,this.show=function(r,x){return rt(r,"block",x),e},this.toggleVisible=pt,this.addListener=this.bind;var wt=[];this.registerFloatingConnection=function(r,x,y){wt[r.id]=x,f.addToList(h,r.id,y)},this.getFloatingConnectionFor=function(r){return wt[r]},this.listManager=new $.jsPlumbListManager(this,this.Defaults.ListStyle)};f.extend($.jsPlumbInstance,f.EventGenerator,{setAttribute:function(p,e,O){this.setAttribute(p,e,O)},getAttribute:function(p,e){return this.getAttribute($.jsPlumb.getElement(p),e)},convertToFullOverlaySpec:function(p){return f.isString(p)&&(p=[p,{}]),p[1].id=p[1].id||f.uuid(),p},registerConnectionType:function(p,e){if(this._connectionTypes[p]=$.jsPlumb.extend({},e),e.overlays){for(var O={},L=0;L<e.overlays.length;L++){var G=this.convertToFullOverlaySpec(e.overlays[L]);O[G[1].id]=G}this._connectionTypes[p].overlays=O}},registerConnectionTypes:function(p){for(var e in p)this.registerConnectionType(e,p[e])},registerEndpointType:function(p,e){if(this._endpointTypes[p]=$.jsPlumb.extend({},e),e.overlays){for(var O={},L=0;L<e.overlays.length;L++){var G=this.convertToFullOverlaySpec(e.overlays[L]);O[G[1].id]=G}this._endpointTypes[p].overlays=O}},registerEndpointTypes:function(p){for(var e in p)this.registerEndpointType(e,p[e])},getType:function(p,e){return e==="connection"?this._connectionTypes[p]:this._endpointTypes[p]},setIdChanged:function(p,e){this.setId(p,e,!0)},setParent:function(p,e){var O=this.getElement(p),L=this.getId(O),G=this.getElement(e),B=this.getId(G),S=this.getDragManager();O.parentNode.removeChild(O),G.appendChild(O),S&&S.setParent(O,L,G,B)},extend:function(p,e,O){var L;if(O)for(L=0;L<O.length;L++)p[O[L]]=e[O[L]];else for(L in e)p[L]=e[L];return p},floatingConnections:{},getFloatingAnchorIndex:function(p){return p.endpoints[0].isFloating()?0:p.endpoints[1].isFloating()?1:-1},proxyConnection:function(p,e,O,L,G,B){var S,A=p.endpoints[e].elementId,o=p.endpoints[e];p.proxies=p.proxies||[],p.proxies[e]?S=p.proxies[e].ep:S=this.addEndpoint(O,{endpoint:G(p,e),anchor:B(p,e),parameters:{isProxyEndpoint:!0}}),S.setDeleteOnEmpty(!0),p.proxies[e]={ep:S,originalEp:o},e===0?this.router.sourceOrTargetChanged(A,L,p,O,0):this.router.sourceOrTargetChanged(A,L,p,O,1),o.detachFromConnection(p,null,!0),S.connections=[p],p.endpoints[e]=S,o.setVisible(!1),p.setVisible(!0),this.revalidate(O)},unproxyConnection:function(p,e,O){if(!(p._jsPlumb==null||p.proxies==null||p.proxies[e]==null)){var L=p.proxies[e].originalEp.element,G=p.proxies[e].originalEp.elementId;p.endpoints[e]=p.proxies[e].originalEp,e===0?this.router.sourceOrTargetChanged(O,G,p,L,0):this.router.sourceOrTargetChanged(O,G,p,L,1),p.proxies[e].ep.detachFromConnection(p,null),p.proxies[e].originalEp.addConnection(p),p.isVisible()&&p.proxies[e].originalEp.setVisible(!0),delete p.proxies[e]}}});var E=new T;$.jsPlumb=E,E.getInstance=function(p,e){var O=new T(p);if(e)for(var L in e)O[L]=e[L];return O.init(),O},E.each=function(p,e){if(p!=null)if(typeof p=="string")e(E.getElement(p));else if(p.length!=null)for(var O=0;O<p.length;O++)e(E.getElement(p[O]));else e(p)},xt.jsPlumb=E}.call(typeof window!="undefined"?window:kt),function(){var $=this,f=$.jsPlumb,V=$.jsPlumbUtil,nt="__label",K=function(u,M){var s={cssClass:M.cssClass,labelStyle:u.labelStyle,id:nt,component:u,_jsPlumb:u._jsPlumb.instance},i=f.extend(s,M);return new f.Overlays[u._jsPlumb.instance.getRenderMode()].Label(i)},Q=function(u,M){var s=null;if(V.isArray(M)){var i=M[0],b=f.extend({component:u,_jsPlumb:u._jsPlumb.instance},M[1]);M.length===3&&f.extend(b,M[2]),s=new f.Overlays[u._jsPlumb.instance.getRenderMode()][i](b)}else M.constructor===String?s=new f.Overlays[u._jsPlumb.instance.getRenderMode()][M]({component:u,_jsPlumb:u._jsPlumb.instance}):s=M;return s.id=s.id||V.uuid(),u.cacheTypeItem("overlay",s,s.id),u._jsPlumb.overlays[s.id]=s,s};f.OverlayCapableJsPlumbUIComponent=function(u){$.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.overlays={},this._jsPlumb.overlayPositions={},u.label&&(this.getDefaultType().overlays[nt]=["Label",{label:u.label,location:u.labelLocation||this.defaultLabelLocation||.5,labelStyle:u.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle,id:nt}]),this.setListenerComponent=function(M){if(this._jsPlumb)for(var s in this._jsPlumb.overlays)this._jsPlumb.overlays[s].setListenerComponent(M)}},f.OverlayCapableJsPlumbUIComponent.applyType=function(u,M){if(M.overlays){var s={},i;for(i in M.overlays){var b=u._jsPlumb.overlays[M.overlays[i][1].id];if(b)b.updateFrom(M.overlays[i][1]),s[M.overlays[i][1].id]=!0,b.reattach(u._jsPlumb.instance,u);else{var D=u.getCachedTypeItem("overlay",M.overlays[i][1].id);D!=null?(D.reattach(u._jsPlumb.instance,u),D.setVisible(!0),D.updateFrom(M.overlays[i][1]),u._jsPlumb.overlays[D.id]=D):D=u.addOverlay(M.overlays[i],!0),s[D.id]=!0}}for(i in u._jsPlumb.overlays)s[u._jsPlumb.overlays[i].id]==null&&u.removeOverlay(u._jsPlumb.overlays[i].id,!0)}},V.extend(f.OverlayCapableJsPlumbUIComponent,$.jsPlumbUIComponent,{setHover:function(u,M){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged())for(var s in this._jsPlumb.overlays)this._jsPlumb.overlays[s][u?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)},addOverlay:function(u,M){var s=Q(this,u);if(this.getData&&s.type==="Label"&&V.isArray(u)){var i=this.getData(),b=u[1];if(i){var D=b.labelLocationAttribute||"labelLocation",T=i?i[D]:null;T&&(s.loc=T)}}return M||this.repaint(),s},getOverlay:function(u){return this._jsPlumb.overlays[u]},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(u){var M=this.getOverlay(u);M&&M.hide()},hideOverlays:function(){for(var u in this._jsPlumb.overlays)this._jsPlumb.overlays[u].hide()},showOverlay:function(u){var M=this.getOverlay(u);M&&M.show()},showOverlays:function(){for(var u in this._jsPlumb.overlays)this._jsPlumb.overlays[u].show()},removeAllOverlays:function(u){for(var M in this._jsPlumb.overlays)this._jsPlumb.overlays[M].cleanup&&this._jsPlumb.overlays[M].cleanup();this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null,this._jsPlumb.overlayPlacements={},u||this.repaint()},removeOverlay:function(u,M){var s=this._jsPlumb.overlays[u];s&&(s.setVisible(!1),!M&&s.cleanup&&s.cleanup(),delete this._jsPlumb.overlays[u],this._jsPlumb.overlayPositions&&delete this._jsPlumb.overlayPositions[u],this._jsPlumb.overlayPlacements&&delete this._jsPlumb.overlayPlacements[u])},removeOverlays:function(){for(var u=0,M=arguments.length;u<M;u++)this.removeOverlay(arguments[u])},moveParent:function(u){if(this.bgCanvas&&(this.bgCanvas.parentNode.removeChild(this.bgCanvas),u.appendChild(this.bgCanvas)),this.canvas&&this.canvas.parentNode){this.canvas.parentNode.removeChild(this.canvas),u.appendChild(this.canvas);for(var M in this._jsPlumb.overlays)if(this._jsPlumb.overlays[M].isAppendedAtTopLevel){var s=this._jsPlumb.overlays[M].getElement();s.parentNode.removeChild(s),u.appendChild(s)}}},getLabel:function(){var u=this.getOverlay(nt);return u!=null?u.getLabel():null},getLabelOverlay:function(){return this.getOverlay(nt)},setLabel:function(u){var M=this.getOverlay(nt);if(M)u.constructor===String||u.constructor===Function?M.setLabel(u):(u.label&&M.setLabel(u.label),u.location&&M.setLocation(u.location));else{var s=u.constructor===String||u.constructor===Function?{label:u}:u;M=K(this,s),this._jsPlumb.overlays[nt]=M}this._jsPlumb.instance.isSuspendDrawing()||this.repaint()},cleanup:function(u){for(var M in this._jsPlumb.overlays)this._jsPlumb.overlays[M].cleanup(u),this._jsPlumb.overlays[M].destroy(u);u&&(this._jsPlumb.overlays={},this._jsPlumb.overlayPositions=null)},setVisible:function(u){this[u?"showOverlays":"hideOverlays"]()},setAbsoluteOverlayPosition:function(u,M){this._jsPlumb.overlayPositions[u.id]=M},getAbsoluteOverlayPosition:function(u){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[u.id]:null},_clazzManip:function(u,M,s){if(!s)for(var i in this._jsPlumb.overlays)this._jsPlumb.overlays[i][u+"Class"](M)},addClass:function(u,M){this._clazzManip("add",u,M)},removeClass:function(u,M){this._clazzManip("remove",u,M)}})}.call(typeof window!="undefined"?window:kt),function(){var $=this,f=$.jsPlumb,V=$.jsPlumbUtil,nt=function(s,i,b){var D=!1;return{drag:function(){if(D)return D=!1,!0;if(i.element){var T=b.getUIPosition(arguments,b.getZoom());T!=null&&b.setPosition(i.element,T),b.repaint(i.element,T),s.paint({anchorPoint:s.anchor.getCurrentLocation({element:s})})}},stopDrag:function(){D=!0}}},K=function(s,i,b,D){var T=i.createElement("div",{position:"absolute"});i.appendElement(T);var E=i.getId(T);i.setPosition(T,b),T.style.width=D[0]+"px",T.style.height=D[1]+"px",i.manage(E,T,!0),s.id=E,s.element=T},Q=function(s,i,b,D,T,E,p,e){var O=new f.FloatingAnchor({reference:i,referenceCanvas:D,jsPlumbInstance:E});return p({paintStyle:s,endpoint:b,anchor:O,source:T,scope:e})},u=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"],M=function(s,i){var b=0;if(i!=null){for(var D=0;D<s.connections.length;D++)if(s.connections[D].sourceId===i||s.connections[D].targetId===i){b=D;break}}return s.connections[b]};f.Endpoint=function(s){var i=s._jsPlumb,b=s.newConnection,D=s.newEndpoint;this.idPrefix="_jsplumb_e_",this.defaultLabelLocation=[.5,.5],this.defaultOverlayKeys=["Overlays","EndpointOverlays"],f.OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.appendToDefaultType({connectionType:s.connectionType,maxConnections:s.maxConnections==null?this._jsPlumb.instance.Defaults.MaxConnections:s.maxConnections,paintStyle:s.endpointStyle||s.paintStyle||s.style||this._jsPlumb.instance.Defaults.EndpointStyle||f.Defaults.EndpointStyle,hoverPaintStyle:s.endpointHoverStyle||s.hoverPaintStyle||this._jsPlumb.instance.Defaults.EndpointHoverStyle||f.Defaults.EndpointHoverStyle,connectorStyle:s.connectorStyle,connectorHoverStyle:s.connectorHoverStyle,connectorClass:s.connectorClass,connectorHoverClass:s.connectorHoverClass,connectorOverlays:s.connectorOverlays,connector:s.connector,connectorTooltip:s.connectorTooltip}),this._jsPlumb.enabled=s.enabled!==!1,this._jsPlumb.visible=!0,this.element=f.getElement(s.source),this._jsPlumb.uuid=s.uuid,this._jsPlumb.floatingEndpoint=null,this._jsPlumb.uuid&&(s.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=s.elementId,this.dragProxy=s.dragProxy,this._jsPlumb.connectionCost=s.connectionCost,this._jsPlumb.connectionsDirected=s.connectionsDirected,this._jsPlumb.currentAnchorClass="",this._jsPlumb.events={};var T=s.deleteOnEmpty===!0;this.setDeleteOnEmpty=function(S){T=S};var E=function(){var S=i.endpointAnchorClassPrefix+"-"+this._jsPlumb.currentAnchorClass;this._jsPlumb.currentAnchorClass=this.anchor.getCssClass();var A=i.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");this.removeClass(S),this.addClass(A),f.updateClasses(this.element,A,S)}.bind(this);this.prepareAnchor=function(S){var A=this._jsPlumb.instance.makeAnchor(S,this.elementId,i);return A.bind("anchorChanged",function(o){this.fire("anchorChanged",{endpoint:this,anchor:o}),E()}.bind(this)),A},this.setPreparedAnchor=function(S,A){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=S,E(),A||this._jsPlumb.instance.repaint(this.elementId),this},this.setAnchor=function(S,A){var o=this.prepareAnchor(S);return this.setPreparedAnchor(o,A),this};var p=function(S){if(this.connections.length>0)for(var A=0;A<this.connections.length;A++)this.connections[A].setHover(S,!1);else this.setHover(S)}.bind(this);this.bind("mouseover",function(){p(!0)}),this.bind("mouseout",function(){p(!1)}),s._transient||this._jsPlumb.instance.router.addEndpoint(this,this.elementId),this.prepareEndpoint=function(S,A){var o=function(C,w){var h=i.getRenderMode();if(f.Endpoints[h][C])return new f.Endpoints[h][C](w);if(!i.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown endpoint type '"+C+"'"}},d={_jsPlumb:this._jsPlumb.instance,cssClass:s.cssClass,container:s.container,tooltip:s.tooltip,connectorTooltip:s.connectorTooltip,endpoint:this},l;return V.isString(S)?l=o(S,d):V.isArray(S)?(d=V.merge(S[1],d),l=o(S[0],d)):l=S.clone(),l.clone=function(){if(V.isString(S))return o(S,d);if(V.isArray(S))return d=V.merge(S[1],d),o(S[0],d)}.bind(this),l.typeId=A,l},this.setEndpoint=function(S,A){var o=this.prepareEndpoint(S);this.setPreparedEndpoint(o,!0)},this.setPreparedEndpoint=function(S,A){this.endpoint!=null&&(this.endpoint.cleanup(),this.endpoint.destroy()),this.endpoint=S,this.type=this.endpoint.type,this.canvas=this.endpoint.canvas},f.extend(this,s,u),this.isSource=s.isSource||!1,this.isTemporarySource=s.isTemporarySource||!1,this.isTarget=s.isTarget||!1,this.connections=s.connections||[],this.connectorPointerEvents=s["connector-pointer-events"],this.scope=s.scope||i.getDefaultScope(),this.timestamp=null,this.reattachConnections=s.reattach||i.Defaults.ReattachConnections,this.connectionsDetachable=i.Defaults.ConnectionsDetachable,(s.connectionsDetachable===!1||s.detachable===!1)&&(this.connectionsDetachable=!1),this.dragAllowedWhenFull=s.dragAllowedWhenFull!==!1,s.onMaxConnections&&this.bind("maxConnections",s.onMaxConnections),this.addConnection=function(S){this.connections.push(S),this[(this.connections.length>0?"add":"remove")+"Class"](i.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](i.endpointFullClass)},this.detachFromConnection=function(S,A,o){A=A==null?this.connections.indexOf(S):A,A>=0&&(this.connections.splice(A,1),this[(this.connections.length>0?"add":"remove")+"Class"](i.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](i.endpointFullClass)),!o&&T&&this.connections.length===0&&i.deleteObject({endpoint:this,fireEvent:!1,deleteAttachedObjects:o!==!0})},this.deleteEveryConnection=function(S){for(var A=this.connections.length,o=0;o<A;o++)i.deleteConnection(this.connections[0],S)},this.detachFrom=function(S,A,o){for(var d=[],l=0;l<this.connections.length;l++)(this.connections[l].endpoints[1]===S||this.connections[l].endpoints[0]===S)&&d.push(this.connections[l]);for(var C=0,w=d.length;C<w;C++)i.deleteConnection(d[0]);return this},this.getElement=function(){return this.element},this.setElement=function(S){var A=this._jsPlumb.instance.getId(S),o=this.elementId;return V.removeWithFunction(s.endpointsByElement[this.elementId],function(d){return d.id===this.id}.bind(this)),this.element=f.getElement(S),this.elementId=i.getId(this.element),i.router.rehomeEndpoint(this,o,this.element),i.dragManager.endpointAdded(this.element),V.addToList(s.endpointsByElement,A,this),this},this.makeInPlaceCopy=function(){var S=this.anchor.getCurrentLocation({element:this}),A=this.anchor.getOrientation(this),o=this.anchor.getCssClass(),d={bind:function(){},compute:function(){return[S[0],S[1]]},getCurrentLocation:function(){return[S[0],S[1]]},getOrientation:function(){return A},getCssClass:function(){return o}};return D({dropOptions:s.dropOptions,anchor:d,source:this.element,paintStyle:this.getPaintStyle(),endpoint:s.hideOnDrag?"Blank":this.endpoint,_transient:!0,scope:this.scope,reference:this})},this.connectorSelector=function(){return this.connections[0]},this.setStyle=this.setPaintStyle,this.paint=function(S){S=S||{};var A=S.timestamp,o=S.recalc!==!1;if(!A||this.timestamp!==A){var d=i.updateOffset({elId:this.elementId,timestamp:A}),l=S.offset?S.offset.o:d.o;if(l!=null){var C=S.anchorPoint,w=S.connectorPaintStyle;if(C==null){var h=S.dimensions||d.s,j={xy:[l.left,l.top],wh:h,element:this,timestamp:A};if(o&&this.anchor.isDynamic&&this.connections.length>0){var g=M(this,S.elementWithPrecedence),P=g.endpoints[0]===this?1:0,c=P===0?g.sourceId:g.targetId,_=i.getCachedData(c),R=_.o,U=_.s;j.index=P===0?1:0,j.connection=g,j.txy=[R.left,R.top],j.twh=U,j.tElement=g.endpoints[P],j.tRotation=i.getRotation(c)}else this.connections.length>0&&(j.connection=this.connections[0]);j.rotation=i.getRotation(this.elementId),C=this.anchor.compute(j)}this.endpoint.compute(C,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,w||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=A;for(var Y in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(Y)){var n=this._jsPlumb.overlays[Y];n.isVisible()&&(this._jsPlumb.overlayPlacements[Y]=n.draw(this.endpoint,this._jsPlumb.paintStyleInUse),n.paint(this._jsPlumb.overlayPlacements[Y]))}}}},this.getTypeDescriptor=function(){return"endpoint"},this.isVisible=function(){return this._jsPlumb.visible},this.repaint=this.paint;var e=!1;this.initDraggable=function(){if(!e&&f.isDragSupported(this.element)){var S={id:null,element:null},A=null,o=!1,d=null,l=nt(this,S,i),C=s.dragOptions||{},w={},h=f.dragEvents.start,j=f.dragEvents.stop,g=f.dragEvents.drag,P=f.dragEvents.beforeStart,c,_=function(Y){c=Y.e.payload||{}},R=function(Y){A=this.connectorSelector();var n=!0;this.isEnabled()||(n=!1),A==null&&!this.isSource&&!this.isTemporarySource&&(n=!1),this.isSource&&this.isFull()&&!(A!=null&&this.dragAllowedWhenFull)&&(n=!1),A!=null&&!A.isDetachable(this)&&(this.isFull()?n=!1:A=null);var a=i.checkCondition(A==null?"beforeDrag":"beforeStartDetach",{endpoint:this,source:this.element,sourceId:this.elementId,connection:A});if(a===!1?n=!1:typeof a=="object"?f.extend(a,c||{}):a=c||{},n===!1)return i.stopDrag&&i.stopDrag(this.canvas),l.stopDrag(),!1;for(var t=0;t<this.connections.length;t++)this.connections[t].setHover(!1);this.addClass("endpointDrag"),i.setConnectionBeingDragged(!0),A&&!this.isFull()&&this.isSource&&(A=null),i.updateOffset({elId:this.elementId});var v=this._jsPlumb.instance.getOffset(this.canvas),m=this.canvas,I=this._jsPlumb.instance.getSize(this.canvas);K(S,i,v,I),i.setAttributes(this.canvas,{dragId:S.id,elId:this.elementId});var F=this.dragProxy||this.endpoint;if(this.dragProxy==null&&this.connectionType!=null){var X=this._jsPlumb.instance.deriveEndpointAndAnchorSpec(this.connectionType);X.endpoints[1]&&(F=X.endpoints[1])}var N=this._jsPlumb.instance.makeAnchor("Center");N.isFloating=!0,this._jsPlumb.floatingEndpoint=Q(this.getPaintStyle(),N,F,this.canvas,S.element,i,D,this.scope);var W=this._jsPlumb.floatingEndpoint.anchor;if(A==null)this.setHover(!1,!1),A=b({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.element,target:S.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:s.connectorStyle,hoverPaintStyle:s.connectorHoverStyle,connector:s.connector,overlays:s.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass,scope:s.scope,data:a}),A.pending=!0,A.addClass(i.draggingClass),this._jsPlumb.floatingEndpoint.addClass(i.draggingClass),this._jsPlumb.floatingEndpoint.anchor=W,i.fire("connectionDrag",A),i.router.newConnection(A);else{o=!0,A.setHover(!1);var ot=A.endpoints[0].id===this.id?0:1;this.detachFromConnection(A,null,!0);var st=i.getDragScope(m);i.setAttribute(this.canvas,"originalScope",st),i.fire("connectionDrag",A),ot===0?(d=[A.source,A.sourceId,m,st],i.router.sourceOrTargetChanged(A.endpoints[ot].elementId,S.id,A,S.element,0)):(d=[A.target,A.targetId,m,st],i.router.sourceOrTargetChanged(A.endpoints[ot].elementId,S.id,A,S.element,1)),A.suspendedEndpoint=A.endpoints[ot],A.suspendedElement=A.endpoints[ot].getElement(),A.suspendedElementId=A.endpoints[ot].elementId,A.suspendedElementType=ot===0?"source":"target",A.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=A.suspendedEndpoint,A.endpoints[ot]=this._jsPlumb.floatingEndpoint,A.addClass(i.draggingClass),this._jsPlumb.floatingEndpoint.addClass(i.draggingClass)}i.registerFloatingConnection(S,A,this._jsPlumb.floatingEndpoint),i.currentlyDragging=!0}.bind(this),U=function(){if(i.setConnectionBeingDragged(!1),A&&A.endpoints!=null){var Y=i.getDropEvent(arguments),n=i.getFloatingAnchorIndex(A);if(A.endpoints[n===0?1:0].anchor.locked=!1,A.removeClass(i.draggingClass),this._jsPlumb&&(A.deleteConnectionNow||A.endpoints[n]===this._jsPlumb.floatingEndpoint)&&o&&A.suspendedEndpoint){n===0?(A.floatingElement=A.source,A.floatingId=A.sourceId,A.floatingEndpoint=A.endpoints[0],A.floatingIndex=0,A.source=d[0],A.sourceId=d[1]):(A.floatingElement=A.target,A.floatingId=A.targetId,A.floatingEndpoint=A.endpoints[1],A.floatingIndex=1,A.target=d[0],A.targetId=d[1]);var a=this._jsPlumb.floatingEndpoint;i.setDragScope(d[2],d[3]),A.endpoints[n]=A.suspendedEndpoint,A.isReattach()||A._forceReattach||A._forceDetach||!i.deleteConnection(A,{originalEvent:Y})?(A.setHover(!1),A._forceDetach=null,A._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(A),A.suspendedEndpoint.addConnection(A),n===1?i.router.sourceOrTargetChanged(A.floatingId,A.targetId,A,A.target,n):i.router.sourceOrTargetChanged(A.floatingId,A.sourceId,A,A.source,n),i.repaint(d[1])):i.deleteObject({endpoint:a})}this.deleteAfterDragStop?i.deleteObject({endpoint:this}):this._jsPlumb&&this.paint({recalc:!1}),i.fire("connectionDragStop",A,Y),A.pending&&i.fire("connectionAborted",A,Y),i.currentlyDragging=!1,A.suspendedElement=null,A.suspendedEndpoint=null,A=null}S&&S.element&&i.remove(S.element,!1,!1),this._jsPlumb&&(this.canvas.style.visibility="visible",this.anchor.locked=!1,this._jsPlumb.floatingEndpoint=null)}.bind(this);C=f.extend(w,C),C.scope=this.scope||C.scope,C[P]=V.wrap(C[P],_,!1),C[h]=V.wrap(C[h],R,!1),C[g]=V.wrap(C[g],l.drag),C[j]=V.wrap(C[j],U),C.multipleDrop=!1,C.canDrag=function(){return this.isSource||this.isTemporarySource||this.connections.length>0&&this.connectionsDetachable!==!1}.bind(this),i.initDraggable(this.canvas,C,"internal"),this.canvas._jsPlumbRelatedElement=this.element,e=!0}};var O=s.endpoint||this._jsPlumb.instance.Defaults.Endpoint||f.Defaults.Endpoint;this.setEndpoint(O,!0);var L=s.anchor?s.anchor:s.anchors?s.anchors:i.Defaults.Anchor||"Top";this.setAnchor(L,!0);var G=["default",s.type||""].join(" ");this.addType(G,s.data,!0),this.canvas=this.endpoint.canvas,this.canvas._jsPlumb=this,this.initDraggable();var B=function(S,A,o,d){if(f.isDropSupported(this.element)){var l=s.dropOptions||i.Defaults.DropOptions||f.Defaults.DropOptions;l=f.extend({},l),l.scope=l.scope||this.scope;var C=f.dragEvents.drop,w=f.dragEvents.over,h=f.dragEvents.out,j=this,g=i.EndpointDropHandler({getEndpoint:function(){return j},jsPlumb:i,enabled:function(){return o!=null?o.isEnabled():!0},isFull:function(){return o.isFull()},element:this.element,elementId:this.elementId,isSource:this.isSource,isTarget:this.isTarget,addClass:function(P){j.addClass(P)},removeClass:function(P){j.removeClass(P)},isDropAllowed:function(){return j.isDropAllowed.apply(j,arguments)},reference:d,isRedrop:function(P,c){return P.suspendedEndpoint&&c.reference&&P.suspendedEndpoint.id===c.reference.id}});l[C]=V.wrap(l[C],g,!0),l[w]=V.wrap(l[w],function(){var P=f.getDragObject(arguments),c=i.getAttribute(f.getElement(P),"dragId"),_=i.getFloatingConnectionFor(c);if(_!=null){var R=i.getFloatingAnchorIndex(_),U=this.isTarget&&R!==0||_.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===_.suspendedEndpoint.id;if(U){var Y=i.checkCondition("checkDropAllowed",{sourceEndpoint:_.endpoints[R],targetEndpoint:this,connection:_});this[(Y?"add":"remove")+"Class"](i.endpointDropAllowedClass),this[(Y?"remove":"add")+"Class"](i.endpointDropForbiddenClass),_.endpoints[R].anchor.over(this.anchor,this)}}}.bind(this)),l[h]=V.wrap(l[h],function(){var P=f.getDragObject(arguments),c=P==null?null:i.getAttribute(f.getElement(P),"dragId"),_=c?i.getFloatingConnectionFor(c):null;if(_!=null){var R=i.getFloatingAnchorIndex(_),U=this.isTarget&&R!==0||_.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id===_.suspendedEndpoint.id;U&&(this.removeClass(i.endpointDropAllowedClass),this.removeClass(i.endpointDropForbiddenClass),_.endpoints[R].anchor.out())}}.bind(this)),i.initDroppable(S,l,"internal",A)}}.bind(this);return this.anchor.isFloating||B(this.canvas,!(s._transient||this.anchor.isFloating),this,s.reference),this},V.extend(f.Endpoint,f.OverlayCapableJsPlumbUIComponent,{setVisible:function(s,i,b){if(this._jsPlumb.visible=s,this.canvas&&(this.canvas.style.display=s?"block":"none"),this[s?"showOverlays":"hideOverlays"](),!i){for(var D=0;D<this.connections.length;D++)if(this.connections[D].setVisible(s),!b){var T=this===this.connections[D].endpoints[0]?1:0;this.connections[D].endpoints[T].connections.length===1&&this.connections[D].endpoints[T].setVisible(s,!0,!0)}}},getAttachedElements:function(){return this.connections},applyType:function(s,i){this.setPaintStyle(s.endpointStyle||s.paintStyle,i),this.setHoverPaintStyle(s.endpointHoverStyle||s.hoverPaintStyle,i),s.maxConnections!=null&&(this._jsPlumb.maxConnections=s.maxConnections),s.scope&&(this.scope=s.scope),f.extend(this,s,u),s.cssClass!=null&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,s.cssClass),f.OverlayCapableJsPlumbUIComponent.applyType(this,s)},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(s){this._jsPlumb.enabled=s},cleanup:function(){var s=this._jsPlumb.instance.endpointAnchorClassPrefix+(this._jsPlumb.currentAnchorClass?"-"+this._jsPlumb.currentAnchorClass:"");f.removeClass(this.element,s),this.anchor=null,this.endpoint.cleanup(!0),this.endpoint.destroy(),this.endpoint=null,this._jsPlumb.instance.destroyDraggable(this.canvas,"internal"),this._jsPlumb.instance.destroyDroppable(this.canvas,"internal")},setHover:function(s){this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&this.endpoint.setHover(s)},isFull:function(){return this._jsPlumb.maxConnections===0?!0:!(this.isFloating()||this._jsPlumb.maxConnections<0||this.connections.length<this._jsPlumb.maxConnections)},isFloating:function(){return this.anchor!=null&&this.anchor.isFloating},isConnectedTo:function(s){var i=!1;if(s){for(var b=0;b<this.connections.length;b++)if(this.connections[b].endpoints[1]===s||this.connections[b].endpoints[0]===s){i=!0;break}}return i},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(s){this._jsPlumb.connectionCost=s},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(s){this._jsPlumb.connectionsDirected=s},setElementId:function(s){this.elementId=s,this.anchor.elementId=s},setReferenceElement:function(s){this.element=f.getElement(s)},setDragAllowedWhenFull:function(s){this.dragAllowedWhenFull=s},equals:function(s){return this.anchor.equals(s.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(s){return this.anchor.compute(s)}}),$.jsPlumbInstance.prototype.EndpointDropHandler=function(s){return function(i){var b=s.jsPlumb;s.removeClass(b.endpointDropAllowedClass),s.removeClass(b.endpointDropForbiddenClass);var D=b.getDropEvent(arguments),T=b.getDragObject(arguments),E=b.getAttribute(T,"dragId");b.getAttribute(T,"elId");var p=b.getAttribute(T,"originalScope"),e=b.getFloatingConnectionFor(E);if(e!=null){var O=e.suspendedEndpoint!=null;if(!(O&&e.suspendedEndpoint._jsPlumb==null)){var L=s.getEndpoint(e);if(L!=null){if(s.isRedrop(e,s)){e._forceReattach=!0,e.setHover(!1),s.maybeCleanup&&s.maybeCleanup(L);return}var G=b.getFloatingAnchorIndex(e);if(G===0&&!s.isSource||G===1&&!s.isTarget){s.maybeCleanup&&s.maybeCleanup(L);return}s.onDrop&&s.onDrop(e),p&&b.setDragScope(T,p);var B=s.isFull(i);if(B&&L.fire("maxConnections",{endpoint:this,connection:e,maxConnections:L._jsPlumb.maxConnections},D),!B&&s.enabled()){var S=!0;G===0?(e.floatingElement=e.source,e.floatingId=e.sourceId,e.floatingEndpoint=e.endpoints[0],e.floatingIndex=0,e.source=s.element,e.sourceId=b.getId(s.element)):(e.floatingElement=e.target,e.floatingId=e.targetId,e.floatingEndpoint=e.endpoints[1],e.floatingIndex=1,e.target=s.element,e.targetId=b.getId(s.element)),O&&e.suspendedEndpoint.id!==L.id&&(!e.isDetachAllowed(e)||!e.endpoints[G].isDetachAllowed(e)||!e.suspendedEndpoint.isDetachAllowed(e)||!b.checkCondition("beforeDetach",e))&&(S=!1);var A=function(d){e.endpoints[G].detachFromConnection(e),e.suspendedEndpoint&&e.suspendedEndpoint.detachFromConnection(e),e.endpoints[G]=L,L.addConnection(e);var l=L.getParameters();for(var C in l)e.setParameter(C,l[C]);if(!O)l.draggable&&b.initDraggable(this.element,s.dragOptions,"internal",b);else{var w=e.suspendedEndpoint.elementId;b.fireMoveEvent({index:G,originalSourceId:G===0?w:e.sourceId,newSourceId:G===0?L.elementId:e.sourceId,originalTargetId:G===1?w:e.targetId,newTargetId:G===1?L.elementId:e.targetId,originalSourceEndpoint:G===0?e.suspendedEndpoint:e.endpoints[0],newSourceEndpoint:G===0?L:e.endpoints[0],originalTargetEndpoint:G===1?e.suspendedEndpoint:e.endpoints[1],newTargetEndpoint:G===1?L:e.endpoints[1],connection:e},D)}if(G===1?b.router.sourceOrTargetChanged(e.floatingId,e.targetId,e,e.target,1):b.router.sourceOrTargetChanged(e.floatingId,e.sourceId,e,e.source,0),e.endpoints[0].finalEndpoint){var h=e.endpoints[0];h.detachFromConnection(e),e.endpoints[0]=e.endpoints[0].finalEndpoint,e.endpoints[0].addConnection(e)}V.isObject(d)&&e.mergeData(d),b.finaliseConnection(e,null,D,!1),e.setHover(!1),b.revalidate(e.endpoints[0].element)}.bind(this),o=function(){e.suspendedEndpoint&&(e.endpoints[G]=e.suspendedEndpoint,e.setHover(!1),e._forceDetach=!0,G===0?(e.source=e.suspendedEndpoint.element,e.sourceId=e.suspendedEndpoint.elementId):(e.target=e.suspendedEndpoint.element,e.targetId=e.suspendedEndpoint.elementId),e.suspendedEndpoint.addConnection(e),G===1?b.router.sourceOrTargetChanged(e.floatingId,e.targetId,e,e.target,1):b.router.sourceOrTargetChanged(e.floatingId,e.sourceId,e,e.source,0),b.repaint(e.sourceId),e._forceDetach=!1)};if(S=S&&s.isDropAllowed(e.sourceId,e.targetId,e.scope,e,L),S)return A(S),!0;o()}s.maybeCleanup&&s.maybeCleanup(L),b.currentlyDragging=!1}}}}}}.call(typeof window!="undefined"?window:kt),function(){var $=this,f=$.jsPlumb,V=$.jsPlumbUtil,nt=function(u,M,s,i,b){if(f.Connectors[M]=f.Connectors[M]||{},f.Connectors[M][s]==null){if(f.Connectors[s]==null){if(u.Defaults.DoNotThrowErrors)return null;throw new TypeError("jsPlumb: unknown connector type '"+s+"'")}f.Connectors[M][s]=function(){f.Connectors[s].apply(this,arguments),f.ConnectorRenderers[M].apply(this,arguments)},V.extend(f.Connectors[M][s],[f.Connectors[s],f.ConnectorRenderers[M]])}return new f.Connectors[M][s](i,b)},K=function(u,M,s){return u?s.makeAnchor(u,M,s):null},Q=function(u,M,s,i){M!=null&&(M._jsPlumbConnections=M._jsPlumbConnections||{},i?delete M._jsPlumbConnections[u.id]:M._jsPlumbConnections[u.id]=!0,V.isEmpty(M._jsPlumbConnections)?s.removeClass(M,s.connectedClass):s.addClass(M,s.connectedClass))};f.Connection=function(u){var M=u.newEndpoint;this.id=u.id,this.connector=null,this.idPrefix="_jsplumb_c_",this.defaultLabelLocation=.5,this.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.previousConnection=u.previousConnection,this.source=f.getElement(u.source),this.target=f.getElement(u.target),f.OverlayCapableJsPlumbUIComponent.apply(this,arguments),u.sourceEndpoint?(this.source=u.sourceEndpoint.getElement(),this.sourceId=u.sourceEndpoint.elementId):this.sourceId=this._jsPlumb.instance.getId(this.source),u.targetEndpoint?(this.target=u.targetEndpoint.getElement(),this.targetId=u.targetEndpoint.elementId):this.targetId=this._jsPlumb.instance.getId(this.target),this.scope=u.scope,this.endpoints=[],this.endpointStyles=[];var s=this._jsPlumb.instance;s.manage(this.sourceId,this.source),s.manage(this.targetId,this.target),this._jsPlumb.visible=!0,this._jsPlumb.params={cssClass:u.cssClass,container:u.container,"pointer-events":u["pointer-events"],editorParams:u.editorParams,overlays:u.overlays},this._jsPlumb.lastPaintedAt=null,this.bind("mouseover",function(){this.setHover(!0)}.bind(this)),this.bind("mouseout",function(){this.setHover(!1)}.bind(this)),this.makeEndpoint=function(C,w,h,j,g){return h=h||this._jsPlumb.instance.getId(w),this.prepareEndpoint(s,M,this,j,C?0:1,u,w,h,g)},u.type&&(u.endpoints=u.endpoints||this._jsPlumb.instance.deriveEndpointAndAnchorSpec(u.type).endpoints);var i=this.makeEndpoint(!0,this.source,this.sourceId,u.sourceEndpoint),b=this.makeEndpoint(!1,this.target,this.targetId,u.targetEndpoint);i&&V.addToList(u.endpointsByElement,this.sourceId,i),b&&V.addToList(u.endpointsByElement,this.targetId,b),this.scope||(this.scope=this.endpoints[0].scope),u.deleteEndpointsOnEmpty!=null&&(this.endpoints[0].setDeleteOnEmpty(u.deleteEndpointsOnEmpty),this.endpoints[1].setDeleteOnEmpty(u.deleteEndpointsOnEmpty));var D=s.Defaults.ConnectionsDetachable;u.detachable===!1&&(D=!1),this.endpoints[0].connectionsDetachable===!1&&(D=!1),this.endpoints[1].connectionsDetachable===!1&&(D=!1);var T=u.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||s.Defaults.ReattachConnections;this.appendToDefaultType({detachable:D,reattach:T,paintStyle:this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||u.paintStyle||s.Defaults.PaintStyle||f.Defaults.PaintStyle,hoverPaintStyle:this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||u.hoverPaintStyle||s.Defaults.HoverPaintStyle||f.Defaults.HoverPaintStyle});var E=s.getSuspendedAt();if(!s.isSuspendDrawing()){var p=s.getCachedData(this.sourceId),e=p.o,O=p.s,L=s.getCachedData(this.targetId),G=L.o,B=L.s,S=E||jsPlumbUtil.uuid(),A=this.endpoints[0].anchor.compute({xy:[e.left,e.top],wh:O,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[G.left,G.top],twh:B,tElement:this.endpoints[1],timestamp:S,rotation:s.getRotation(this.endpoints[0].elementId)});this.endpoints[0].paint({anchorLoc:A,timestamp:S}),A=this.endpoints[1].anchor.compute({xy:[G.left,G.top],wh:B,element:this.endpoints[1],elementId:this.endpoints[1].elementId,txy:[e.left,e.top],twh:O,tElement:this.endpoints[0],timestamp:S,rotation:s.getRotation(this.endpoints[1].elementId)}),this.endpoints[1].paint({anchorLoc:A,timestamp:S})}this.getTypeDescriptor=function(){return"connection"},this.getAttachedElements=function(){return this.endpoints},this.isDetachable=function(C){return this._jsPlumb.detachable===!1?!1:C!=null?C.connectionsDetachable===!0:this._jsPlumb.detachable===!0},this.setDetachable=function(C){this._jsPlumb.detachable=C===!0},this.isReattach=function(){return this._jsPlumb.reattach===!0||this.endpoints[0].reattachConnections===!0||this.endpoints[1].reattachConnections===!0},this.setReattach=function(C){this._jsPlumb.reattach=C===!0},this._jsPlumb.cost=u.cost||this.endpoints[0].getConnectionCost(),this._jsPlumb.directed=u.directed,u.directed==null&&(this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected());var o=f.extend({},this.endpoints[1].getParameters());f.extend(o,this.endpoints[0].getParameters()),f.extend(o,this.getParameters()),this.setParameters(o),this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||u.connector||s.Defaults.Connector||f.Defaults.Connector,!0);var d=u.data==null||!V.isObject(u.data)?{}:u.data;this.getData=function(){return d},this.setData=function(C){d=C||{}},this.mergeData=function(C){d=f.extend(d,C)};var l=["default",this.endpoints[0].connectionType,this.endpoints[1].connectionType,u.type].join(" ");/[^\s]/.test(l)&&this.addType(l,u.data,!0),this.updateConnectedClass()},V.extend(f.Connection,f.OverlayCapableJsPlumbUIComponent,{applyType:function(u,M,s){var i=null;u.connector!=null&&(i=this.getCachedTypeItem("connector",s.connector),i==null&&(i=this.prepareConnector(u.connector,s.connector),this.cacheTypeItem("connector",i,s.connector)),this.setPreparedConnector(i)),u.detachable!=null&&this.setDetachable(u.detachable),u.reattach!=null&&this.setReattach(u.reattach),u.scope&&(this.scope=u.scope),u.cssClass!=null&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,u.cssClass);var b=null;u.anchor?(b=this.getCachedTypeItem("anchors",s.anchor),b==null&&(b=[this._jsPlumb.instance.makeAnchor(u.anchor),this._jsPlumb.instance.makeAnchor(u.anchor)],this.cacheTypeItem("anchors",b,s.anchor))):u.anchors&&(b=this.getCachedTypeItem("anchors",s.anchors),b==null&&(b=[this._jsPlumb.instance.makeAnchor(u.anchors[0]),this._jsPlumb.instance.makeAnchor(u.anchors[1])],this.cacheTypeItem("anchors",b,s.anchors))),b!=null&&(this.endpoints[0].anchor=b[0],this.endpoints[1].anchor=b[1],this.endpoints[1].anchor.isDynamic&&this._jsPlumb.instance.repaint(this.endpoints[1].elementId)),f.OverlayCapableJsPlumbUIComponent.applyType(this,u)},addClass:function(u,M){M&&(this.endpoints[0].addClass(u),this.endpoints[1].addClass(u),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(u)),this.connector&&this.connector.addClass(u)},removeClass:function(u,M){M&&(this.endpoints[0].removeClass(u),this.endpoints[1].removeClass(u),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(u)),this.connector&&this.connector.removeClass(u)},isVisible:function(){return this._jsPlumb.visible},setVisible:function(u){this._jsPlumb.visible=u,this.connector&&this.connector.setVisible(u),this.repaint()},cleanup:function(){this.updateConnectedClass(!0),this.endpoints=null,this.source=null,this.target=null,this.connector!=null&&(this.connector.cleanup(!0),this.connector.destroy(!0)),this.connector=null},updateConnectedClass:function(u){this._jsPlumb&&(Q(this,this.source,this._jsPlumb.instance,u),Q(this,this.target,this._jsPlumb.instance,u))},setHover:function(u){this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&(this.connector.setHover(u),$.jsPlumb[u?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass),$.jsPlumb[u?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass))},getUuids:function(){return[this.endpoints[0].getUuid(),this.endpoints[1].getUuid()]},getCost:function(){return this._jsPlumb?this._jsPlumb.cost:-1/0},setCost:function(u){this._jsPlumb.cost=u},isDirected:function(){return this._jsPlumb.directed},getConnector:function(){return this.connector},prepareConnector:function(u,M){var s={_jsPlumb:this._jsPlumb.instance,cssClass:this._jsPlumb.params.cssClass,container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"]},i=this._jsPlumb.instance.getRenderMode(),b;return V.isString(u)?b=nt(this._jsPlumb.instance,i,u,s,this):V.isArray(u)&&(u.length===1?b=nt(this._jsPlumb.instance,i,u[0],s,this):b=nt(this._jsPlumb.instance,i,u[0],V.merge(u[1],s),this)),M!=null&&(b.typeId=M),b},setPreparedConnector:function(u,M,s,i){if(this.connector!==u){var b,D="";if(this.connector!=null&&(b=this.connector,D=b.getClass(),this.connector.cleanup(),this.connector.destroy()),this.connector=u,i&&this.cacheTypeItem("connector",u,i),this.canvas=this.connector.canvas,this.bgCanvas=this.connector.bgCanvas,this.connector.reattach(this._jsPlumb.instance),this.addClass(D),this.canvas&&(this.canvas._jsPlumb=this),this.bgCanvas&&(this.bgCanvas._jsPlumb=this),b!=null)for(var T=this.getOverlays(),E=0;E<T.length;E++)T[E].transfer&&T[E].transfer(this.connector);s||this.setListenerComponent(this.connector),M||this.repaint()}},setConnector:function(u,M,s,i){var b=this.prepareConnector(u,i);this.setPreparedConnector(b,M,s,i)},paint:function(u){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){u=u||{};var M=u.timestamp,s=!1,i=s?this.sourceId:this.targetId,b=s?this.targetId:this.sourceId,D=s?0:1,T=s?1:0;if(M==null||M!==this._jsPlumb.lastPaintedAt){var E=this._jsPlumb.instance.updateOffset({elId:b}).o,p=this._jsPlumb.instance.updateOffset({elId:i}).o,e=this.endpoints[T],O=this.endpoints[D],L=e.anchor.getCurrentLocation({xy:[E.left,E.top],wh:[E.width,E.height],element:e,timestamp:M,rotation:this._jsPlumb.instance.getRotation(this.sourceId)}),G=O.anchor.getCurrentLocation({xy:[p.left,p.top],wh:[p.width,p.height],element:O,timestamp:M,rotation:this._jsPlumb.instance.getRotation(this.targetId)});this.connector.resetBounds(),this.connector.compute({sourcePos:L,targetPos:G,sourceOrientation:e.anchor.getOrientation(e),targetOrientation:O.anchor.getOrientation(O),sourceEndpoint:this.endpoints[T],targetEndpoint:this.endpoints[D],"stroke-width":this._jsPlumb.paintStyleInUse.strokeWidth,sourceInfo:E,targetInfo:p});var B={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};for(var S in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(S)){var A=this._jsPlumb.overlays[S];A.isVisible()&&(this._jsPlumb.overlayPlacements[S]=A.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(A)),B.minX=Math.min(B.minX,this._jsPlumb.overlayPlacements[S].minX),B.maxX=Math.max(B.maxX,this._jsPlumb.overlayPlacements[S].maxX),B.minY=Math.min(B.minY,this._jsPlumb.overlayPlacements[S].minY),B.maxY=Math.max(B.maxY,this._jsPlumb.overlayPlacements[S].maxY))}var o=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||1)/2,d=parseFloat(this._jsPlumb.paintStyleInUse.strokeWidth||0),l={xmin:Math.min(this.connector.bounds.minX-(o+d),B.minX),ymin:Math.min(this.connector.bounds.minY-(o+d),B.minY),xmax:Math.max(this.connector.bounds.maxX+(o+d),B.maxX),ymax:Math.max(this.connector.bounds.maxY+(o+d),B.maxY)};this.connector.paintExtents=l,this.connector.paint(this._jsPlumb.paintStyleInUse,null,l);for(var C in this._jsPlumb.overlays)if(this._jsPlumb.overlays.hasOwnProperty(C)){var w=this._jsPlumb.overlays[C];w.isVisible()&&w.paint(this._jsPlumb.overlayPlacements[C],l)}}this._jsPlumb.lastPaintedAt=M}},repaint:function(u){var M=jsPlumb.extend(u||{},{});M.elId=this.sourceId,this.paint(M)},prepareEndpoint:function(u,M,s,i,b,D,T,E,p){var e;if(i)s.endpoints[b]=i,i.addConnection(s);else{D.endpoints||(D.endpoints=[null,null]);var O=p||D.endpoints[b]||D.endpoint||u.Defaults.Endpoints[b]||f.Defaults.Endpoints[b]||u.Defaults.Endpoint||f.Defaults.Endpoint;D.endpointStyles||(D.endpointStyles=[null,null]),D.endpointHoverStyles||(D.endpointHoverStyles=[null,null]);var L=D.endpointStyles[b]||D.endpointStyle||u.Defaults.EndpointStyles[b]||f.Defaults.EndpointStyles[b]||u.Defaults.EndpointStyle||f.Defaults.EndpointStyle;L.fill==null&&D.paintStyle!=null&&(L.fill=D.paintStyle.stroke),L.outlineStroke==null&&D.paintStyle!=null&&(L.outlineStroke=D.paintStyle.outlineStroke),L.outlineWidth==null&&D.paintStyle!=null&&(L.outlineWidth=D.paintStyle.outlineWidth);var G=D.endpointHoverStyles[b]||D.endpointHoverStyle||u.Defaults.EndpointHoverStyles[b]||f.Defaults.EndpointHoverStyles[b]||u.Defaults.EndpointHoverStyle||f.Defaults.EndpointHoverStyle;D.hoverPaintStyle!=null&&(G==null&&(G={}),G.fill==null&&(G.fill=D.hoverPaintStyle.stroke));var B=D.anchors?D.anchors[b]:D.anchor?D.anchor:K(u.Defaults.Anchors[b],E,u)||K(f.Defaults.Anchors[b],E,u)||K(u.Defaults.Anchor,E,u)||K(f.Defaults.Anchor,E,u),S=D.uuids?D.uuids[b]:null;e=M({paintStyle:L,hoverPaintStyle:G,endpoint:O,connections:[s],uuid:S,anchor:B,source:T,scope:D.scope,reattach:D.reattach||u.Defaults.ReattachConnections,detachable:D.detachable||u.Defaults.ConnectionsDetachable}),i==null&&e.setDeleteOnEmpty(!0),s.endpoints[b]=e,D.drawEndpoints===!1&&e.setVisible(!1,!0,!0)}return e},replaceEndpoint:function(u,M){var s=this.endpoints[u],i=s.elementId,b=this._jsPlumb.instance.getEndpoints(i),D=b.indexOf(s),T=this.makeEndpoint(u===0,s.element,i,null,M);this.endpoints[u]=T,b.splice(D,1,T),this._jsPlumb.instance.deleteObject({endpoint:s,deleteAttachedObjects:!1}),this._jsPlumb.instance.fire("endpointReplaced",{previous:s,current:T}),this._jsPlumb.instance.router.sourceOrTargetChanged(this.endpoints[1].elementId,this.endpoints[1].elementId,this,this.endpoints[1].element,1)}})}.call(typeof window!="undefined"?window:kt),function(){var $=this,f=$.jsPlumbUtil,V=$.jsPlumb;V.AnchorManager=function(u){var M={},s={},i={},b={},D=this,T={},E=u.jsPlumbInstance,p={},e=function(l,C,w,h,j,g,P,c){for(var _=[],R=C[j?0:1]/(h.length+1),U=0;U<h.length;U++){var Y=(U+1)*R,n=g*C[j?1:0];P&&(Y=C[j?0:1]-Y);var a=j?Y:n,t=w.left+a,v=a/C[0],m=j?n:Y,I=w.top+m,F=m/C[1];if(c!==0){var X=jsPlumbUtil.rotatePoint([t,I],[w.centerx,w.centery],c);t=X[0],I=X[1]}_.push([t,I,v,F,h[U][1],h[U][2]])}return _},O=function(l,C){return C[0][0]-l[0][0]},L=function(l,C){var w=l[0][0]<0?-Math.PI-l[0][0]:Math.PI-l[0][0],h=C[0][0]<0?-Math.PI-C[0][0]:Math.PI-C[0][0];return w-h},G={top:L,right:O,bottom:O,left:L},B=function(l,C){return l.sort(C)},S=function(l,C){var w=E.getCachedData(l),h=w.s,j=w.o,g=function(P,c,_,R,U,Y,n){if(R.length>0)for(var a=B(R,G[P]),t=P==="right"||P==="top",v=E.getRotation(l),m=e(P,c,_,a,U,Y,t,v),I=function(ot,st){s[ot.id]=[st[0],st[1],st[2],st[3]],i[ot.id]=n},F=0;F<m.length;F++){var X=m[F][4],N=X.endpoints[0].elementId===l,W=X.endpoints[1].elementId===l;N&&I(X.endpoints[0],m[F]),W&&I(X.endpoints[1],m[F])}};g("bottom",h,j,C.bottom,!0,1,[0,1]),g("top",h,j,C.top,!0,0,[0,-1]),g("left",h,j,C.left,!1,0,[-1,0]),g("right",h,j,C.right,!1,1,[1,0])};this.reset=function(){M={},b={},T={}},this.addFloatingConnection=function(l,C){p[l]=C},this.newConnection=function(l){var C=l.sourceId,w=l.targetId,h=l.endpoints,j=!0,g=function(P,c,_,R,U){C===w&&_.isContinuous&&(l._jsPlumb.instance.removeElement(h[1].canvas),j=!1),f.addToList(b,R,[U,c,_.constructor===V.DynamicAnchor])};g(0,h[0],h[0].anchor,w,l),j&&g(1,h[1],h[1].anchor,C,l)};var A=function(l){(function(C,w){if(C){var h=function(j){return j[4]===w};f.removeWithFunction(C.top,h),f.removeWithFunction(C.left,h),f.removeWithFunction(C.bottom,h),f.removeWithFunction(C.right,h)}})(T[l.elementId],l.id)};this.connectionDetached=function(l,C){var w=l.connection||l,h=l.sourceId,j=l.targetId,g=w.endpoints,P=function(c,_,R,U,Y){f.removeWithFunction(b[U],function(n){return n[0].id===Y.id})};P(1,g[1],g[1].anchor,h,w),P(0,g[0],g[0].anchor,j,w),w.floatingId&&(P(w.floatingIndex,w.floatingEndpoint,w.floatingEndpoint.anchor,w.floatingId,w),A(w.floatingEndpoint)),A(w.endpoints[0]),A(w.endpoints[1]),C||(D.redraw(w.sourceId),w.targetId!==w.sourceId&&D.redraw(w.targetId))},this.addEndpoint=function(l,C){f.addToList(M,C,l)},this.changeId=function(l,C){b[C]=b[l],M[C]=M[l],delete b[l],delete M[l]},this.getConnectionsFor=function(l){return b[l]||[]},this.getEndpointsFor=function(l){return M[l]||[]},this.deleteEndpoint=function(l){f.removeWithFunction(M[l.elementId],function(C){return C.id===l.id}),A(l)},this.elementRemoved=function(l){delete p[l],delete M[l],M[l]=[]};var o=function(l,C,w,h,j,g,P,c,_,R,U,Y){var n=-1,a=h.endpoints[P],t=a.id,v=[1,0][P],m=[[C,w],h,j,g,t],I=l[_],F=a._continuousAnchorEdge?l[a._continuousAnchorEdge]:null,X,N;if(F){var W=f.findWithFunction(F,function(st){return st[4]===t});if(W!==-1)for(F.splice(W,1),X=0;X<F.length;X++)N=F[X][1],f.addWithFunction(U,N,function(st){return st.id===N.id}),f.addWithFunction(Y,F[X][1].endpoints[P],function(st){return st.id===N.endpoints[P].id}),f.addWithFunction(Y,F[X][1].endpoints[v],function(st){return st.id===N.endpoints[v].id})}for(X=0;X<I.length;X++)N=I[X][1],u.idx===1&&I[X][3]===g&&n===-1&&(n=X),f.addWithFunction(U,N,function(st){return st.id===N.id}),f.addWithFunction(Y,I[X][1].endpoints[P],function(st){return st.id===N.endpoints[P].id}),f.addWithFunction(Y,I[X][1].endpoints[v],function(st){return st.id===N.endpoints[v].id});{var ot=c?n!==-1?n:0:I.length;I.splice(ot,0,m)}a._continuousAnchorEdge=_};this.sourceOrTargetChanged=function(l,C,w,h,j){if(j===0){if(l!==C){w.sourceId=C,w.source=h,f.removeWithFunction(b[l],function(R){return R[0].id===w.id});var g=f.findWithFunction(b[w.targetId],function(R){return R[0].id===w.id});g>-1&&(b[w.targetId][g][0]=w,b[w.targetId][g][1]=w.endpoints[0],b[w.targetId][g][2]=w.endpoints[0].anchor.constructor===V.DynamicAnchor),f.addToList(b,C,[w,w.endpoints[1],w.endpoints[1].anchor.constructor===V.DynamicAnchor]),w.endpoints[1].anchor.isContinuous&&(w.source===w.target?w._jsPlumb.instance.removeElement(w.endpoints[1].canvas):w.endpoints[1].canvas.parentNode==null&&w._jsPlumb.instance.appendElement(w.endpoints[1].canvas)),w.updateConnectedClass()}}else if(j===1){var P=w.endpoints[0].elementId;w.target=h,w.targetId=C;var c=f.findWithFunction(b[P],function(R){return R[0].id===w.id}),_=f.findWithFunction(b[l],function(R){return R[0].id===w.id});c!==-1&&(b[P][c][0]=w,b[P][c][1]=w.endpoints[1],b[P][c][2]=w.endpoints[1].anchor.constructor===V.DynamicAnchor),_>-1&&(b[l].splice(_,1),f.addToList(b,C,[w,w.endpoints[0],w.endpoints[0].anchor.constructor===V.DynamicAnchor])),w.updateConnectedClass()}},this.rehomeEndpoint=function(l,C,w){var h=M[C]||[],j=E.getId(w);if(j!==C){var g=h.indexOf(l);if(g>-1){var P=h.splice(g,1)[0];D.add(P,j)}}for(var c=0;c<l.connections.length;c++)l.connections[c].sourceId===C?D.sourceOrTargetChanged(C,l.elementId,l.connections[c],l.element,0):l.connections[c].targetId===C&&D.sourceOrTargetChanged(C,l.elementId,l.connections[c],l.element,1)},this.redraw=function(l,C,w,h,j,g){var P=[],c=[],_=[];if(!E.isSuspendDrawing()){var R=M[l]||[],U=b[l]||[];w=w||jsPlumbUtil.uuid(),h=h||{left:0,top:0},C&&(C={left:C.left+h.left,top:C.top+h.top});for(var Y=E.updateOffset({elId:l,offset:C,recalc:!1,timestamp:w}),n={},a=0;a<U.length;a++){var t=U[a][0],v=t.sourceId,m=t.targetId,I=t.endpoints[0].anchor.isContinuous,F=t.endpoints[1].anchor.isContinuous;if(I||F){var X=v+"_"+m,N=n[X],W=t.sourceId===l?1:0,ot=E.getRotation(m),st=E.getRotation(v);I&&!T[v]&&(T[v]={top:[],right:[],bottom:[],left:[]}),F&&!T[m]&&(T[m]={top:[],right:[],bottom:[],left:[]}),l!==m&&E.updateOffset({elId:m,timestamp:w}),l!==v&&E.updateOffset({elId:v,timestamp:w});var it=E.getCachedData(m),rt=E.getCachedData(v);m===v&&(I||F)?(o(T[v],-Math.PI/2,0,t,!1,m,0,!1,"top",v,P,c),o(T[m],-Math.PI/2,0,t,!1,v,1,!1,"top",m,P,c)):(N||(N=this.calculateOrientation(v,m,rt.o,it.o,t.endpoints[0].anchor,t.endpoints[1].anchor,t,st,ot),n[X]=N),I&&o(T[v],N.theta,0,t,!1,m,0,!1,N.a[0],v,P,c),F&&o(T[m],N.theta2,-1,t,!0,v,1,!0,N.a[1],m,P,c)),I&&f.addWithFunction(_,v,function(gt){return gt===v}),F&&f.addWithFunction(_,m,function(gt){return gt===m}),f.addWithFunction(P,t,function(gt){return gt.id===t.id}),(I&&W===0||F&&W===1)&&f.addWithFunction(c,t.endpoints[W],function(gt){return gt.id===t.endpoints[W].id})}}for(a=0;a<R.length;a++)R[a].connections.length===0&&R[a].anchor.isContinuous&&(T[l]||(T[l]={top:[],right:[],bottom:[],left:[]}),o(T[l],-Math.PI/2,0,{endpoints:[R[a],R[a]],paint:function(){}},!1,l,0,!1,R[a].anchor.getDefaultFace(),l,P,c),f.addWithFunction(_,l,function(gt){return gt===l}));for(a=0;a<_.length;a++)S(_[a],T[_[a]]);for(a=0;a<R.length;a++)R[a].paint({timestamp:w,offset:Y,dimensions:Y.s,recalc:g!==!0});for(a=0;a<c.length;a++){var pt=E.getCachedData(c[a].elementId);c[a].paint({timestamp:null,offset:pt,dimensions:pt.s})}for(a=0;a<U.length;a++){var dt=U[a][1];if(dt.anchor.constructor===V.DynamicAnchor){dt.paint({elementWithPrecedence:l,timestamp:w}),f.addWithFunction(P,U[a][0],function(gt){return gt.id===U[a][0].id});for(var lt=0;lt<dt.connections.length;lt++)dt.connections[lt]!==U[a][0]&&f.addWithFunction(P,dt.connections[lt],function(gt){return gt.id===dt.connections[lt].id})}else f.addWithFunction(P,U[a][0],function(gt){return gt.id===U[a][0].id})}var bt=p[l];for(bt&&bt.paint({timestamp:w,recalc:!1,elId:l}),a=0;a<P.length;a++)P[a].paint({elId:l,timestamp:null,recalc:!1,clearEdits:j})}return{c:P,e:c}};var d=function(l){f.EventGenerator.apply(this),this.type="Continuous",this.isDynamic=!0,this.isContinuous=!0;for(var C=l.faces||["top","right","bottom","left"],w=l.clockwise!==!1,h={},j={top:"bottom",right:"left",left:"right",bottom:"top"},g={top:"right",right:"bottom",left:"top",bottom:"left"},P={top:"left",right:"top",left:"bottom",bottom:"right"},c=w?g:P,_=w?P:g,R=l.cssClass||"",U=null,Y=null,n=["left","right"],a=["top","bottom"],t=null,v=0;v<C.length;v++)h[C[v]]=!0;this.getDefaultFace=function(){return C.length===0?"top":C[0]},this.isRelocatable=function(){return!0},this.isSnapOnRelocate=function(){return!0},this.verifyEdge=function(m){return h[m]?m:h[j[m]]?j[m]:h[c[m]]?c[m]:h[_[m]]?_[m]:m},this.isEdgeSupported=function(m){return t==null?Y==null?h[m]===!0:Y===m:t.indexOf(m)!==-1},this.setCurrentFace=function(m,I){U=m,I&&Y!=null&&(Y=U)},this.getCurrentFace=function(){return U},this.getSupportedFaces=function(){var m=[];for(var I in h)h[I]&&m.push(I);return m},this.lock=function(){Y=U},this.unlock=function(){Y=null},this.isLocked=function(){return Y!=null},this.lockCurrentAxis=function(){U!=null&&(t=U==="left"||U==="right"?n:a)},this.unlockCurrentAxis=function(){t=null},this.compute=function(m){return s[m.element.id]||[0,0]},this.getCurrentLocation=function(m){return s[m.element.id]||[0,0]},this.getOrientation=function(m){return i[m.id]||[0,0]},this.getCssClass=function(){return R}};E.continuousAnchorFactory={get:function(l){return new d(l)},clear:function(l){delete s[l]}}},V.AnchorManager.prototype.calculateOrientation=function(u,M,s,i,b,D,T,E,p){var e={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"},O=["left","top","right","bottom"];if(u===M)return{orientation:e.IDENTITY,a:["top","top"]};var L=Math.atan2(i.centery-s.centery,i.centerx-s.centerx),G=Math.atan2(s.centery-i.centery,s.centerx-i.centerx),B=[],S={};(function(w,h){for(var j=0;j<w.length;j++)if(S[w[j]]={left:[h[j][0].left,h[j][0].centery],right:[h[j][0].right,h[j][0].centery],top:[h[j][0].centerx,h[j][0].top],bottom:[h[j][0].centerx,h[j][0].bottom]},h[j][1]!==0)for(var g in S[w[j]])S[w[j]][g]=jsPlumbUtil.rotatePoint(S[w[j]][g],[h[j][0].centerx,h[j][0].centery],h[j][1])})(["source","target"],[[s,E],[i,p]]);for(var A=0;A<O.length;A++)for(var o=0;o<O.length;o++)B.push({source:O[A],target:O[o],dist:Biltong.lineLength(S.source[O[A]],S.target[O[o]])});B.sort(function(w,h){return w.dist<h.dist?-1:w.dist>h.dist?1:0});for(var d=B[0].source,l=B[0].target,C=0;C<B.length&&(b.isContinuous&&b.locked?d=b.getCurrentFace():!b.isContinuous||b.isEdgeSupported(B[C].source)?d=B[C].source:d=null,D.isContinuous&&D.locked?l=D.getCurrentFace():!D.isContinuous||D.isEdgeSupported(B[C].target)?l=B[C].target:l=null,!(d!=null&&l!=null));C++);return b.isContinuous&&b.setCurrentFace(d),D.isContinuous&&D.setCurrentFace(l),{a:[d,l],theta:L,theta2:G}},V.Anchor=function(u){this.x=u.x||0,this.y=u.y||0,this.elementId=u.elementId,this.cssClass=u.cssClass||"",this.orientation=u.orientation||[0,0],this.lastReturnValue=null,this.offsets=u.offsets||[0,0],this.timestamp=null,this._unrotatedOrientation=[this.orientation[0],this.orientation[1]],this.relocatable=u.relocatable!==!1,this.snapOnRelocate=u.snapOnRelocate!==!1,this.locked=!1,f.EventGenerator.apply(this),this.compute=function(M){var s=M.xy,i=M.wh,b=M.timestamp;if(b&&b===this.timestamp)return this.lastReturnValue;var D=[s[0]+this.x*i[0]+this.offsets[0],s[1]+this.y*i[1]+this.offsets[1],this.x,this.y],T=M.rotation;if(T!=null&&T!==0){var E=jsPlumbUtil.rotatePoint(D,[s[0]+i[0]/2,s[1]+i[1]/2],T);this.orientation[0]=Math.round(this._unrotatedOrientation[0]*E[2]-this._unrotatedOrientation[1]*E[3]),this.orientation[1]=Math.round(this._unrotatedOrientation[1]*E[2]+this._unrotatedOrientation[0]*E[3]),this.lastReturnValue=[E[0],E[1],this.x,this.y]}else this.orientation[0]=this._unrotatedOrientation[0],this.orientation[1]=this._unrotatedOrientation[1],this.lastReturnValue=D;return this.timestamp=b,this.lastReturnValue},this.getCurrentLocation=function(M){return M=M||{},this.lastReturnValue==null||M.timestamp!=null&&this.timestamp!==M.timestamp?this.compute(M):this.lastReturnValue},this.setPosition=function(M,s,i,b,D){(!this.locked||D)&&(this.x=M,this.y=s,this.orientation=[i,b],this.lastReturnValue=null)}},f.extend(V.Anchor,f.EventGenerator,{equals:function(u){if(!u)return!1;var M=u.getOrientation(),s=this.getOrientation();return this.x===u.x&&this.y===u.y&&this.offsets[0]===u.offsets[0]&&this.offsets[1]===u.offsets[1]&&s[0]===M[0]&&s[1]===M[1]},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}}),V.FloatingAnchor=function(u){V.Anchor.apply(this,arguments);var M=u.reference,s=u.referenceCanvas,i=V.getSize(s),b=0,D=0,T=null,E=null;this.orientation=null,this.x=0,this.y=0,this.isFloating=!0,this.compute=function(p){var e=p.xy,O=[e[0]+i[0]/2,e[1]+i[1]/2];return E=O,O},this.getOrientation=function(p){if(T)return T;var e=M.getOrientation(p);return[Math.abs(e[0])*b*-1,Math.abs(e[1])*D*-1]},this.over=function(p,e){T=p.getOrientation(e)},this.out=function(){T=null},this.getCurrentLocation=function(p){return E==null?this.compute(p):E}},f.extend(V.FloatingAnchor,V.Anchor);var nt=function(u,M,s){return u.constructor===V.Anchor?u:M.makeAnchor(u,s,M)};V.DynamicAnchor=function(u){V.Anchor.apply(this,arguments),this.isDynamic=!0,this.anchors=[],this.elementId=u.elementId,this.jsPlumbInstance=u.jsPlumbInstance;for(var M=0;M<u.anchors.length;M++)this.anchors[M]=nt(u.anchors[M],this.jsPlumbInstance,this.elementId);this.getAnchors=function(){return this.anchors};var s=this.anchors.length>0?this.anchors[0]:null,i=s,b=function(T,E,p,e,O,L,G){var B=e[0]+T.x*O[0],S=e[1]+T.y*O[1],A=e[0]+O[0]/2,o=e[1]+O[1]/2;if(L!=null&&L!==0){var d=jsPlumbUtil.rotatePoint([B,S],[A,o],L);B=d[0],S=d[1]}return Math.sqrt(Math.pow(E-B,2)+Math.pow(p-S,2))+Math.sqrt(Math.pow(A-B,2)+Math.pow(o-S,2))},D=u.selector||function(T,E,p,e,O,L,G){for(var B=p[0]+e[0]/2,S=p[1]+e[1]/2,A=-1,o=1/0,d=0;d<G.length;d++){var l=b(G[d],B,S,T,E,O);l<o&&(A=d+0,o=l)}return G[A]};this.compute=function(T){var E=T.xy,p=T.wh,e=T.txy,O=T.twh,L=T.rotation,G=T.tRotation;return this.timestamp=T.timestamp,this.locked||e==null||O==null?(this.lastReturnValue=s.compute(T),this.lastReturnValue):(T.timestamp=null,s=D(E,p,e,O,L,G,this.anchors),this.x=s.x,this.y=s.y,s!==i&&this.fire("anchorChanged",s),i=s,this.lastReturnValue=s.compute(T),this.lastReturnValue)},this.getCurrentLocation=function(T){return s!=null?s.getCurrentLocation(T):null},this.getOrientation=function(T){return s!=null?s.getOrientation(T):[0,0]},this.over=function(T,E){s!=null&&s.over(T,E)},this.out=function(){s!=null&&s.out()},this.setAnchor=function(T){s=T},this.getCssClass=function(){return s&&s.getCssClass()||""},this.setAnchorCoordinates=function(T){var E=jsPlumbUtil.findWithFunction(this.anchors,function(p){return p.x===T[0]&&p.y===T[1]});return E!==-1?(this.setAnchor(this.anchors[E]),!0):!1}},f.extend(V.DynamicAnchor,V.Anchor);var K=function(u,M,s,i,b,D){V.Anchors[b]=function(T){var E=T.jsPlumbInstance.makeAnchor([u,M,s,i,0,0],T.elementId,T.jsPlumbInstance);return E.type=b,D&&D(E,T),E}};K(.5,0,0,-1,"TopCenter"),K(.5,1,0,1,"BottomCenter"),K(0,.5,-1,0,"LeftMiddle"),K(1,.5,1,0,"RightMiddle"),K(.5,0,0,-1,"Top"),K(.5,1,0,1,"Bottom"),K(0,.5,-1,0,"Left"),K(1,.5,1,0,"Right"),K(.5,.5,0,0,"Center"),K(1,0,0,-1,"TopRight"),K(1,1,0,1,"BottomRight"),K(0,0,0,-1,"TopLeft"),K(0,1,0,1,"BottomLeft"),V.Defaults.DynamicAnchors=function(u){return u.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],u.elementId,u.jsPlumbInstance)},V.Anchors.AutoDefault=function(u){var M=u.jsPlumbInstance.makeDynamicAnchor(V.Defaults.DynamicAnchors(u));return M.type="AutoDefault",M};var Q=function(u,M){V.Anchors[u]=function(s){var i=s.jsPlumbInstance.makeAnchor(["Continuous",{faces:M}],s.elementId,s.jsPlumbInstance);return i.type=u,i}};V.Anchors.Continuous=function(u){return u.jsPlumbInstance.continuousAnchorFactory.get(u)},Q("ContinuousLeft",["left"]),Q("ContinuousTop",["top"]),Q("ContinuousBottom",["bottom"]),Q("ContinuousRight",["right"]),K(0,0,0,0,"Assign",function(u,M){var s=M.position||"Fixed";u.positionFinder=s.constructor===String?M.jsPlumbInstance.AnchorPositionFinders[s]:s,u.constructorParams=M}),$.jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(u,M,s){return[(u.left-M.left)/s[0],(u.top-M.top)/s[1]]},Grid:function(u,M,s,i){var b=u.left-M.left,D=u.top-M.top,T=s[0]/i.grid[0],E=s[1]/i.grid[1],p=Math.floor(b/T),e=Math.floor(D/E);return[(p*T+T/2)/s[0],(e*E+E/2)/s[1]]}},V.Anchors.Perimeter=function(u){u=u||{};var M=u.anchorCount||60,s=u.shape;if(!s)throw new Error("no shape supplied to Perimeter Anchor type");var i=function(){for(var L=.5,G=Math.PI*2/M,B=0,S=[],A=0;A<M;A++){var o=L+L*Math.sin(B),d=L+L*Math.cos(B);S.push([o,d,0,0]),B+=G}return S},b=function(L){for(var G=M/L.length,B=[],S=function(o,d,l,C,w,h,j){G=M*w;for(var g=(l-o)/G,P=(C-d)/G,c=0;c<G;c++)B.push([o+g*c,d+P*c,h==null?0:h,j==null?0:j])},A=0;A<L.length;A++)S.apply(null,L[A]);return B},D=function(L){for(var G=[],B=0;B<L.length;B++)G.push([L[B][0],L[B][1],L[B][2],L[B][3],1/L.length,L[B][4],L[B][5]]);return b(G)},T=function(){return D([[0,0,1,0,0,-1],[1,0,1,1,1,0],[1,1,0,1,0,1],[0,1,0,0,-1,0]])},E={Circle:i,Ellipse:i,Diamond:function(){return D([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},Rectangle:T,Square:T,Triangle:function(){return D([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},Path:function(L){for(var G=L.points,B=[],S=0,A=0;A<G.length-1;A++){var o=Math.sqrt(Math.pow(G[A][2]-G[A][0])+Math.pow(G[A][3]-G[A][1]));S+=o,B.push([G[A][0],G[A][1],G[A+1][0],G[A+1][1],o])}for(var d=0;d<B.length;d++)B[d][4]=B[d][4]/S;return b(B)}},p=function(L,G){for(var B=[],S=G/180*Math.PI,A=0;A<L.length;A++){var o=L[A][0]-.5,d=L[A][1]-.5;B.push([.5+(o*Math.cos(S)-d*Math.sin(S)),.5+(o*Math.sin(S)+d*Math.cos(S)),L[A][2],L[A][3]])}return B};if(!E[s])throw new Error("Shape ["+s+"] is unknown by Perimeter Anchor type");var e=E[s](u);u.rotation&&(e=p(e,u.rotation));var O=u.jsPlumbInstance.makeDynamicAnchor(e);return O.type="Perimeter",O}}.call(typeof window!="undefined"?window:kt),function(){var $=this;$.jsPlumbUtil;var f=$.jsPlumb;f.DefaultRouter=function(V){this.jsPlumbInstance=V,this.anchorManager=new f.AnchorManager({jsPlumbInstance:V}),this.sourceOrTargetChanged=function(nt,K,Q,u,M){this.anchorManager.sourceOrTargetChanged(nt,K,Q,u,M)},this.reset=function(){this.anchorManager.reset()},this.changeId=function(nt,K){this.anchorManager.changeId(nt,K)},this.elementRemoved=function(nt){this.anchorManager.elementRemoved(nt)},this.newConnection=function(nt){this.anchorManager.newConnection(nt)},this.connectionDetached=function(nt,K){this.anchorManager.connectionDetached(nt,K)},this.redraw=function(nt,K,Q,u,M,s){return this.anchorManager.redraw(nt,K,Q,u,M,s)},this.deleteEndpoint=function(nt){this.anchorManager.deleteEndpoint(nt)},this.rehomeEndpoint=function(nt,K,Q){this.anchorManager.rehomeEndpoint(nt,K,Q)},this.addEndpoint=function(nt,K){this.anchorManager.addEndpoint(nt,K)}}}.call(typeof window!="undefined"?window:kt),function(){var $=this,f=$.jsPlumb,V=$.jsPlumbUtil,nt=$.Biltong;f.Segments={AbstractSegment:function(i){this.params=i,this.findClosestPointOnPath=function(b,D){return{d:1/0,x:null,y:null,l:null}},this.getBounds=function(){return{minX:Math.min(i.x1,i.x2),minY:Math.min(i.y1,i.y2),maxX:Math.max(i.x1,i.x2),maxY:Math.max(i.y1,i.y2)}},this.lineIntersection=function(b,D,T,E){return[]},this.boxIntersection=function(b,D,T,E){var p=[];return p.push.apply(p,this.lineIntersection(b,D,b+T,D)),p.push.apply(p,this.lineIntersection(b+T,D,b+T,D+E)),p.push.apply(p,this.lineIntersection(b+T,D+E,b,D+E)),p.push.apply(p,this.lineIntersection(b,D+E,b,D)),p},this.boundingBoxIntersection=function(b){return this.boxIntersection(b.x,b.y,b.w,b.y)}},Straight:function(i){f.Segments.AbstractSegment.apply(this,arguments);var b,D,T,E,p,e,O,L=function(){b=Math.sqrt(Math.pow(p-E,2)+Math.pow(O-e,2)),D=nt.gradient({x:E,y:e},{x:p,y:O}),T=-1/D};this.type="Straight",this.getLength=function(){return b},this.getGradient=function(){return D},this.getCoordinates=function(){return{x1:E,y1:e,x2:p,y2:O}},this.setCoordinates=function(o){E=o.x1,e=o.y1,p=o.x2,O=o.y2,L()},this.setCoordinates({x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2}),this.getBounds=function(){return{minX:Math.min(E,p),minY:Math.min(e,O),maxX:Math.max(E,p),maxY:Math.max(e,O)}},this.pointOnPath=function(o,d){if(o===0&&!d)return{x:E,y:e};if(o===1&&!d)return{x:p,y:O};var l=d?o>0?o:b+o:o*b;return nt.pointOnLine({x:E,y:e},{x:p,y:O},l)},this.gradientAtPoint=function(o){return D},this.pointAlongPathFrom=function(o,d,l){var C=this.pointOnPath(o,l),w=d<=0?{x:E,y:e}:{x:p,y:O};return d<=0&&Math.abs(d)>1&&(d*=-1),nt.pointOnLine(C,w,d)};var G=function(o,d,l){return l>=Math.min(o,d)&&l<=Math.max(o,d)},B=function(o,d,l){return Math.abs(l-o)<Math.abs(l-d)?o:d};this.findClosestPointOnPath=function(o,d){var l={d:1/0,x:null,y:null,l:null,x1:E,x2:p,y1:e,y2:O};if(D===0)l.y=e,l.x=G(E,p,o)?o:B(E,p,o);else if(D===1/0||D===-1/0)l.x=E,l.y=G(e,O,d)?d:B(e,O,d);else{var C=e-D*E,w=d-T*o,h=(w-C)/(D-T),j=D*h+C;l.x=G(E,p,h)?h:B(E,p,h),l.y=G(e,O,j)?j:B(e,O,j)}var g=nt.lineLength([l.x,l.y],[E,e]);return l.d=nt.lineLength([o,d],[l.x,l.y]),l.l=g/b,l};var S=function(o,d,l){return l>d?d<=o&&o<=l:d>=o&&o>=l},A=S;this.lineIntersection=function(o,d,l,C){var w=Math.abs(nt.gradient({x:o,y:d},{x:l,y:C})),h=Math.abs(D),j=h===1/0?E:e-h*E,g=[],P=w===1/0?o:d-w*o;if(w!==h)if(w===1/0&&h===0)A(o,E,p)&&A(e,d,C)&&(g=[o,e]);else if(w===0&&h===1/0)A(d,e,O)&&A(E,o,l)&&(g=[E,d]);else{var c,_;w===1/0?(c=o,A(c,E,p)&&(_=h*o+j,A(_,d,C)&&(g=[c,_]))):w===0?(_=d,A(_,e,O)&&(c=(d-j)/h,A(c,o,l)&&(g=[c,_]))):(c=(P-j)/(h-w),_=h*c+j,A(c,E,p)&&A(_,e,O)&&(g=[c,_]))}return g},this.boxIntersection=function(o,d,l,C){var w=[];return w.push.apply(w,this.lineIntersection(o,d,o+l,d)),w.push.apply(w,this.lineIntersection(o+l,d,o+l,d+C)),w.push.apply(w,this.lineIntersection(o+l,d+C,o,d+C)),w.push.apply(w,this.lineIntersection(o,d+C,o,d)),w},this.boundingBoxIntersection=function(o){return this.boxIntersection(o.x,o.y,o.w,o.h)}},Arc:function(i){f.Segments.AbstractSegment.apply(this,arguments);var b=function(B,S){return nt.theta([i.cx,i.cy],[B,S])},D=function(B,S){if(B.anticlockwise){var A=B.startAngle<B.endAngle?B.startAngle+T:B.startAngle,o=Math.abs(A-B.endAngle);return A-o*S}else{var d=B.endAngle<B.startAngle?B.endAngle+T:B.endAngle,l=Math.abs(d-B.startAngle);return B.startAngle+l*S}},T=2*Math.PI;this.radius=i.r,this.anticlockwise=i.ac,this.type="Arc",i.startAngle&&i.endAngle?(this.startAngle=i.startAngle,this.endAngle=i.endAngle,this.x1=i.cx+this.radius*Math.cos(i.startAngle),this.y1=i.cy+this.radius*Math.sin(i.startAngle),this.x2=i.cx+this.radius*Math.cos(i.endAngle),this.y2=i.cy+this.radius*Math.sin(i.endAngle)):(this.startAngle=b(i.x1,i.y1),this.endAngle=b(i.x2,i.y2),this.x1=i.x1,this.y1=i.y1,this.x2=i.x2,this.y2=i.y2),this.endAngle<0&&(this.endAngle+=T),this.startAngle<0&&(this.startAngle+=T);var E=this.endAngle<this.startAngle?this.endAngle+T:this.endAngle;this.sweep=Math.abs(E-this.startAngle),this.anticlockwise&&(this.sweep=T-this.sweep);var p=2*Math.PI*this.radius,e=this.sweep/T,O=p*e;this.getLength=function(){return O},this.getBounds=function(){return{minX:i.cx-i.r,maxX:i.cx+i.r,minY:i.cy-i.r,maxY:i.cy+i.r}};var L=1e-10,G=function(B){var S=Math.floor(B),A=Math.ceil(B);return B-S<L?S:A-B<L?A:B};this.pointOnPath=function(B,S){if(B===0)return{x:this.x1,y:this.y1,theta:this.startAngle};if(B===1)return{x:this.x2,y:this.y2,theta:this.endAngle};S&&(B=B/O);var A=D(this,B),o=i.cx+i.r*Math.cos(A),d=i.cy+i.r*Math.sin(A);return{x:G(o),y:G(d),theta:A}},this.gradientAtPoint=function(B,S){var A=this.pointOnPath(B,S),o=nt.normal([i.cx,i.cy],[A.x,A.y]);return!this.anticlockwise&&(o===1/0||o===-1/0)&&(o*=-1),o},this.pointAlongPathFrom=function(B,S,A){var o=this.pointOnPath(B,A),d=S/p*2*Math.PI,l=this.anticlockwise?-1:1,C=o.theta+l*d,w=i.cx+this.radius*Math.cos(C),h=i.cy+this.radius*Math.sin(C);return{x:w,y:h}}},Bezier:function(i){this.curve=[{x:i.x1,y:i.y1},{x:i.cp1x,y:i.cp1y},{x:i.cp2x,y:i.cp2y},{x:i.x2,y:i.y2}];var b=function(O){return O[0].x===O[1].x&&O[0].y===O[1].y},D=function(O,L){return Math.sqrt(Math.pow(O.x-L.x,2)+Math.pow(O.y-L.y,2))},T=function(O){var L={x:0,y:0};if(O===0)return this.curve[0];var G=this.curve.length-1;if(O===1)return this.curve[G];var B=this.curve,S=1-O;if(G===0)return this.curve[0];if(G===1)return{x:S*B[0].x+O*B[1].x,y:S*B[0].y+O*B[1].y};if(G<4){var A=S*S,o=O*O,d=0,l,C,w;return G===2?(B=[B[0],B[1],B[2],L],l=A,C=2*(S*O),w=o):G===3&&(l=A*S,C=3*(A*O),w=3*(S*o),d=O*o),{x:l*B[0].x+C*B[1].x+w*B[2].x+d*B[3].x,y:l*B[0].y+C*B[1].y+w*B[2].y+d*B[3].y}}else return L}.bind(this),E=function(O){var L=[];O--;for(var G=0;G<=O;G++)L.push(T(G/O));return L},p=function(){b(this.curve)&&(this.length=0);var O=16,L=E(O);this.length=0;for(var G=0;G<O-1;G++){var B=L[G],S=L[G+1];this.length+=D(B,S)}}.bind(this);f.Segments.AbstractSegment.apply(this,arguments),this.bounds={minX:Math.min(i.x1,i.x2,i.cp1x,i.cp2x),minY:Math.min(i.y1,i.y2,i.cp1y,i.cp2y),maxX:Math.max(i.x1,i.x2,i.cp1x,i.cp2x),maxY:Math.max(i.y1,i.y2,i.cp1y,i.cp2y)},this.type="Bezier",p();var e=function(O,L,G){return G&&(L=$.jsBezier.locationAlongCurveFrom(O,L>0?0:1,L)),L};this.pointOnPath=function(O,L){return O=e(this.curve,O,L),$.jsBezier.pointOnCurve(this.curve,O)},this.gradientAtPoint=function(O,L){return O=e(this.curve,O,L),$.jsBezier.gradientAtPoint(this.curve,O)},this.pointAlongPathFrom=function(O,L,G){return O=e(this.curve,O,G),$.jsBezier.pointAlongCurveFrom(this.curve,O,L)},this.getLength=function(){return this.length},this.getBounds=function(){return this.bounds},this.findClosestPointOnPath=function(O,L){var G=$.jsBezier.nearestPointOnCurve({x:O,y:L},this.curve);return{d:Math.sqrt(Math.pow(G.point.x-O,2)+Math.pow(G.point.y-L,2)),x:G.point.x,y:G.point.y,l:1-G.location,s:this}},this.lineIntersection=function(O,L,G,B){return $.jsBezier.lineIntersection(O,L,G,B,this.curve)}}},f.SegmentRenderer={getPath:function(i,b){return{Straight:function(D){var T=i.getCoordinates();return(D?"M "+T.x1+" "+T.y1+" ":"")+"L "+T.x2+" "+T.y2},Bezier:function(D){var T=i.params;return(D?"M "+T.x2+" "+T.y2+" ":"")+"C "+T.cp2x+" "+T.cp2y+" "+T.cp1x+" "+T.cp1y+" "+T.x1+" "+T.y1},Arc:function(D){var T=i.params,E=i.sweep>Math.PI?1:0,p=i.anticlockwise?0:1;return(D?"M"+i.x1+" "+i.y1+" ":"")+"A "+i.radius+" "+T.r+" 0 "+E+","+p+" "+i.x2+" "+i.y2}}[i.type](b)}};var K=function(){this.resetBounds=function(){this.bounds={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}},this.resetBounds()};f.Connectors.AbstractConnector=function(i){K.apply(this,arguments);var b=[],D=0,T=[],E=[],p=i.stub||0,e=V.isArray(p)?p[0]:p,O=V.isArray(p)?p[1]:p,L=i.gap||0,G=V.isArray(L)?L[0]:L,B=V.isArray(L)?L[1]:L,S=null,A=null;this.getPathData=function(){for(var h="",j=0;j<b.length;j++)h+=f.SegmentRenderer.getPath(b[j],j===0),h+=" ";return h},this.findSegmentForPoint=function(h,j){for(var g={d:1/0,s:null,x:null,y:null,l:null},P=0;P<b.length;P++){var c=b[P].findClosestPointOnPath(h,j);c.d<g.d&&(g.d=c.d,g.l=c.l,g.x=c.x,g.y=c.y,g.s=b[P],g.x1=c.x1,g.x2=c.x2,g.y1=c.y1,g.y2=c.y2,g.index=P,g.connectorLocation=T[P][0]+c.l*(T[P][1]-T[P][0]))}return g},this.lineIntersection=function(h,j,g,P){for(var c=[],_=0;_<b.length;_++)c.push.apply(c,b[_].lineIntersection(h,j,g,P));return c},this.boxIntersection=function(h,j,g,P){for(var c=[],_=0;_<b.length;_++)c.push.apply(c,b[_].boxIntersection(h,j,g,P));return c},this.boundingBoxIntersection=function(h){for(var j=[],g=0;g<b.length;g++)j.push.apply(j,b[g].boundingBoxIntersection(h));return j};var o=function(){for(var h=0,j=0;j<b.length;j++){var g=b[j].getLength();E[j]=g/D,T[j]=[h,h+=g/D]}},d=function(h,j){var g,P,c;if(j&&(h=h>0?h/D:(D+h)/D),h===1)g=b.length-1,c=1;else if(h===0)c=0,g=0;else if(h>=.5){for(g=0,c=0,P=T.length-1;P>-1;P--)if(T[P][1]>=h&&T[P][0]<=h){g=P,c=(h-T[P][0])/E[P];break}}else for(g=T.length-1,c=1,P=0;P<T.length;P++)if(T[P][1]>=h){g=P,c=(h-T[P][0])/E[P];break}return{segment:b[g],proportion:c,index:g}},l=function(h,j,g){if(!(g.x1===g.x2&&g.y1===g.y2)){var P=new f.Segments[j](g);b.push(P),D+=P.getLength(),h.updateBounds(P)}},C=function(){D=b.length=T.length=E.length=0};this.setSegments=function(h){S=[],D=0;for(var j=0;j<h.length;j++)S.push(h[j]),D+=h[j].getLength()},this.getLength=function(){return D};var w=function(h){this.strokeWidth=h.strokeWidth;var j=nt.quadrant(h.sourcePos,h.targetPos),g=h.targetPos[0]<h.sourcePos[0],P=h.targetPos[1]<h.sourcePos[1],c=h.strokeWidth||1,_=h.sourceEndpoint.anchor.getOrientation(h.sourceEndpoint),R=h.targetEndpoint.anchor.getOrientation(h.targetEndpoint),U=g?h.targetPos[0]:h.sourcePos[0],Y=P?h.targetPos[1]:h.sourcePos[1],n=Math.abs(h.targetPos[0]-h.sourcePos[0]),a=Math.abs(h.targetPos[1]-h.sourcePos[1]);if(_[0]===0&&_[1]===0||R[0]===0&&R[1]===0){var t=n>a?0:1,v=[1,0][t];_=[],R=[],_[t]=h.sourcePos[t]>h.targetPos[t]?-1:1,R[t]=h.sourcePos[t]>h.targetPos[t]?1:-1,_[v]=0,R[v]=0}var m=g?n+G*_[0]:G*_[0],I=P?a+G*_[1]:G*_[1],F=g?B*R[0]:n+B*R[0],X=P?B*R[1]:a+B*R[1],N=_[0]*R[0]+_[1]*R[1],W={sx:m,sy:I,tx:F,ty:X,lw:c,xSpan:Math.abs(F-m),ySpan:Math.abs(X-I),mx:(m+F)/2,my:(I+X)/2,so:_,to:R,x:U,y:Y,w:n,h:a,segment:j,startStubX:m+_[0]*e,startStubY:I+_[1]*e,endStubX:F+R[0]*O,endStubY:X+R[1]*O,isXGreaterThanStubTimes2:Math.abs(m-F)>e+O,isYGreaterThanStubTimes2:Math.abs(I-X)>e+O,opposite:N===-1,perpendicular:N===0,orthogonal:N===1,sourceAxis:_[0]===0?"y":"x",points:[U,Y,n,a,m,I,F,X],stubs:[e,O]};return W.anchorOrientation=W.opposite?"opposite":W.orthogonal?"orthogonal":"perpendicular",W};return this.getSegments=function(){return b},this.updateBounds=function(h){var j=h.getBounds();this.bounds.minX=Math.min(this.bounds.minX,j.minX),this.bounds.maxX=Math.max(this.bounds.maxX,j.maxX),this.bounds.minY=Math.min(this.bounds.minY,j.minY),this.bounds.maxY=Math.max(this.bounds.maxY,j.maxY)},this.pointOnPath=function(h,j){var g=d(h,j);return g.segment&&g.segment.pointOnPath(g.proportion,!1)||[0,0]},this.gradientAtPoint=function(h,j){var g=d(h,j);return g.segment&&g.segment.gradientAtPoint(g.proportion,!1)||0},this.pointAlongPathFrom=function(h,j,g){var P=d(h,g);return P.segment&&P.segment.pointAlongPathFrom(P.proportion,j,!1)||[0,0]},this.compute=function(h){A=w.call(this,h),C(),this._compute(A,h),this.x=A.points[0],this.y=A.points[1],this.w=A.points[2],this.h=A.points[3],this.segment=A.segment,o()},{addSegment:l,prepareCompute:w,sourceStub:e,targetStub:O,maxStub:Math.max(e,O),sourceGap:G,targetGap:B,maxGap:Math.max(G,B)}},V.extend(f.Connectors.AbstractConnector,K),f.Endpoints.AbstractEndpoint=function(i){K.apply(this,arguments);var b=this.compute=function(D,T,E,p){var e=this._compute.apply(this,arguments);return this.x=e[0],this.y=e[1],this.w=e[2],this.h=e[3],this.bounds.minX=this.x,this.bounds.minY=this.y,this.bounds.maxX=this.x+this.w,this.bounds.maxY=this.y+this.h,e};return{compute:b,cssClass:i.cssClass}},V.extend(f.Endpoints.AbstractEndpoint,K),f.Endpoints.Dot=function(i){this.type="Dot",f.Endpoints.AbstractEndpoint.apply(this,arguments),i=i||{},this.radius=i.radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this._compute=function(b,D,T,E){this.radius=T.radius||this.radius;var p=b[0]-this.radius,e=b[1]-this.radius,O=this.radius*2,L=this.radius*2;if(T.stroke){var G=T.strokeWidth||1;p-=G,e-=G,O+=G*2,L+=G*2}return[p,e,O,L,this.radius]}},V.extend(f.Endpoints.Dot,f.Endpoints.AbstractEndpoint),f.Endpoints.Rectangle=function(i){this.type="Rectangle",f.Endpoints.AbstractEndpoint.apply(this,arguments),i=i||{},this.width=i.width||20,this.height=i.height||20,this._compute=function(b,D,T,E){var p=T.width||this.width,e=T.height||this.height,O=b[0]-p/2,L=b[1]-e/2;return[O,L,p,e]}},V.extend(f.Endpoints.Rectangle,f.Endpoints.AbstractEndpoint);var Q=function(i){f.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.displayElements=[]};V.extend(Q,f.jsPlumbUIComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(i){this._jsPlumb.displayElements.push(i)}}),f.Endpoints.Image=function(i){this.type="Image",Q.apply(this,arguments),f.Endpoints.AbstractEndpoint.apply(this,arguments);var b=i.onload,D=i.src||i.url,T=i.cssClass?" "+i.cssClass:"";this._jsPlumb.img=new Image,this._jsPlumb.ready=!1,this._jsPlumb.initialized=!1,this._jsPlumb.deleted=!1,this._jsPlumb.widthToUse=i.width,this._jsPlumb.heightToUse=i.height,this._jsPlumb.endpoint=i.endpoint,this._jsPlumb.img.onload=function(){this._jsPlumb!=null&&(this._jsPlumb.ready=!0,this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width,this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height,b&&b(this))}.bind(this),this._jsPlumb.endpoint.setImage=function(E,p){var e=E.constructor===String?E:E.src;b=p,this._jsPlumb.img.src=e,this.canvas!=null&&this.canvas.setAttribute("src",this._jsPlumb.img.src)}.bind(this),this._jsPlumb.endpoint.setImage(D,b),this._compute=function(E,p,e,O){return this.anchorPoint=E,this._jsPlumb.ready?[E[0]-this._jsPlumb.widthToUse/2,E[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]:[0,0,0,0]},this.canvas=f.createElement("img",{position:"absolute",margin:0,padding:0,outline:0},this._jsPlumb.instance.endpointClass+T),this._jsPlumb.widthToUse&&this.canvas.setAttribute("width",this._jsPlumb.widthToUse),this._jsPlumb.heightToUse&&this.canvas.setAttribute("height",this._jsPlumb.heightToUse),this._jsPlumb.instance.appendElement(this.canvas),this.actuallyPaint=function(E,p,e){if(!this._jsPlumb.deleted){this._jsPlumb.initialized||(this.canvas.setAttribute("src",this._jsPlumb.img.src),this.appendDisplayElement(this.canvas),this._jsPlumb.initialized=!0);var O=this.anchorPoint[0]-this._jsPlumb.widthToUse/2,L=this.anchorPoint[1]-this._jsPlumb.heightToUse/2;V.sizeElement(this.canvas,O,L,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse)}},this.paint=function(E,p){this._jsPlumb!=null&&(this._jsPlumb.ready?this.actuallyPaint(E,p):$.setTimeout(function(){this.paint(E,p)}.bind(this),200))}},V.extend(f.Endpoints.Image,[Q,f.Endpoints.AbstractEndpoint],{cleanup:function(i){i&&(this._jsPlumb.deleted=!0,this.canvas&&this.canvas.parentNode.removeChild(this.canvas),this.canvas=null)}}),f.Endpoints.Blank=function(i){f.Endpoints.AbstractEndpoint.apply(this,arguments),this.type="Blank",Q.apply(this,arguments),this._compute=function(D,T,E,p){return[D[0],D[1],10,0]};var b=i.cssClass?" "+i.cssClass:"";this.canvas=f.createElement("div",{display:"block",width:"1px",height:"1px",background:"transparent",position:"absolute"},this._jsPlumb.instance.endpointClass+b),this._jsPlumb.instance.appendElement(this.canvas),this.paint=function(D,T){V.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}},V.extend(f.Endpoints.Blank,[f.Endpoints.AbstractEndpoint,Q],{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}),f.Endpoints.Triangle=function(i){this.type="Triangle",f.Endpoints.AbstractEndpoint.apply(this,arguments);var b=this;i=i||{},i.width=i.width||55,i.height=i.height||55,this.width=i.width,this.height=i.height,this._compute=function(D,T,E,p){var e=E.width||b.width,O=E.height||b.height,L=D[0]-e/2,G=D[1]-O/2;return[L,G,e,O]}};var u=f.Overlays.AbstractOverlay=function(i){this.visible=!0,this.isAppendedAtTopLevel=!0,this.component=i.component,this.loc=i.location==null?.5:i.location,this.endpointLoc=i.endpointLocation==null?[.5,.5]:i.endpointLocation,this.visible=i.visible!==!1};u.prototype={cleanup:function(i){i&&(this.component=null,this.canvas=null,this.endpointLoc=null)},reattach:function(i,b){},setVisible:function(i){this.visible=i,this.component.repaint()},isVisible:function(){return this.visible},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},incrementLocation:function(i){this.loc+=i,this.component.repaint()},setLocation:function(i){this.loc=i,this.component.repaint()},getLocation:function(){return this.loc},updateFrom:function(){}},f.Overlays.Arrow=function(i){this.type="Arrow",u.apply(this,arguments),this.isAppendedAtTopLevel=!1,i=i||{};var b=this;this.length=i.length||20,this.width=i.width||20,this.id=i.id,this.direction=(i.direction||1)<0?-1:1;var D=i.paintStyle||{"stroke-width":1},T=i.foldback||.623;this.computeMaxSize=function(){return b.width*1.5},this.elementCreated=function(E,p){if(this.path=E,i.events)for(var e in i.events)f.on(E,e,i.events[e])},this.draw=function(E,p){var e,O,L,G,B;if(E.pointAlongPathFrom){if(V.isString(this.loc)||this.loc>1||this.loc<0){var S=parseInt(this.loc,10),A=this.loc<0?1:0;e=E.pointAlongPathFrom(A,S,!1),O=E.pointAlongPathFrom(A,S-this.direction*this.length/2,!1),L=nt.pointOnLine(e,O,this.length)}else if(this.loc===1){if(e=E.pointOnPath(this.loc),O=E.pointAlongPathFrom(this.loc,-this.length),L=nt.pointOnLine(e,O,this.length),this.direction===-1){var o=L;L=e,e=o}}else if(this.loc===0){if(L=E.pointOnPath(this.loc),O=E.pointAlongPathFrom(this.loc,this.length),e=nt.pointOnLine(L,O,this.length),this.direction===-1){var d=L;L=e,e=d}}else e=E.pointAlongPathFrom(this.loc,this.direction*this.length/2),O=E.pointOnPath(this.loc),L=nt.pointOnLine(e,O,this.length);G=nt.perpendicularLineTo(e,L,this.width),B=nt.pointOnLine(e,L,T*this.length);var l={hxy:e,tail:G,cxy:B},C=D.stroke||p.stroke,w=D.fill||p.stroke,h=D.strokeWidth||p.strokeWidth;return{component:E,d:l,"stroke-width":h,stroke:C,fill:w,minX:Math.min(e.x,G[0].x,G[1].x),maxX:Math.max(e.x,G[0].x,G[1].x),minY:Math.min(e.y,G[0].y,G[1].y),maxY:Math.max(e.y,G[0].y,G[1].y)}}else return{component:E,minX:0,maxX:0,minY:0,maxY:0}}},V.extend(f.Overlays.Arrow,u,{updateFrom:function(i){this.length=i.length||this.length,this.width=i.width||this.width,this.direction=i.direction!=null?i.direction:this.direction,this.foldback=i.foldback||this.foldback},cleanup:function(){this.path&&this.path.parentNode&&this.path.parentNode.removeChild(this.path)}}),f.Overlays.PlainArrow=function(i){i=i||{};var b=f.extend(i,{foldback:1});f.Overlays.Arrow.call(this,b),this.type="PlainArrow"},V.extend(f.Overlays.PlainArrow,f.Overlays.Arrow),f.Overlays.Diamond=function(i){i=i||{};var b=i.length||40,D=f.extend(i,{length:b/2,foldback:2});f.Overlays.Arrow.call(this,D),this.type="Diamond"},V.extend(f.Overlays.Diamond,f.Overlays.Arrow);var M=function(i,b){return(i._jsPlumb.cachedDimensions==null||b)&&(i._jsPlumb.cachedDimensions=i.getDimensions()),i._jsPlumb.cachedDimensions},s=function(i){f.jsPlumbUIComponent.apply(this,arguments),u.apply(this,arguments);var b=this.fire;this.fire=function(){b.apply(this,arguments),this.component&&this.component.fire.apply(this.component,arguments)},this.detached=!1,this.id=i.id,this._jsPlumb.div=null,this._jsPlumb.initialised=!1,this._jsPlumb.component=i.component,this._jsPlumb.cachedDimensions=null,this._jsPlumb.create=i.create,this._jsPlumb.initiallyInvisible=i.visible===!1,this.getElement=function(){if(this._jsPlumb.div==null){var D=this._jsPlumb.div=f.getElement(this._jsPlumb.create(this._jsPlumb.component));D.style.position="absolute",jsPlumb.addClass(D,this._jsPlumb.instance.overlayClass+" "+(this.cssClass?this.cssClass:i.cssClass?i.cssClass:"")),this._jsPlumb.instance.appendElement(D),this._jsPlumb.instance.getId(D),this.canvas=D;var T="translate(-50%, -50%)";D.style.webkitTransform=T,D.style.mozTransform=T,D.style.msTransform=T,D.style.oTransform=T,D.style.transform=T,D._jsPlumb=this,i.visible===!1&&(D.style.display="none")}return this._jsPlumb.div},this.draw=function(D,T,E){var p=M(this);if(p!=null&&p.length===2){var e={x:0,y:0};if(E)e={x:E[0],y:E[1]};else if(D.pointOnPath){var O=this.loc,L=!1;(V.isString(this.loc)||this.loc<0||this.loc>1)&&(O=parseInt(this.loc,10),L=!0),e=D.pointOnPath(O,L)}else{var G=this.loc.constructor===Array?this.loc:this.endpointLoc;e={x:G[0]*D.w,y:G[1]*D.h}}var B=e.x-p[0]/2,S=e.y-p[1]/2;return{component:D,d:{minx:B,miny:S,td:p,cxy:e},minX:B,maxX:B+p[0],minY:S,maxY:S+p[1]}}else return{minX:0,maxX:0,minY:0,maxY:0}}};V.extend(s,[f.jsPlumbUIComponent,u],{getDimensions:function(){return[1,1]},setVisible:function(i){this._jsPlumb.div&&(this._jsPlumb.div.style.display=i?"block":"none",i&&this._jsPlumb.initiallyInvisible&&(M(this,!0),this.component.repaint(),this._jsPlumb.initiallyInvisible=!1))},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(i){i?this._jsPlumb.div!=null&&(this._jsPlumb.div._jsPlumb=null,this._jsPlumb.instance.removeElement(this._jsPlumb.div)):(this._jsPlumb&&this._jsPlumb.div&&this._jsPlumb.div.parentNode&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div),this.detached=!0)},reattach:function(i,b){this._jsPlumb.div!=null&&i.getContainer().appendChild(this._jsPlumb.div),this.detached=!1},computeMaxSize:function(){var i=M(this);return Math.max(i[0],i[1])},paint:function(i,b){this._jsPlumb.initialised||(this.getElement(),i.component.appendDisplayElement(this._jsPlumb.div),this._jsPlumb.initialised=!0,this.detached&&this._jsPlumb.div.parentNode.removeChild(this._jsPlumb.div)),this._jsPlumb.div.style.left=i.component.x+i.d.minx+"px",this._jsPlumb.div.style.top=i.component.y+i.d.miny+"px"}}),f.Overlays.Custom=function(i){this.type="Custom",s.apply(this,arguments)},V.extend(f.Overlays.Custom,s),f.Overlays.GuideLines=function(){var i=this;i.length=50,i.strokeWidth=5,this.type="GuideLines",u.apply(this,arguments),f.jsPlumbUIComponent.apply(this,arguments),this.draw=function(b,D){var T=b.pointAlongPathFrom(i.loc,i.length/2),E=b.pointOnPath(i.loc),p=nt.pointOnLine(T,E,i.length),e=nt.perpendicularLineTo(T,p,40),O=nt.perpendicularLineTo(p,T,20);return{connector:b,head:T,tail:p,headLine:O,tailLine:e,minX:Math.min(T.x,p.x,O[0].x,O[1].x),minY:Math.min(T.y,p.y,O[0].y,O[1].y),maxX:Math.max(T.x,p.x,O[0].x,O[1].x),maxY:Math.max(T.y,p.y,O[0].y,O[1].y)}}},f.Overlays.Label=function(i){this.labelStyle=i.labelStyle,this.cssClass=this.labelStyle!=null?this.labelStyle.cssClass:null;var b=f.extend({create:function(){return f.createElement("div")}},i);if(f.Overlays.Custom.call(this,b),this.type="Label",this.label=i.label||"",this.labelText=null,this.labelStyle){var D=this.getElement();if(this.labelStyle.font=this.labelStyle.font||"12px sans-serif",D.style.font=this.labelStyle.font,D.style.color=this.labelStyle.color||"black",this.labelStyle.fill&&(D.style.background=this.labelStyle.fill),this.labelStyle.borderWidth>0){var T=this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black";D.style.border=this.labelStyle.borderWidth+"px solid "+T}this.labelStyle.padding&&(D.style.padding=this.labelStyle.padding)}},V.extend(f.Overlays.Label,f.Overlays.Custom,{cleanup:function(i){i&&(this.div=null,this.label=null,this.labelText=null,this.cssClass=null,this.labelStyle=null)},getLabel:function(){return this.label},setLabel:function(i){this.label=i,this.labelText=null,this.clearCachedDimensions(),this.update(),this.component.repaint()},getDimensions:function(){return this.update(),s.prototype.getDimensions.apply(this,arguments)},update:function(){if(typeof this.label=="function"){var i=this.label(this);this.getElement().innerHTML=i.replace(/\r\n/g,"<br/>")}else this.labelText==null&&(this.labelText=this.label,this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>"))},updateFrom:function(i){i.label!=null&&this.setLabel(i.label)}})}.call(typeof window!="undefined"?window:kt),function(){var $=this,f=$.jsPlumbUtil,V=$.jsPlumbInstance,nt="jtk-group-collapsed",K="jtk-group-expanded",Q="[jtk-group-content]",u="elementDraggable",M="stop",s="revert",i="_groupManager",b="_jsPlumbGroup",D="_jsPlumbGroupDrag",T="group:addMember",E="group:removeMember",p="group:add",e="group:remove",O="group:expand",L="group:collapse",G="groupDragStop",B="connectionMoved",S="internal.connectionDetached",A="removeAll",o="orphanAll",d="show",l="hide",C=function(h){var j={},g={},P={},c=this;function _(t,v){for(var m=h.getContainer(),I=!1;!I;){if(t==null||t===m)return!1;if(t===v)return!0;t=t.parentNode}}h.bind("connection",function(t){var v=h.getGroupFor(t.source),m=h.getGroupFor(t.target);v!=null&&m!=null&&v===m?(g[t.connection.id]=v,P[t.connection.id]=v):(v!=null&&(f.suggest(v.connections.source,t.connection),g[t.connection.id]=v),m!=null&&(f.suggest(m.connections.target,t.connection),P[t.connection.id]=m))});function R(t){delete t.proxies;var v=g[t.id],m;v!=null&&(m=function(I){return I.id===t.id},f.removeWithFunction(v.connections.source,m),f.removeWithFunction(v.connections.target,m),delete g[t.id]),v=P[t.id],v!=null&&(m=function(I){return I.id===t.id},f.removeWithFunction(v.connections.source,m),f.removeWithFunction(v.connections.target,m),delete P[t.id])}h.bind(S,function(t){R(t.connection)}),h.bind(B,function(t){var v=t.index===0?g:P,m=v[t.connection.id];if(m){var I=m.connections[t.index===0?"source":"target"],F=I.indexOf(t.connection);F!==-1&&I.splice(F,1)}}),this.addGroup=function(t){h.addClass(t.getEl(),K),j[t.id]=t,t.manager=this,a(t),h.fire(p,{group:t})},this.addToGroup=function(t,v,m){if(t=this.getGroup(t),t){var I=t.getEl();if(v._isJsPlumbGroup)return;var F=v._jsPlumbGroup;if(F!==t){h.removeFromDragSelection(v);var X=h.getOffset(v,!0),N=t.collapsed?h.getOffset(I,!0):h.getOffset(t.getDragArea(),!0);F!=null&&(F.remove(v,!1,m,!1,t),c.updateConnectionsForGroup(F)),t.add(v,m);var W=function(rt,pt){var dt=pt===0?1:0;rt.each(function(lt){lt.setVisible(!1),lt.endpoints[dt].element._jsPlumbGroup===t?(lt.endpoints[dt].setVisible(!1),n(lt,dt,t)):(lt.endpoints[pt].setVisible(!1),Y(lt,pt,t))})};t.collapsed&&(W(h.select({source:v}),0),W(h.select({target:v}),1));var ot=h.getId(v);h.dragManager.setParent(v,ot,I,h.getId(I),X);var st={left:X.left-N.left,top:X.top-N.top};if(h.setPosition(v,st),h.dragManager.revalidateParent(v,ot,X),c.updateConnectionsForGroup(t),h.revalidate(ot),!m){var it={group:t,el:v,pos:st};F&&(it.sourceGroup=F),h.fire(T,it)}}}},this.removeFromGroup=function(t,v,m){if(t=this.getGroup(t),t){if(t.collapsed){var I=function(F,X){for(var N=0;N<F.length;N++){var W=F[N];if(W.proxies){for(var ot=0;ot<W.proxies.length;ot++)if(W.proxies[ot]!=null){var st=W.proxies[ot].originalEp.element;(st===v||_(st,v))&&n(W,X,t)}}}};I(t.connections.source.slice(),0),I(t.connections.target.slice(),1)}t.remove(v,null,m)}},this.getGroup=function(t){var v=t;if(f.isString(t)&&(v=j[t],v==null))throw new TypeError("No such group ["+t+"]");return v},this.getGroups=function(){var t=[];for(var v in j)t.push(j[v]);return t},this.removeGroup=function(t,v,m,I){t=this.getGroup(t),this.expandGroup(t,!0);var F=t[v?A:o](m,I);return h.remove(t.getEl()),delete j[t.id],delete h._groups[t.id],h.fire(e,{group:t}),F},this.removeAllGroups=function(t,v,m){for(var I in j)this.removeGroup(j[I],t,v,m)};function U(t,v){for(var m=t.getEl().querySelectorAll(".jtk-managed"),I=0;I<m.length;I++)h[v?d:l](m[I],!0)}var Y=function(t,v,m){var I=t.endpoints[v===0?1:0].element;if(!(I[b]&&!I[b].shouldProxy()&&I[b].collapsed)){var F=m.getEl(),X=h.getId(F);h.proxyConnection(t,v,F,X,function(N,W){return m.getEndpoint(N,W)},function(N,W){return m.getAnchor(N,W)})}};this.collapseGroup=function(t){if(t=this.getGroup(t),!(t==null||t.collapsed)){var v=t.getEl();if(U(t,!1),t.shouldProxy()){var m=function(I,F){for(var X=0;X<I.length;X++){var N=I[X];Y(N,F,t)}};m(t.connections.source,0),m(t.connections.target,1)}t.collapsed=!0,h.removeClass(v,K),h.addClass(v,nt),h.revalidate(v),h.fire(L,{group:t})}};var n=function(t,v,m){h.unproxyConnection(t,v,h.getId(m.getEl()))};this.expandGroup=function(t,v){if(t=this.getGroup(t),!(t==null||!t.collapsed)){var m=t.getEl();if(U(t,!0),t.shouldProxy()){var I=function(F,X){for(var N=0;N<F.length;N++){var W=F[N];n(W,X,t)}};I(t.connections.source,0),I(t.connections.target,1)}t.collapsed=!1,h.addClass(m,K),h.removeClass(m,nt),h.revalidate(m),this.repaintGroup(t),v||h.fire(O,{group:t})}},this.repaintGroup=function(t){t=this.getGroup(t);for(var v=t.getMembers(),m=0;m<v.length;m++)h.revalidate(v[m])};function a(t){for(var v=t.getMembers().slice(),m=[],I=0;I<v.length;I++)Array.prototype.push.apply(m,v[I].querySelectorAll(".jtk-managed"));Array.prototype.push.apply(v,m);var F=h.getConnections({source:v,scope:"*"},!0),X=h.getConnections({target:v,scope:"*"},!0),N={};t.connections.source.length=0,t.connections.target.length=0;var W=function(ot){for(var st=0;st<ot.length;st++)if(!N[ot[st].id]){N[ot[st].id]=!0;var it=h.getGroupFor(ot[st].source),rt=h.getGroupFor(ot[st].target);it===t?(rt!==t&&t.connections.source.push(ot[st]),g[ot[st].id]=t):rt===t&&(t.connections.target.push(ot[st]),P[ot[st].id]=t)}};W(F),W(X)}this.updateConnectionsForGroup=a,this.refreshAllGroups=function(){for(var t in j)a(j[t]),h.dragManager.updateOffsets(h.getId(j[t].getEl()))}},w=function(h,j){var g=this,P=j.el;this.getEl=function(){return P},this.id=j.id||f.uuid(),P._isJsPlumbGroup=!0;var c=this.getDragArea=function(){var rt=h.getSelector(P,Q);return rt&&rt.length>0?rt[0]:P},_=j.ghost===!0,R=_||j.constrain===!0,U=j.revert!==!1,Y=j.orphan===!0,n=j.prune===!0,a=j.dropOverride===!0,t=j.proxied!==!1,v=[];if(this.connections={source:[],target:[],internal:[]},this.getAnchor=function(rt,pt){return j.anchor||"Continuous"},this.getEndpoint=function(rt,pt){return j.endpoint||["Dot",{radius:10}]},this.collapsed=!1,j.draggable!==!1){var m={drag:function(){for(var rt=0;rt<v.length;rt++)h.draw(v[rt])},stop:function(rt){h.fire(G,jsPlumb.extend(rt,{group:g}))},scope:D};j.dragOptions&&$.jsPlumb.extend(m,j.dragOptions),h.draggable(j.el,m)}j.droppable!==!1&&h.droppable(j.el,{drop:function(rt){var pt=rt.drag.el;if(!pt._isJsPlumbGroup){var dt=pt._jsPlumbGroup;if(dt!==g){if(dt!=null&&dt.overrideDrop(pt,g))return;h.getGroupManager().addToGroup(g,pt,!1)}}}});var I=function(rt,pt){for(var dt=rt.nodeType==null?rt:[rt],lt=0;lt<dt.length;lt++)pt(dt[lt])};this.overrideDrop=function(rt,pt){return a&&(U||n||Y)},this.add=function(rt,pt){var dt=c();I(rt,function(lt){if(lt._jsPlumbGroup!=null){if(lt._jsPlumbGroup===g)return;lt._jsPlumbGroup.remove(lt,!0,pt,!1)}lt._jsPlumbGroup=g,v.push(lt),h.isAlreadyDraggable(lt)&&it(lt),lt.parentNode!==dt&&dt.appendChild(lt)}),h.getGroupManager().updateConnectionsForGroup(g)},this.remove=function(rt,pt,dt,lt,bt){I(rt,function(gt){if(gt._jsPlumbGroup===g){if(delete gt._jsPlumbGroup,f.removeWithFunction(v,function(q){return q===gt}),pt)try{g.getDragArea().removeChild(gt)}catch(q){jsPlumbUtil.log("Could not remove element from Group "+q)}if(st(gt),!dt){var Z={group:g,el:gt};bt&&(Z.targetGroup=bt),h.fire(E,Z)}}}),lt||h.getGroupManager().updateConnectionsForGroup(g)},this.removeAll=function(rt,pt){for(var dt=0,lt=v.length;dt<lt;dt++){var bt=v[0];g.remove(bt,rt,pt,!0),h.remove(bt,!0)}v.length=0,h.getGroupManager().updateConnectionsForGroup(g)},this.orphanAll=function(){for(var rt={},pt=0;pt<v.length;pt++){var dt=N(v[pt]);rt[dt[0]]=dt[1]}return v.length=0,rt},this.getMembers=function(){return v},P[b]=this,h.bind(u,function(rt){rt.el._jsPlumbGroup===this&&it(rt.el)}.bind(this));function F(rt){return rt.offsetParent}function X(rt,pt){var dt=F(rt),lt=h.getSize(dt),bt=h.getSize(rt),gt=pt[0],Z=gt+bt[0],q=pt[1],J=q+bt[1];return Z>0&&gt<lt[0]&&J>0&&q<lt[1]}function N(rt){var pt=h.getId(rt),dt=h.getOffset(rt);return rt.parentNode.removeChild(rt),h.getContainer().appendChild(rt),h.setPosition(rt,dt),st(rt),h.dragManager.clearParent(rt,pt),[pt,dt]}function W(rt){var pt=[];function dt(bt,gt,Z){var q=null;if(!X(bt,[gt,Z])){var J=bt._jsPlumbGroup;n?h.remove(bt):q=N(bt),J.remove(bt)}return q}for(var lt=0;lt<rt.selection.length;lt++)pt.push(dt(rt.selection[lt][0],rt.selection[lt][1].left,rt.selection[lt][1].top));return pt.length===1?pt[0]:pt}function ot(rt){var pt=h.getId(rt);h.revalidate(rt),h.dragManager.revalidateParent(rt,pt)}function st(rt){!rt._katavorioDrag||((n||Y)&&rt._katavorioDrag.off(M,W),!n&&!Y&&U&&(rt._katavorioDrag.off(s,ot),rt._katavorioDrag.setRevert(null)))}function it(rt){!rt._katavorioDrag||((n||Y)&&rt._katavorioDrag.on(M,W),R&&rt._katavorioDrag.setConstrain(!0),_&&rt._katavorioDrag.setUseGhostProxy(!0),!n&&!Y&&U&&(rt._katavorioDrag.on(s,ot),rt._katavorioDrag.setRevert(function(pt,dt){return!X(pt,dt)})))}this.shouldProxy=function(){return t},h.getGroupManager().addGroup(this)};V.prototype.addGroup=function(h){var j=this;if(j._groups=j._groups||{},j._groups[h.id]!=null)throw new TypeError("cannot create Group ["+h.id+"]; a Group with that ID exists");if(h.el[b]!=null)throw new TypeError("cannot create Group ["+h.id+"]; the given element is already a Group");var g=new w(j,h);return j._groups[g.id]=g,h.collapsed&&this.collapseGroup(g),g},V.prototype.addToGroup=function(h,j,g){var P=function(_){var R=this.getId(_);this.manage(R,_),this.getGroupManager().addToGroup(h,_,g)}.bind(this);if(Array.isArray(j))for(var c=0;c<j.length;c++)P(j[c]);else P(j)},V.prototype.removeFromGroup=function(h,j,g){this.getGroupManager().removeFromGroup(h,j,g),this.getContainer().appendChild(j)},V.prototype.removeGroup=function(h,j,g,P){return this.getGroupManager().removeGroup(h,j,g,P)},V.prototype.removeAllGroups=function(h,j,g){this.getGroupManager().removeAllGroups(h,j,g)},V.prototype.getGroup=function(h){return this.getGroupManager().getGroup(h)},V.prototype.getGroups=function(){return this.getGroupManager().getGroups()},V.prototype.expandGroup=function(h){this.getGroupManager().expandGroup(h)},V.prototype.collapseGroup=function(h){this.getGroupManager().collapseGroup(h)},V.prototype.repaintGroup=function(h){this.getGroupManager().repaintGroup(h)},V.prototype.toggleGroup=function(h){h=this.getGroupManager().getGroup(h),h!=null&&this.getGroupManager()[h.collapsed?"expandGroup":"collapseGroup"](h)},V.prototype.getGroupManager=function(){var h=this[i];return h==null&&(h=this[i]=new C(this)),h},V.prototype.removeGroupManager=function(){delete this[i]},V.prototype.getGroupFor=function(h){if(h=this.getElement(h),h){for(var j=this.getContainer(),g=!1,P=null;!g;)h==null||h===j?g=!0:h[b]?(P=h[b],g=!0):h=h.parentNode;return P}}}.call(typeof window!="undefined"?window:kt),function(){var $=this,f=$.jsPlumb,V=$.jsPlumbUtil,nt="Straight",K="Arc",Q=function(u){this.type="Flowchart",u=u||{},u.stub=u.stub==null?30:u.stub;var M,s=f.Connectors.AbstractConnector.apply(this,arguments),i=u.midpoint==null||isNaN(u.midpoint)?.5:u.midpoint,b=u.alwaysRespectStubs===!0,D=null,T=null,E=u.cornerRadius!=null?u.cornerRadius:0;u.loopbackRadius;var p=function(S){return S<0?-1:S===0?0:1},e=function(S){return[p(S[2]-S[0]),p(S[3]-S[1])]},O=function(S,A,o,d){if(!(D===A&&T===o)){var l=D==null?d.sx:D,C=T==null?d.sy:T,w=l===A?"v":"h";D=A,T=o,S.push([l,C,A,o,w])}},L=function(S){return Math.sqrt(Math.pow(S[0]-S[2],2)+Math.pow(S[1]-S[3],2))},G=function(S){var A=[];return A.push.apply(A,S),A},B=function(S,A,o){for(var d=null,l,C,w,h=0;h<A.length-1;h++){if(d=d||G(A[h]),l=G(A[h+1]),C=e(d),w=e(l),E>0&&d[4]!==l[4]){var j=Math.min(L(d),L(l)),g=Math.min(E,j/2);d[2]-=C[0]*g,d[3]-=C[1]*g,l[0]+=w[0]*g,l[1]+=w[1]*g;var P=C[1]===w[0]&&w[0]===1||C[1]===w[0]&&w[0]===0&&C[0]!==w[1]||C[1]===w[0]&&w[0]===-1,c=l[1]>d[3]?1:-1,_=l[0]>d[2]?1:-1,R=c===_,U=R&&P||!R&&!P?l[0]:d[2],Y=R&&P||!R&&!P?d[3]:l[1];s.addSegment(S,nt,{x1:d[0],y1:d[1],x2:d[2],y2:d[3]}),s.addSegment(S,K,{r:g,x1:d[2],y1:d[3],x2:l[0],y2:l[1],cx:U,cy:Y,ac:P})}else{var n=d[2]===d[0]?0:d[2]>d[0]?o.lw/2:-(o.lw/2),a=d[3]===d[1]?0:d[3]>d[1]?o.lw/2:-(o.lw/2);s.addSegment(S,nt,{x1:d[0]-n,y1:d[1]-a,x2:d[2]+n,y2:d[3]+a})}d=l}l!=null&&s.addSegment(S,nt,{x1:l[0],y1:l[1],x2:l[2],y2:l[3]})};this.midpoint=i,this._compute=function(S,A){M=[],D=null,T=null;var o=function(){return[S.startStubX,S.startStubY,S.endStubX,S.endStubY]},d={perpendicular:o,orthogonal:o,opposite:function(a){var t=S,v=a==="x"?0:1,m={x:function(){return t.so[v]===1&&(t.startStubX>t.endStubX&&t.tx>t.startStubX||t.sx>t.endStubX&&t.tx>t.sx)||t.so[v]===-1&&(t.startStubX<t.endStubX&&t.tx<t.startStubX||t.sx<t.endStubX&&t.tx<t.sx)},y:function(){return t.so[v]===1&&(t.startStubY>t.endStubY&&t.ty>t.startStubY||t.sy>t.endStubY&&t.ty>t.sy)||t.so[v]===-1&&(t.startStubY<t.endStubY&&t.ty<t.startStubY||t.sy<t.endStubY&&t.ty<t.sy)}};return!b&&m[a]()?{x:[(S.sx+S.tx)/2,S.startStubY,(S.sx+S.tx)/2,S.endStubY],y:[S.startStubX,(S.sy+S.ty)/2,S.endStubX,(S.sy+S.ty)/2]}[a]:[S.startStubX,S.startStubY,S.endStubX,S.endStubY]}},l=d[S.anchorOrientation](S.sourceAxis),C=S.sourceAxis==="x"?0:1,w=S.sourceAxis==="x"?1:0,h=l[C],j=l[w],g=l[C+2],P=l[w+2];O(M,l[0],l[1],S);var c=S.startStubX+(S.endStubX-S.startStubX)*i,_=S.startStubY+(S.endStubY-S.startStubY)*i,R={x:[0,1],y:[1,0]},U={perpendicular:function(a){var t=S,v={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},m={x:[[t.startStubX,t.endStubX],null,[t.endStubX,t.startStubX]],y:[[t.startStubY,t.endStubY],null,[t.endStubY,t.startStubY]]},I={x:[[c,t.startStubY],[c,t.endStubY]],y:[[t.startStubX,_],[t.endStubX,_]]},F={x:[[t.endStubX,t.startStubY]],y:[[t.startStubX,t.endStubY]]},X={x:[[t.startStubX,t.endStubY],[t.endStubX,t.endStubY]],y:[[t.endStubX,t.startStubY],[t.endStubX,t.endStubY]]},N={x:[[t.startStubX,_],[t.endStubX,_],[t.endStubX,t.endStubY]],y:[[c,t.startStubY],[c,t.endStubY],[t.endStubX,t.endStubY]]},W={x:[t.startStubY,t.endStubY],y:[t.startStubX,t.endStubX]},ot=R[a][0],st=R[a][1],it=t.so[ot]+1,rt=t.to[st]+1,pt=t.to[st]===-1&&W[a][1]<W[a][0]||t.to[st]===1&&W[a][1]>W[a][0],dt=m[a][it][0],lt=m[a][it][1],bt=v[a][it][rt];if(t.segment===bt[3]||t.segment===bt[2]&&pt)return I[a];if(t.segment===bt[2]&&lt<dt)return F[a];if(t.segment===bt[2]&&lt>=dt||t.segment===bt[1]&&!pt)return N[a];if(t.segment===bt[0]||t.segment===bt[1]&&pt)return X[a]},orthogonal:function(a,t,v,m,I){var F=S,X={x:F.so[0]===-1?Math.min(t,m):Math.max(t,m),y:F.so[1]===-1?Math.min(t,m):Math.max(t,m)}[a];return{x:[[X,v],[X,I],[m,I]],y:[[v,X],[I,X],[I,m]]}[a]},opposite:function(a,t,v,m){var I=S,F={x:"y",y:"x"}[a],X={x:"height",y:"width"}[a],N=I["is"+a.toUpperCase()+"GreaterThanStubTimes2"];if(A.sourceEndpoint.elementId===A.targetEndpoint.elementId){var W=v+(1-A.sourceEndpoint.anchor[F])*A.sourceInfo[X]+s.maxStub;return{x:[[t,W],[m,W]],y:[[W,t],[W,m]]}[a]}else{if(!N||I.so[C]===1&&t>m||I.so[C]===-1&&t<m)return{x:[[t,_],[m,_]],y:[[c,t],[c,m]]}[a];if(I.so[C]===1&&t<m||I.so[C]===-1&&t>m)return{x:[[c,I.sy],[c,I.ty]],y:[[I.sx,_],[I.tx,_]]}[a]}}},Y=U[S.anchorOrientation](S.sourceAxis,h,j,g,P);if(Y)for(var n=0;n<Y.length;n++)O(M,Y[n][0],Y[n][1],S);O(M,l[2],l[3],S),O(M,S.tx,S.ty,S),B(this,M,S)}};f.Connectors.Flowchart=Q,V.extend(f.Connectors.Flowchart,f.Connectors.AbstractConnector)}.call(typeof window!="undefined"?window:kt),function(){var $=this,f=$.jsPlumb,V=$.jsPlumbUtil;f.Connectors.AbstractBezierConnector=function(K){K=K||{};var Q=K.showLoopback!==!1;K.curviness;var u=K.margin||5;K.proximityLimit;var M=K.orientation&&K.orientation==="clockwise",s=K.loopbackRadius||25,i;return this._compute=function(b,D){var T=D.sourcePos,E=D.targetPos,p=Math.abs(T[0]-E[0]),e=Math.abs(T[1]-E[1]);if(!Q||D.sourceEndpoint.elementId!==D.targetEndpoint.elementId)this._computeBezier(b,D,T,E,p,e);else{var O=D.sourcePos[0],L=D.sourcePos[1]-u,G=O,B=L-s,S=G-s,A=B-s;p=2*s,e=2*s,b.points[0]=S,b.points[1]=A,b.points[2]=p,b.points[3]=e,i.addSegment(this,"Arc",{loopback:!0,x1:O-S+4,y1:L-A,startAngle:0,endAngle:2*Math.PI,r:s,ac:!M,x2:O-S-4,y2:L-A,cx:G-S,cy:B-A})}},i=f.Connectors.AbstractConnector.apply(this,arguments),i},V.extend(f.Connectors.AbstractBezierConnector,f.Connectors.AbstractConnector);var nt=function(K){K=K||{},this.type="Bezier";var Q=f.Connectors.AbstractBezierConnector.apply(this,arguments),u=K.curviness||150,M=10;this.getCurviness=function(){return u},this._findControlPoint=function(s,i,b,D,T,E,p){var e=E[0]!==p[0]||E[1]===p[1],O=[];return e?(p[0]===0?O.push(b[0]<i[0]?s[0]+M:s[0]-M):O.push(s[0]+u*p[0]),p[1]===0?O.push(b[1]<i[1]?s[1]+M:s[1]-M):O.push(s[1]+u*E[1])):(E[0]===0?O.push(i[0]<b[0]?s[0]+M:s[0]-M):O.push(s[0]-u*E[0]),E[1]===0?O.push(i[1]<b[1]?s[1]+M:s[1]-M):O.push(s[1]+u*p[1])),O},this._computeBezier=function(s,i,b,D,T,E){var p,e,O=b[0]<D[0]?T:0,L=b[1]<D[1]?E:0,G=b[0]<D[0]?0:T,B=b[1]<D[1]?0:E;p=this._findControlPoint([O,L],b,D,i.sourceEndpoint,i.targetEndpoint,s.so,s.to),e=this._findControlPoint([G,B],D,b,i.targetEndpoint,i.sourceEndpoint,s.to,s.so),Q.addSegment(this,"Bezier",{x1:O,y1:L,x2:G,y2:B,cp1x:p[0],cp1y:p[1],cp2x:e[0],cp2y:e[1]})}};f.Connectors.Bezier=nt,V.extend(nt,f.Connectors.AbstractBezierConnector)}.call(typeof window!="undefined"?window:kt),function(){var $=this,f=$.jsPlumb,V=$.jsPlumbUtil,nt=function(u,M,s,i){return u<=s&&i<=M?1:u<=s&&M<=i?2:s<=u&&i>=M?3:4},K=function(u,M,s,i,b,D,T,E,p){if(E<=p)return[u,M];if(s===1)return i[3]<=0&&b[3]>=1?[u+(i[2]<.5?-1*D:D),M]:i[2]>=1&&b[2]<=0?[u,M+(i[3]<.5?-1*T:T)]:[u+-1*D,M+-1*T];if(s===2)return i[3]>=1&&b[3]<=0?[u+(i[2]<.5?-1*D:D),M]:i[2]>=1&&b[2]<=0?[u,M+(i[3]<.5?-1*T:T)]:[u+D,M+-1*T];if(s===3)return i[3]>=1&&b[3]<=0?[u+(i[2]<.5?-1*D:D),M]:i[2]<=0&&b[2]>=1?[u,M+(i[3]<.5?-1*T:T)]:[u+-1*D,M+-1*T];if(s===4)return i[3]<=0&&b[3]>=1?[u+(i[2]<.5?-1*D:D),M]:i[2]<=0&&b[2]>=1?[u,M+(i[3]<.5?-1*T:T)]:[u+D,M+-1*T]},Q=function(u){u=u||{},this.type="StateMachine";var M=f.Connectors.AbstractBezierConnector.apply(this,arguments),s=u.curviness||10,i=u.margin||5,b=u.proximityLimit||80;u.orientation&&u.orientation;var D;this._computeBezier=function(T,E,p,e,O,L){var G=E.sourcePos[0]<E.targetPos[0]?0:O,B=E.sourcePos[1]<E.targetPos[1]?0:L,S=E.sourcePos[0]<E.targetPos[0]?O:0,A=E.sourcePos[1]<E.targetPos[1]?L:0;E.sourcePos[2]===0&&(G-=i),E.sourcePos[2]===1&&(G+=i),E.sourcePos[3]===0&&(B-=i),E.sourcePos[3]===1&&(B+=i),E.targetPos[2]===0&&(S-=i),E.targetPos[2]===1&&(S+=i),E.targetPos[3]===0&&(A-=i),E.targetPos[3]===1&&(A+=i);var o=(G+S)/2,d=(B+A)/2,l=nt(G,B,S,A),C=Math.sqrt(Math.pow(S-G,2)+Math.pow(A-B,2)),w,h,j,g;D=K(o,d,l,E.sourcePos,E.targetPos,s,s,C,b),w=D[0],h=D[0],j=D[1],g=D[1],M.addSegment(this,"Bezier",{x1:S,y1:A,x2:G,y2:B,cp1x:w,cp1y:j,cp2x:h,cp2y:g})}};f.Connectors.StateMachine=Q,V.extend(Q,f.Connectors.AbstractBezierConnector)}.call(typeof window!="undefined"?window:kt),function(){var $=this,f=$.jsPlumb,V=$.jsPlumbUtil,nt="Straight",K=function(Q){this.type=nt;var u=f.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(M,s){u.addSegment(this,nt,{x1:M.sx,y1:M.sy,x2:M.startStubX,y2:M.startStubY}),u.addSegment(this,nt,{x1:M.startStubX,y1:M.startStubY,x2:M.endStubX,y2:M.endStubY}),u.addSegment(this,nt,{x1:M.endStubX,y1:M.endStubY,x2:M.tx,y2:M.ty})}};f.Connectors.Straight=K,V.extend(K,f.Connectors.AbstractConnector)}.call(typeof window!="undefined"?window:kt),function(){var $=this,f=$.jsPlumb,V=$.jsPlumbUtil,nt={"stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},K="stroke-dasharray",Q="dashstyle",u="linearGradient",M="radialGradient",s="defs",i="fill",b="stop",D="stroke",T="stroke-width",E="style",p="none",e="jsplumb_gradient_",O="strokeWidth",L={svg:"http://www.w3.org/2000/svg"},G=function(g,P){for(var c in P)g.setAttribute(c,""+P[c])},B=function(g,P){return P=P||{},P.version="1.1",P.xmlns=L.svg,f.createElementNS(L.svg,g,null,null,P)},S=function(g){return"position:absolute;left:"+g[0]+"px;top:"+g[1]+"px"},A=function(g){for(var P=g.querySelectorAll(" defs,linearGradient,radialGradient"),c=0;c<P.length;c++)P[c].parentNode.removeChild(P[c])},o=function(g,P,c,_,R){var U=e+R._jsPlumb.instance.idstamp();A(g);var Y;c.gradient.offset?Y=B(M,{id:U}):Y=B(u,{id:U,gradientUnits:"userSpaceOnUse"});var n=B(s);g.appendChild(n),n.appendChild(Y);for(var a=0;a<c.gradient.stops.length;a++){var t=R.segment===1||R.segment===2?a:c.gradient.stops.length-1-a,v=c.gradient.stops[t][1],m=B(b,{offset:Math.floor(c.gradient.stops[a][0]*100)+"%","stop-color":v});Y.appendChild(m)}var I=c.stroke?D:i;P.setAttribute(I,"url(#"+U+")")},d=function(g,P,c,_,R){if(P.setAttribute(i,c.fill?c.fill:p),P.setAttribute(D,c.stroke?c.stroke:p),c.gradient?o(g,P,c,_,R):(A(g),P.setAttribute(E,"")),c.strokeWidth&&P.setAttribute(T,c.strokeWidth),c[Q]&&c[O]&&!c[K]){var U=c[Q].indexOf(",")===-1?" ":",",Y=c[Q].split(U),n="";Y.forEach(function(t){n+=Math.floor(t*c.strokeWidth)+U}),P.setAttribute(K,n)}else c[K]&&P.setAttribute(K,c[K]);for(var a in nt)c[a]&&P.setAttribute(nt[a],c[a])},l=function(g,P,c){g.childNodes.length>c?g.insertBefore(P,g.childNodes[c]):g.appendChild(P)};V.svg={node:B,attr:G,pos:S};var C=function(g){var P=g.pointerEventsSpec||"all",c={};f.jsPlumbUIComponent.apply(this,g.originalArgs),this.canvas=null,this.path=null,this.svg=null,this.bgCanvas=null;var _=g.cssClass+" "+(g.originalArgs[0].cssClass||""),R={style:"",width:0,height:0,"pointer-events":P,position:"absolute"};this.svg=B("svg",R),g.useDivWrapper?(this.canvas=f.createElement("div",{position:"absolute"}),V.sizeElement(this.canvas,0,0,1,1),this.canvas.className=_):(G(this.svg,{class:_}),this.canvas=this.svg),g._jsPlumb.appendElement(this.canvas,g.originalArgs[0].parent),g.useDivWrapper&&this.canvas.appendChild(this.svg);var U=[this.canvas];return this.getDisplayElements=function(){return U},this.appendDisplayElement=function(Y){U.push(Y)},this.paint=function(Y,n,a){if(Y!=null){var t=[this.x,this.y],v=[this.w,this.h],m;a!=null&&(a.xmin<0&&(t[0]+=a.xmin),a.ymin<0&&(t[1]+=a.ymin),v[0]=a.xmax+(a.xmin<0?-a.xmin:0),v[1]=a.ymax+(a.ymin<0?-a.ymin:0)),g.useDivWrapper?(V.sizeElement(this.canvas,t[0],t[1],v[0]>0?v[0]:1,v[1]>0?v[1]:1),t[0]=0,t[1]=0,m=S([0,0])):m=S([t[0],t[1]]),c.paint.apply(this,arguments),G(this.svg,{style:m,width:v[0]||1,height:v[1]||1})}},{renderer:c}};V.extend(C,f.jsPlumbUIComponent,{cleanup:function(g){g||this.typeId==null?(this.canvas&&(this.canvas._jsPlumb=null),this.svg&&(this.svg._jsPlumb=null),this.bgCanvas&&(this.bgCanvas._jsPlumb=null),this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.svg=null,this.canvas=null,this.path=null,this.group=null,this._jsPlumb=null):(this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.bgCanvas.parentNode.removeChild(this.bgCanvas))},reattach:function(g){var P=g.getContainer();this.canvas&&this.canvas.parentNode==null&&P.appendChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode==null&&P.appendChild(this.bgCanvas)},setVisible:function(g){this.canvas&&(this.canvas.style.display=g?"block":"none")}}),f.ConnectorRenderers.svg=function(g){var P=this,c=C.apply(this,[{cssClass:g._jsPlumb.connectorClass,originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:g._jsPlumb}]);c.renderer.paint=function(_,R,U){var Y=P.getSegments(),n="",a=[0,0];if(U.xmin<0&&(a[0]=-U.xmin),U.ymin<0&&(a[1]=-U.ymin),Y.length>0){n=P.getPathData();var t={d:n,transform:"translate("+a[0]+","+a[1]+")","pointer-events":g["pointer-events"]||"visibleStroke"},v=null,m=[P.x,P.y,P.w,P.h];if(_.outlineStroke){var I=_.outlineWidth||1,F=_.strokeWidth+2*I;v=f.extend({},_),delete v.gradient,v.stroke=_.outlineStroke,v.strokeWidth=F,P.bgPath==null?(P.bgPath=B("path",t),f.addClass(P.bgPath,f.connectorOutlineClass),l(P.svg,P.bgPath,0)):G(P.bgPath,t),d(P.svg,P.bgPath,v,m,P)}P.path==null?(P.path=B("path",t),l(P.svg,P.path,_.outlineStroke?1:0)):G(P.path,t),d(P.svg,P.path,_,m,P)}}},V.extend(f.ConnectorRenderers.svg,C);var w=f.SvgEndpoint=function(g){var P=C.apply(this,[{cssClass:g._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:g._jsPlumb}]);P.renderer.paint=function(c){var _=f.extend({},c);_.outlineStroke&&(_.stroke=_.outlineStroke),this.node==null?(this.node=this.makeNode(_),this.svg.appendChild(this.node)):this.updateNode!=null&&this.updateNode(this.node),d(this.svg,this.node,_,[this.x,this.y,this.w,this.h],this),S(this.node,[this.x,this.y])}.bind(this)};V.extend(w,C),f.Endpoints.svg.Dot=function(){f.Endpoints.Dot.apply(this,arguments),w.apply(this,arguments),this.makeNode=function(g){return B("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})},this.updateNode=function(g){G(g,{cx:this.w/2,cy:this.h/2,r:this.radius})}},V.extend(f.Endpoints.svg.Dot,[f.Endpoints.Dot,w]),f.Endpoints.svg.Rectangle=function(){f.Endpoints.Rectangle.apply(this,arguments),w.apply(this,arguments),this.makeNode=function(g){return B("rect",{width:this.w,height:this.h})},this.updateNode=function(g){G(g,{width:this.w,height:this.h})}},V.extend(f.Endpoints.svg.Rectangle,[f.Endpoints.Rectangle,w]),f.Endpoints.svg.Image=f.Endpoints.Image,f.Endpoints.svg.Blank=f.Endpoints.Blank,f.Overlays.svg.Label=f.Overlays.Label,f.Overlays.svg.Custom=f.Overlays.Custom;var h=function(g,P){g.apply(this,P),f.jsPlumbUIComponent.apply(this,P),this.isAppendedAtTopLevel=!1,this.path=null,this.paint=function(_,R){if(_.component.svg&&R){this.path==null&&(this.path=B("path",{"pointer-events":"all"}),_.component.svg.appendChild(this.path),this.elementCreated&&this.elementCreated(this.path,_.component),this.canvas=_.component.svg);var U=P&&P.length===1&&P[0].cssClass||"",Y=[0,0];R.xmin<0&&(Y[0]=-R.xmin),R.ymin<0&&(Y[1]=-R.ymin),G(this.path,{d:c(_.d),class:U,stroke:_.stroke?_.stroke:null,fill:_.fill?_.fill:null,transform:"translate("+Y[0]+","+Y[1]+")"})}};var c=function(_){return isNaN(_.cxy.x)||isNaN(_.cxy.y)?"":"M"+_.hxy.x+","+_.hxy.y+" L"+_.tail[0].x+","+_.tail[0].y+" L"+_.cxy.x+","+_.cxy.y+" L"+_.tail[1].x+","+_.tail[1].y+" L"+_.hxy.x+","+_.hxy.y};this.transfer=function(_){_.canvas&&this.path&&this.path.parentNode&&(this.path.parentNode.removeChild(this.path),_.canvas.appendChild(this.path))}},j={cleanup:function(g){this.path!=null&&(g?this._jsPlumb.instance.removeElement(this.path):this.path.parentNode&&this.path.parentNode.removeChild(this.path))},reattach:function(g,P){this.path&&P.canvas&&P.canvas.appendChild(this.path)},setVisible:function(g){this.path!=null&&(this.path.style.display=g?"block":"none")}};V.extend(h,[f.jsPlumbUIComponent,f.Overlays.AbstractOverlay]),f.Overlays.svg.Arrow=function(){h.apply(this,[f.Overlays.Arrow,arguments])},V.extend(f.Overlays.svg.Arrow,[f.Overlays.Arrow,h],j),f.Overlays.svg.PlainArrow=function(){h.apply(this,[f.Overlays.PlainArrow,arguments])},V.extend(f.Overlays.svg.PlainArrow,[f.Overlays.PlainArrow,h],j),f.Overlays.svg.Diamond=function(){h.apply(this,[f.Overlays.Diamond,arguments])},V.extend(f.Overlays.svg.Diamond,[f.Overlays.Diamond,h],j),f.Overlays.svg.GuideLines=function(){var g=null,P=this,c,_;f.Overlays.GuideLines.apply(this,arguments),this.paint=function(U,Y){g==null&&(g=B("path"),U.connector.svg.appendChild(g),P.attachListeners(g,U.connector),P.attachListeners(g,P),c=B("path"),U.connector.svg.appendChild(c),P.attachListeners(c,U.connector),P.attachListeners(c,P),_=B("path"),U.connector.svg.appendChild(_),P.attachListeners(_,U.connector),P.attachListeners(_,P));var n=[0,0];Y.xmin<0&&(n[0]=-Y.xmin),Y.ymin<0&&(n[1]=-Y.ymin),G(g,{d:R(U.head,U.tail),stroke:"red",fill:null,transform:"translate("+n[0]+","+n[1]+")"}),G(c,{d:R(U.tailLine[0],U.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+n[0]+","+n[1]+")"}),G(_,{d:R(U.headLine[0],U.headLine[1]),stroke:"green",fill:null,transform:"translate("+n[0]+","+n[1]+")"})};var R=function(U,Y){return"M "+U.x+","+U.y+" L"+Y.x+","+Y.y}},V.extend(f.Overlays.svg.GuideLines,f.Overlays.GuideLines)}.call(typeof window!="undefined"?window:kt),function(){var $=this,f=$.jsPlumb,V=$.jsPlumbUtil,nt=$.Katavorio,K=$.Biltong,Q=function(o){var d=o._mottle;return d||(d=o._mottle=new $.Mottle),d},u=function(o,d){d=d||"main";var l="_katavorio_"+d,C=o[l],w=o.getEventManager();return C||(C=new nt({bind:w.on,unbind:w.off,getSize:f.getSize,getConstrainingRectangle:function(h){return[h.parentNode.scrollWidth,h.parentNode.scrollHeight]},getPosition:function(h,j){var g=o.getOffset(h,j,h._katavorioDrag?h.offsetParent:null);return[g.left,g.top]},setPosition:function(h,j){h.style.left=j[0]+"px",h.style.top=j[1]+"px"},addClass:f.addClass,removeClass:f.removeClass,intersects:K.intersects,indexOf:function(h,j){return h.indexOf(j)},scope:o.getDefaultScope(),css:{noSelect:o.dragSelectClass,droppable:"jtk-droppable",draggable:"jtk-draggable",drag:"jtk-drag",selected:"jtk-drag-selected",active:"jtk-drag-active",hover:"jtk-drag-hover",ghostProxy:"jtk-ghost-proxy"}}),C.setZoom(o.getZoom()),o[l]=C,o.bind("zoom",C.setZoom)),C},M=function(o){var d=o.el._jsPlumbDragOptions,l=!0;return d.canDrag&&(l=d.canDrag()),l&&(this.setHoverSuspended(!0),this.select({source:o.el}).addClass(this.elementDraggingClass+" "+this.sourceElementDraggingClass,!0),this.select({target:o.el}).addClass(this.elementDraggingClass+" "+this.targetElementDraggingClass,!0),this.setConnectionBeingDragged(!0)),l},s=function(o){var d=this.getUIPosition(arguments,this.getZoom());if(d!=null){var l=o.el._jsPlumbDragOptions;this.draw(o.el,d,null,!0),l._dragging&&this.addClass(o.el,"jtk-dragged"),l._dragging=!0}},i=function(o){for(var d=o.selection,l,C=function(h){var j;h[1]!=null&&(l=this.getUIPosition([{el:h[2].el,pos:[h[1].left,h[1].top]}]),j=this.draw(h[2].el,l)),h[0]._jsPlumbDragOptions!=null&&delete h[0]._jsPlumbDragOptions._dragging,this.removeClass(h[0],"jtk-dragged"),this.select({source:h[2].el}).removeClass(this.elementDraggingClass+" "+this.sourceElementDraggingClass,!0),this.select({target:h[2].el}).removeClass(this.elementDraggingClass+" "+this.targetElementDraggingClass,!0),o.e._drawResult=o.e._drawResult||{c:[],e:[],a:[]},Array.prototype.push.apply(o.e._drawResult.c,j.c),Array.prototype.push.apply(o.e._drawResult.e,j.e),Array.prototype.push.apply(o.e._drawResult.a,j.a),this.getDragManager().dragEnded(h[2].el)}.bind(this),w=0;w<d.length;w++)C(d[w]);this.setHoverSuspended(!1),this.setConnectionBeingDragged(!1)},b=function(o,d){var l=function(C){if(d[C]!=null)if(V.isString(d[C])){var w=d[C].match(/-=/)?-1:1,h=d[C].substring(2);return o[C]+w*h}else return d[C];else return o[C]};return[l("left"),l("top")]},D=function(o,d){if(d==null)return[0,0];var l=O(d),C=e(l,0);return[C[o+"X"],C[o+"Y"]]},T=D.bind(this,"page"),E=D.bind(this,"screen"),p=D.bind(this,"client"),e=function(o,d){return o.item?o.item(d):o[d]},O=function(o){return o.touches&&o.touches.length>0?o.touches:o.changedTouches&&o.changedTouches.length>0?o.changedTouches:o.targetTouches&&o.targetTouches.length>0?o.targetTouches:[o]},L=function(o){var d={},l=[],C={},w={},h={};this.register=function(j){var g=o.getId(j),P;d[g]||(d[g]=j,l.push(j),C[g]={});var c=function(_){if(_){for(var R=0;R<_.childNodes.length;R++)if(_.childNodes[R].nodeType!==3&&_.childNodes[R].nodeType!==8){var U=jsPlumb.getElement(_.childNodes[R]),Y=o.getId(_.childNodes[R],null,!0);if(Y&&w[Y]&&w[Y]>0){P||(P=o.getOffset(j));var n=o.getOffset(U);C[g][Y]={id:Y,offset:{left:n.left-P.left,top:n.top-P.top}},h[Y]=g}c(_.childNodes[R])}}};c(j)},this.updateOffsets=function(j,g){if(j!=null){g=g||{};var P=jsPlumb.getElement(j),c=o.getId(P),_=C[c],R;if(_){for(var U in _)if(_.hasOwnProperty(U)){var Y=jsPlumb.getElement(U),n=g[U]||o.getOffset(Y);if(Y.offsetParent==null&&C[c][U]!=null)continue;R||(R=o.getOffset(P)),C[c][U]={id:U,offset:{left:n.left-R.left,top:n.top-R.top}},h[U]=c}}}},this.endpointAdded=function(j,g){g=g||o.getId(j);var P=document.body,c=j.parentNode;for(w[g]=w[g]?w[g]+1:1;c!=null&&c!==P;){var _=o.getId(c,null,!0);if(_&&d[_]){var R=o.getOffset(c);if(C[_][g]==null){var U=o.getOffset(j);C[_][g]={id:g,offset:{left:U.left-R.left,top:U.top-R.top}},h[g]=_}break}c=c.parentNode}},this.endpointDeleted=function(j){if(w[j.elementId]&&(w[j.elementId]--,w[j.elementId]<=0))for(var g in C)C.hasOwnProperty(g)&&C[g]&&(delete C[g][j.elementId],delete h[j.elementId])},this.changeId=function(j,g){C[g]=C[j],C[j]={},h[g]=h[j],h[j]=null},this.getElementsForDraggable=function(j){return C[j]},this.elementRemoved=function(j){var g=h[j];g&&(C[g]&&delete C[g][j],delete h[j])},this.reset=function(){d={},l=[],C={},w={}},this.dragEnded=function(j){if(j.offsetParent!=null){var g=o.getId(j),P=h[g];P&&this.updateOffsets(P)}},this.setParent=function(j,g,P,c,_){var R=h[g];C[c]||(C[c]={});var U=o.getOffset(P),Y=_||o.getOffset(j);R&&C[R]&&delete C[R][g],C[c][g]={id:g,offset:{left:Y.left-U.left,top:Y.top-U.top}},h[g]=c},this.clearParent=function(j,g){var P=h[g];P&&(delete C[P][g],delete h[g])},this.revalidateParent=function(j,g,P){var c=h[g];if(c){var _={};_[g]=P,this.updateOffsets(c,_),o.revalidate(c)}},this.getDragAncestor=function(j){var g=jsPlumb.getElement(j),P=o.getId(g),c=h[P];return c?jsPlumb.getElement(c):null}},G=function(o,d,l){d=V.fastTrim(d),typeof o.className.baseVal!="undefined"?o.className.baseVal=d:o.className=d;try{var C=o.classList;if(C!=null){for(;C.length>0;)C.remove(C.item(0));for(var w=0;w<l.length;w++)l[w]&&C.add(l[w])}}catch(h){V.log("JSPLUMB: cannot set class list",h)}},B=function(o){return typeof o.className.baseVal=="undefined"?o.className:o.className.baseVal},S=function(o,d,l){d=d==null?[]:V.isArray(d)?d:d.split(/\s+/),l=l==null?[]:V.isArray(l)?l:l.split(/\s+/);var C=B(o),w=C.split(/\s+/),h=function(j,g){for(var P=0;P<g.length;P++)if(j)w.indexOf(g[P])===-1&&w.push(g[P]);else{var c=w.indexOf(g[P]);c!==-1&&w.splice(c,1)}};h(!0,d),h(!1,l),G(o,w.join(" "),w)};$.jsPlumb.extend($.jsPlumbInstance.prototype,{headless:!1,pageLocation:T,screenLocation:E,clientLocation:p,getDragManager:function(){return this.dragManager==null&&(this.dragManager=new L(this)),this.dragManager},recalculateOffsets:function(o){this.getDragManager().updateOffsets(o)},createElement:function(o,d,l,C){return this.createElementNS(null,o,d,l,C)},createElementNS:function(o,d,l,C,w){var h=o==null?document.createElement(d):document.createElementNS(o,d),j;l=l||{};for(j in l)h.style[j]=l[j];C&&(h.className=C),w=w||{};for(j in w)h.setAttribute(j,""+w[j]);return h},getAttribute:function(o,d){return o.getAttribute!=null?o.getAttribute(d):null},setAttribute:function(o,d,l){o.setAttribute!=null&&o.setAttribute(d,l)},setAttributes:function(o,d){for(var l in d)d.hasOwnProperty(l)&&o.setAttribute(l,d[l])},appendToRoot:function(o){document.body.appendChild(o)},getRenderModes:function(){return["svg"]},getClass:B,addClass:function(o,d){jsPlumb.each(o,function(l){S(l,d)})},hasClass:function(o,d){return o=jsPlumb.getElement(o),o.classList?o.classList.contains(d):B(o).indexOf(d)!==-1},removeClass:function(o,d){jsPlumb.each(o,function(l){S(l,null,d)})},toggleClass:function(o,d){jsPlumb.hasClass(o,d)?jsPlumb.removeClass(o,d):jsPlumb.addClass(o,d)},updateClasses:function(o,d,l){jsPlumb.each(o,function(C){S(C,d,l)})},setClass:function(o,d){d!=null&&jsPlumb.each(o,function(l){G(l,d,d.split(/\s+/))})},setPosition:function(o,d){o.style.left=d.left+"px",o.style.top=d.top+"px"},getPosition:function(o){var d=function(l){var C=o.style[l];return C?C.substring(0,C.length-2):0};return{left:d("left"),top:d("top")}},getStyle:function(o,d){return typeof window.getComputedStyle!="undefined"?getComputedStyle(o,null).getPropertyValue(d):o.currentStyle[d]},getSelector:function(o,d){var l=null;return arguments.length===1?l=o.nodeType!=null?o:document.querySelectorAll(o):l=o.querySelectorAll(d),l},getOffset:function(o,d,l){o=jsPlumb.getElement(o),l=l||this.getContainer();for(var C={left:o.offsetLeft,top:o.offsetTop},w=d||l!=null&&o!==l&&o.offsetParent!==l?o.offsetParent:null,h=function(P){P!=null&&P!==document.body&&(P.scrollTop>0||P.scrollLeft>0)&&(C.left-=P.scrollLeft,C.top-=P.scrollTop)}.bind(this);w!=null;)C.left+=w.offsetLeft,C.top+=w.offsetTop,h(w),w=d?w.offsetParent:w.offsetParent===l?null:w.offsetParent;if(l!=null&&!d&&(l.scrollTop>0||l.scrollLeft>0)){var j=o.offsetParent!=null?this.getStyle(o.offsetParent,"position"):"static",g=this.getStyle(o,"position");g!=="absolute"&&g!=="fixed"&&j!=="absolute"&&j!=="fixed"&&(C.left-=l.scrollLeft,C.top-=l.scrollTop)}return C},getPositionOnElement:function(o,d,l){var C=typeof d.getBoundingClientRect!="undefined"?d.getBoundingClientRect():{left:0,top:0,width:0,height:0},w=document.body,h=document.documentElement,j=window.pageYOffset||h.scrollTop||w.scrollTop,g=window.pageXOffset||h.scrollLeft||w.scrollLeft,P=h.clientTop||w.clientTop||0,c=h.clientLeft||w.clientLeft||0,_=0,R=0,U=C.top+j-P+_*l,Y=C.left+g-c+R*l,n=jsPlumb.pageLocation(o),a=C.width||d.offsetWidth*l,t=C.height||d.offsetHeight*l,v=(n[0]-Y)/a,m=(n[1]-U)/t;return[v,m]},getAbsolutePosition:function(o){var d=function(l){var C=o.style[l];if(C)return parseFloat(C.substring(0,C.length-2))};return[d("left"),d("top")]},setAbsolutePosition:function(o,d,l,C){l?this.animate(o,{left:"+="+(d[0]-l[0]),top:"+="+(d[1]-l[1])},C):(o.style.left=d[0]+"px",o.style.top=d[1]+"px")},getSize:function(o){return[o.offsetWidth,o.offsetHeight]},getWidth:function(o){return o.offsetWidth},getHeight:function(o){return o.offsetHeight},getRenderMode:function(){return"svg"},draggable:function(o,d){var l;return o=V.isArray(o)||o.length!=null&&!V.isString(o)?o:[o],Array.prototype.slice.call(o).forEach(function(C){l=this.info(C),l.el&&this._initDraggableIfNecessary(l.el,!0,d,l.id,!0)}.bind(this)),this},snapToGrid:function(o,d,l){var C=[],w=function(g){var P=this.info(g);if(P.el!=null&&P.el._katavorioDrag){var c=P.el._katavorioDrag.snap(d,l);this.revalidate(P.el),C.push([P.el,c])}}.bind(this);if(arguments.length===1||arguments.length===3)w(o,d,l);else{var h=this.getManagedElements();for(var j in h)w(j,arguments[0],arguments[1])}return C},initDraggable:function(o,d,l){u(this,l).draggable(o,d),o._jsPlumbDragOptions=d},destroyDraggable:function(o,d){u(this,d).destroyDraggable(o),o._jsPlumbDragOptions=null,o._jsPlumbRelatedElement=null},unbindDraggable:function(o,d,l,C){u(this,C).destroyDraggable(o,d,l)},setDraggable:function(o,d){return jsPlumb.each(o,function(l){this.isDragSupported(l)&&(this._draggableStates[this.getAttribute(l,"id")]=d,this.setElementDraggable(l,d))}.bind(this))},_draggableStates:{},toggleDraggable:function(o){var d;return jsPlumb.each(o,function(l){var C=this.getAttribute(l,"id");return d=this._draggableStates[C]==null?!1:this._draggableStates[C],d=!d,this._draggableStates[C]=d,this.setDraggable(l,d),d}.bind(this)),d},_initDraggableIfNecessary:function(o,d,l,C,w){if(!jsPlumb.headless){var h=d==null?!1:d;if(h&&jsPlumb.isDragSupported(o,this)){var j=l||this.Defaults.DragOptions;if(j=jsPlumb.extend({},j),jsPlumb.isAlreadyDraggable(o,this))l.force&&this.initDraggable(o,j);else{var g=jsPlumb.dragEvents.drag,P=jsPlumb.dragEvents.stop,c=jsPlumb.dragEvents.start;this.manage(C,o),j[c]=V.wrap(j[c],M.bind(this)),j[g]=V.wrap(j[g],s.bind(this)),j[P]=V.wrap(j[P],i.bind(this));var _=this.getId(o);this._draggableStates[_]=!0;var R=this._draggableStates[_];j.disabled=R==null?!1:!R,this.initDraggable(o,j),this.getDragManager().register(o),w&&this.fire("elementDraggable",{el:o,options:j})}}}},animationSupported:!0,getElement:function(o){return o==null?null:(o=typeof o=="string"?o:o.tagName==null&&o.length!=null&&o.enctype==null?o[0]:o,typeof o=="string"?document.getElementById(o):o)},removeElement:function(o){u(this).elementRemoved(o),this.getEventManager().remove(o)},doAnimate:function(o,d,l){l=l||{};var C=this.getOffset(o),w=b(C,d),h=w[0]-C.left,j=w[1]-C.top,g=l.duration||250,P=15,c=g/P,_=P/g*h,R=P/g*j,U=0,Y=setInterval(function(){f.setPosition(o,{left:C.left+_*(U+1),top:C.top+R*(U+1)}),l.step!=null&&l.step(U,Math.ceil(c)),U++,U>=c&&(window.clearInterval(Y),l.complete!=null&&l.complete())},P)},destroyDroppable:function(o,d){u(this,d).destroyDroppable(o)},unbindDroppable:function(o,d,l,C){u(this,C).destroyDroppable(o,d,l)},droppable:function(o,d){o=V.isArray(o)||o.length!=null&&!V.isString(o)?o:[o];var l;return d=d||{},d.allowLoopback=!1,Array.prototype.slice.call(o).forEach(function(C){l=this.info(C),l.el&&this.initDroppable(l.el,d)}.bind(this)),this},initDroppable:function(o,d,l){u(this,l).droppable(o,d)},isAlreadyDraggable:function(o){return o._katavorioDrag!=null},isDragSupported:function(o,d){return!0},isDropSupported:function(o,d){return!0},isElementDraggable:function(o){return o=f.getElement(o),o._katavorioDrag&&o._katavorioDrag.isEnabled()},getDragObject:function(o){return o[0].drag.getDragElement()},getDragScope:function(o){return o._katavorioDrag&&o._katavorioDrag.scopes.join(" ")||""},getDropEvent:function(o){return o[0].e},getUIPosition:function(o,d){var l=o[0].el;if(l.offsetParent==null)return null;var C=o[0].finalPos||o[0].pos,w={left:C[0],top:C[1]};if(l._katavorioDrag&&l.offsetParent!==this.getContainer()){var h=this.getOffset(l.offsetParent);w.left+=h.left,w.top+=h.top}return w},setDragFilter:function(o,d,l){o._katavorioDrag&&o._katavorioDrag.setFilter(d,l)},setElementDraggable:function(o,d){o=f.getElement(o),o._katavorioDrag&&o._katavorioDrag.setEnabled(d)},setDragScope:function(o,d){o._katavorioDrag&&o._katavorioDrag.k.setDragScope(o,d)},setDropScope:function(o,d){o._katavorioDrop&&o._katavorioDrop.length>0&&o._katavorioDrop[0].k.setDropScope(o,d)},addToPosse:function(o,d){var l=Array.prototype.slice.call(arguments,1),C=u(this);f.each(o,function(w){w=[f.getElement(w)],w.push.apply(w,l),C.addToPosse.apply(C,w)})},setPosse:function(o,d){var l=Array.prototype.slice.call(arguments,1),C=u(this);f.each(o,function(w){w=[f.getElement(w)],w.push.apply(w,l),C.setPosse.apply(C,w)})},removeFromPosse:function(o,d){var l=Array.prototype.slice.call(arguments,1),C=u(this);f.each(o,function(w){w=[f.getElement(w)],w.push.apply(w,l),C.removeFromPosse.apply(C,w)})},removeFromAllPosses:function(o){var d=u(this);f.each(o,function(l){d.removeFromAllPosses(f.getElement(l))})},setPosseState:function(o,d,l){var C=u(this);f.each(o,function(w){C.setPosseState(f.getElement(w),d,l)})},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete",beforeStart:"beforeStart"},animEvents:{step:"step",complete:"complete"},stopDrag:function(o){o._katavorioDrag&&o._katavorioDrag.abort()},addToDragSelection:function(o){var d=this.getElement(o);d!=null&&(d._isJsPlumbGroup||d._jsPlumbGroup==null)&&u(this).select(o)},removeFromDragSelection:function(o){u(this).deselect(o)},getDragSelection:function(){return u(this).getSelection()},clearDragSelection:function(){u(this).deselectAll()},trigger:function(o,d,l,C){this.getEventManager().trigger(o,d,l,C)},doReset:function(){for(var o in this)o.indexOf("_katavorio_")===0&&this[o].reset()},getEventManager:function(){return Q(this)},on:function(o,d,l){return this.getEventManager().on.apply(this,arguments),this},off:function(o,d,l){return this.getEventManager().off.apply(this,arguments),this}});var A=function(o){var d=function(){/complete|loaded|interactive/.test(document.readyState)&&typeof document.body!="undefined"&&document.body!=null?o():setTimeout(d,9)};d()};A(f.init)}.call(typeof window!="undefined"?window:kt)})(Ee);const nn=[{title:"\u5DE5\u4F5C\u6D41",icon:"iconfont icon-shouye",isOpen:!0,id:"1",children:[{icon:"iconfont icon-gongju",name:"\u5F15\u64CE",id:"11",form:[{type:"input",label:"\u5BA2\u6237\u59D3\u540D",prop:"name",placeholder:"\u8BF7\u8F93\u5165\u5BA2\u6237\u59D3\u540D",required:!0,disabled:!1},{type:"select",label:"\u6027\u522B",prop:"sex",placeholder:"\u8BF7\u9009\u62E9\u6027\u522B",required:!0,disabled:!1,options:[{value:"0",label:"\u5973"},{value:"1",label:"\u7537"}]},{type:"input",label:"\u5458\u5DE5\u7F16\u53F7",prop:"number",placeholder:"\u8BF7\u8F93\u5165\u5458\u5DE5\u7F16\u53F7",required:!0,disabled:!1},{type:"input",label:"\u529E\u516C\u7535\u8BDD",prop:"mobile",placeholder:"\u8BF7\u8F93\u5165\u529E\u516C\u7535\u8BDD",required:!0,disabled:!1},{type:"select",label:"\u6743\u9650\u5206\u914D",prop:"role",placeholder:"\u8BF7\u9009\u62E9\u6027\u522B",required:!0,disabled:!1,options:[{value:"0",label:"\u7F16\u8F91\u6743\u9650"},{value:"1",label:"\u5220\u9664\u6743\u9650"}]},{type:"checkbox",label:"\u6A21\u5757\u9009\u62E9",prop:"module",placeholder:"\u8BF7\u9009\u62E9\u6A21\u5757",required:!0,disabled:!1}]},{icon:"iconfont icon-shouye_dongtaihui",name:"\u6A21\u7248",id:"12",form:[{type:"input",label:"\u7B49\u7EA7",prop:"grade",placeholder:"\u8BF7\u8F93\u5165\u7B49\u7EA7",required:!0,disabled:!1},{type:"input",label:"\u767B\u8BB0\u5BC6\u7801",prop:"password",placeholder:"\u8BF7\u8F93\u5165\u767B\u8BB0\u5BC6\u7801",required:!0,disabled:!1}]},{icon:"iconfont icon-zhongduancanshuchaxun",name:"\u540D\u79F0",id:"13",form:[{type:"input",label:"\u6570\u636E\u8868",prop:"dataSheet",placeholder:"\u8BF7\u8F93\u5165\u6570\u636E\u8868",required:!0,disabled:!1},{type:"input",label:"\u5B57\u6BB5\u914D\u7F6E",prop:"field",placeholder:"\u8BF7\u8F93\u5165\u5B57\u6BB5\u914D\u7F6E",required:!0,disabled:!1}]},{icon:"iconfont icon-zhongduancanshu",name:"\u7248\u672C",id:"14",form:[{type:"input",label:"\u53D1\u5E03\u6A21\u677F",prop:"publish",placeholder:"\u8BF7\u8F93\u5165\u53D1\u5E03\u6A21\u677F",required:!0,disabled:!1}]},{icon:"iconfont icon-bolangnengshiyanchang",name:"\u5EFA\u6A21",id:"15",form:[{type:"input",label:"\u5185\u5BB9\u6A21\u677F",prop:"content",placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9\u6A21\u677F",required:!0,disabled:!1}]},{icon:"iconfont icon-xingqiu",name:"\u8282\u70B9",id:"16",form:[{type:"input",label:"\u6D3B\u52A8\u540D\u79F06",prop:"name16"}]}]},{title:"\u6D41\u7A0B",isOpen:!0,icon:"iconfont icon-caijian",id:"2",children:[{icon:"iconfont icon-fuwenben",name:"\u5B9E\u4F8B",id:"21",form:[{type:"input",label:"\u6D3B\u52A8\u540D\u79F07",prop:"name21"}]},{icon:"iconfont icon-fuwenbenkuang",name:"\u8F68\u8FF9",id:"22",form:[{type:"input",label:"\u6D3B\u52A8\u540D\u79F08",prop:"name22"}]},{icon:"iconfont icon-shangchuan",name:"\u6570\u636E",id:"23",form:[{type:"input",label:"\u6D3B\u52A8\u540D\u79F09",prop:"name23"}]}]},{title:"\u4EFB\u52A1",isOpen:!0,icon:"iconfont icon-shuju",id:"3",children:[{icon:"iconfont icon-icon-",name:"\u53C2\u4E0E\u4EBA",id:"31",form:[{type:"input",label:"\u6D3B\u52A8\u540D\u79F01",prop:"name31"}]},{icon:"iconfont icon-gerenzhongxin",name:"\u6267\u884C\u4EBA",id:"32",form:[{type:"input",label:"\u6D3B\u52A8\u540D\u79F02",prop:"name32"}]},{icon:"iconfont icon-fangkuang",name:"\u5DE5\u5355",id:"33",form:[{type:"input",label:"\u6D3B\u52A8\u540D\u79F03",prop:"name33"}]}]}],sn={Anchors:["Top","TopCenter","TopRight","TopLeft","Right","RightMiddle","Bottom","BottomCenter","BottomRight","BottomLeft","Left","LeftMiddle"],Container:"workflow-right",Connector:["Bezier",{curviness:100}],ConnectionsDetachable:!1,DeleteEndpointsOnDetach:!1,Endpoint:["Blank",{Overlays:""}],EndpointStyle:{fill:"#1879ffa1",outlineWidth:1},LogEnabled:!0,PaintStyle:{stroke:"#E0E3E7",strokeWidth:1,outlineStroke:"transparent",outlineWidth:10},DragOptions:{cursor:"pointer",zIndex:2e3},Overlays:[["Arrow",{width:10,length:8,location:1,direction:1,foldback:.623}],["Label",{label:"",location:.5,cssClass:"aLabel"}]],RenderMode:"svg",HoverPaintStyle:{stroke:"#b0b2b5",strokeWidth:1},EndpointHoverStyle:{fill:"red"},Scope:"jsPlumb_DefaultScope"},rn={filter:".workflow-icon-drag",filterExclude:!1,anchor:"Continuous",allowLoopback:!0,maxConnections:-1},on={filter:".workflow-icon-drag",filterExclude:!1,anchor:"Continuous",allowLoopback:!0,dropOptions:{hoverClass:"ef-drop-hover"}},Ce={isSource:!0,isTarget:!0,anchor:"Continuous"};const an=Re({name:"pagesWorkflow",components:{Tool:Je,Contextmenu:tn,Drawer:en,Help:Qe},setup(){const xt=ve(),$=ve(),f=ve(),V=ve(),nt=ze(),K=qe(),{themeConfig:Q}=Te(K),{isTagsViewCurrenFull:u}=Te(nt),{copyText:M}=$e(),s=Ne({workflowRightRef:null,leftNavRefs:[],leftNavList:[],dropdownNode:{x:"",y:""},dropdownLine:{x:"",y:""},isShow:!1,jsPlumb:null,jsPlumbNodeIndex:null,jsplumbDefaults:sn,jsplumbMakeSource:rn,jsplumbMakeTarget:on,jsplumbConnect:Ce,jsplumbData:{nodeList:[],lineList:[]}}),i=Be(()=>{let{isTagsview:g}=Q.value;return u.value?"30px":g?"114px":"80px"}),b=()=>{document.body.clientWidth<768?s.isShow=!0:s.isShow=!1},D=()=>{s.leftNavList=nn,s.jsplumbData={nodeList:[{nodeId:"huej738hbji",left:"148px",top:"93px",class:"workflow-right-clone",icon:"iconfont icon-gongju",name:"\u5F15\u64CE",id:"11"},{nodeId:"52kcszzyxrd",left:"458px",top:"203px",class:"workflow-right-clone",icon:"iconfont icon-shouye_dongtaihui",name:"\u6A21\u7248",id:"12"},{nodeId:"nltskl6k4me",left:"164px",top:"350px",class:"workflow-right-clone",icon:"iconfont icon-zhongduancanshuchaxun",name:"\u540D\u79F0",id:"13"}],lineList:[{sourceId:"huej738hbji",targetId:"52kcszzyxrd",label:"\u4F20\u9001"},{sourceId:"huej738hbji",targetId:"nltskl6k4me",label:""}]}},T=()=>{s.leftNavRefs.forEach(g=>{Ze.create(g,{group:{name:"vue-next-admin-1",pull:"clone",put:!1},animation:0,sort:!1,draggable:".workflow-left-item",forceFallback:!0,onEnd:function(P){const{name:c,icon:_,id:R}=P.clone.dataset,{layerX:U,layerY:Y,clientX:n,clientY:a}=P.originalEvent,t=s.workflowRightRef,{x:v,y:m,width:I,height:F}=t.getBoundingClientRect();if(n<v||n>I+v||a<m||m>m+F)ae.warning("\u8BF7\u628A\u8282\u70B9\u62D6\u5165\u5230\u753B\u5E03\u4E2D");else{const X=Math.random().toString(36).substr(2,12),N={nodeId:X,left:`${U-40}px`,top:`${Y-15}px`,class:"workflow-right-clone",name:c,icon:_,id:R};s.jsplumbData.nodeList.push(N),me(()=>{s.jsPlumb.makeSource(X,s.jsplumbMakeSource),s.jsPlumb.makeTarget(X,s.jsplumbMakeTarget,Ce),s.jsPlumb.draggable(X,{containment:"parent",stop:W=>{s.jsplumbData.nodeList.forEach(ot=>{ot.nodeId===W.el.id&&(ot.left=`${W.pos[0]}px`,ot.top=`${W.pos[1]}px`)})}})})}}})})},E=()=>{Ee.jsPlumb.ready(()=>{s.jsPlumb=Ee.jsPlumb.getInstance({detachable:!1,Container:"workflow-right"}),s.jsPlumb.fire("jsPlumbDemoLoaded",s.jsPlumb),s.jsPlumb.importDefaults(s.jsplumbDefaults),s.jsPlumb.setSuspendDrawing(!1,!0),p(),s.jsPlumb.bind("contextmenu",(g,P)=>{P.preventDefault();const{sourceId:c,targetId:_}=g,{clientX:R,clientY:U}=P;s.dropdownLine.x=R,s.dropdownLine.y=U;const Y=s.jsplumbData.nodeList.find(a=>a.nodeId===_),n=s.jsplumbData.lineList.find(a=>a.sourceId===c&&a.targetId===_);Y.type="line",Y.label=n.label,$.value.openContextmenu(Y,g)}),s.jsPlumb.bind("beforeDrop",g=>{const{sourceId:P,targetId:c}=g;return s.jsplumbData.lineList.find(R=>R.sourceId===P&&R.targetId===c)?(ae.warning("\u5173\u7CFB\u5DF2\u5B58\u5728\uFF0C\u4E0D\u53EF\u91CD\u590D\u8FDE\u63A5"),!1):!0}),s.jsPlumb.bind("connection",g=>{const{sourceId:P,targetId:c}=g;s.jsplumbData.lineList.push({sourceId:P,targetId:c,label:""})}),s.jsPlumb.bind("connectionDetached",g=>{const{sourceId:P,targetId:c}=g;s.jsplumbData.lineList=s.jsplumbData.lineList.filter(_=>!(_.sourceId==P&&_.targetId==c))})})},p=()=>{s.jsplumbData.nodeList.forEach(g=>{s.jsPlumb.makeSource(g.nodeId,s.jsplumbMakeSource),s.jsPlumb.makeTarget(g.nodeId,s.jsplumbMakeTarget,Ce),s.jsPlumb.draggable(g.nodeId,{containment:"parent",stop:P=>{s.jsplumbData.nodeList.forEach(c=>{c.nodeId===P.el.id&&(c.left=`${P.pos[0]}px`,c.top=`${P.pos[1]}px`)})}})}),s.jsplumbData.lineList.forEach(g=>{s.jsPlumb.connect({source:g.sourceId,target:g.targetId,label:g.label},s.jsplumbConnect)})},e=g=>{g.isOpen=!g.isOpen},O=g=>{s.jsPlumbNodeIndex=g},L=(g,P,c)=>{s.jsPlumbNodeIndex=P;const{clientX:_,clientY:R}=c;s.dropdownNode.x=_,s.dropdownNode.y=R,g.type="node",g.label="";let U={};s.leftNavList.forEach(Y=>{Y.children&&Y.children.find(n=>n.id===g.id)&&(U=Y.children.find(n=>n.id===g.id))}),g.from=U.form,xt.value.openContextmenu(g)},G=g=>{const{contextMenuClickId:P,nodeId:c}=g;if(P===0){const _=s.jsplumbData.nodeList.findIndex(R=>R.nodeId===c);s.jsplumbData.nodeList.splice(_,1),s.jsPlumb.removeAllEndpoints(c),s.jsPlumbNodeIndex=null}else P===1&&f.value.open(g)},B=(g,P)=>{const{contextMenuClickId:c}=g,{endpoints:_}=P,R=[];_.forEach(U=>{R.push({id:U.element.id,innerText:U.element.innerText})}),g.contact=`${R[0].innerText}(${R[0].id}) => ${R[1].innerText}(${R[1].id})`,c===0?s.jsPlumb.deleteConnection(P):c===1&&f.value.open(g,P)},S=g=>{const{sourceId:P,targetId:c,label:_}=g,R=s.jsPlumb.getConnections({source:P,target:c})[0];R.setLabel(_),!_||_===""?R.addClass("workflow-right-empty-label"):(R.removeClass("workflow-right-empty-label"),R.addClass("workflow-right-label")),s.jsplumbData.lineList.forEach(U=>{U.sourceId===P&&U.targetId===c&&(U.label=_)})},A=g=>{const{nodeId:P,name:c,icon:_}=g;s.jsplumbData.nodeList.forEach(R=>{R.nodeId===P&&(R.name=c,R.icon=_)}),me(()=>{s.jsPlumb.setSuspendDrawing(!1,!0)})},o=g=>{switch(g){case"help":d();break;case"download":l();break;case"submit":C();break;case"copy":w();break;case"del":h();break;case"fullscreen":j();break}},d=()=>{me(()=>{V.value.open()})},l=()=>{const{globalTitle:g}=Q.value,P="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(s.jsplumbData,null,"	")),c=document.createElement("a");c.setAttribute("href",P),c.setAttribute("download",`${g}\u5DE5\u4F5C\u6D41.json`),c.click(),c.remove(),ae.success("\u4E0B\u8F7D\u6210\u529F")},C=()=>{ae.success("\u6570\u636E\u63D0\u4EA4\u6210\u529F")},w=()=>{M(JSON.stringify(s.jsplumbData))},h=()=>{Ke.confirm("\u6B64\u64CD\u4F5C\u5C06\u6E05\u7A7A\u753B\u5E03\uFF0C\u662F\u5426\u7EE7\u7EED\uFF1F","\u63D0\u793A",{confirmButtonText:"\u6E05\u7A7A",cancelButtonText:"\u53D6\u6D88"}).then(()=>{s.jsplumbData.nodeList.forEach(g=>{s.jsPlumb.removeAllEndpoints(g.nodeId)}),me(()=>{s.jsplumbData={nodeList:[],lineList:[]},ae.success("\u6E05\u7A7A\u753B\u5E03\u6210\u529F")})}).catch(()=>{})},j=()=>{nt.setCurrenFullscreen(!0)};return Ge(async()=>{await D(),T(),E(),b(),window.addEventListener("resize",b)}),He(()=>{window.removeEventListener("resize",b)}),ke({setViewHeight:i,setClientWidth:b,setLineLabel:S,setNodeContent:A,onTitleClick:e,onItemCloneClick:O,onContextmenu:L,onCurrentNodeClick:G,onCurrentLineClick:B,contextmenuNodeRef:xt,contextmenuLineRef:$,drawerRef:f,helpRef:V,onToolClick:o},Ue(s))}}),ln={class:"workflow-container"},un={key:0,class:"workflow-mask"},hn={class:"workflow"},cn={class:"workflow-content"},fn={class:"workflow-left"},dn=["onClick"],pn=["data-name","data-icon","data-id"],gn={class:"workflow-left-item-icon"},vn={class:"font10 pl5 name"},mn={class:"workflow-right",ref:"workflowRightRef"},bn=["id","data-node-id","onClick","onContextmenu"],yn={class:"workflow-left-item-icon"},_n={class:"font10 pl5 name"};function Pn(xt,$,f,V,nt,K){const Q=ne("Tool"),u=ne("SvgIcon"),M=ne("el-scrollbar"),s=ne("Contextmenu"),i=ne("Drawer"),b=ne("Help");return Qt(),Jt("div",ln,[xt.isShow?(Qt(),Jt("div",un)):Ye("",!0),Nt("div",{class:"layout-view-bg-white flex",style:_e({height:`calc(100vh - ${xt.setViewHeight}`})},[Nt("div",hn,[qt(Q,{onTool:xt.onToolClick},null,8,["onTool"]),Nt("div",cn,[Nt("div",fn,[qt(M,null,{default:Xe(()=>[(Qt(!0),Jt(be,null,ye(xt.leftNavList,(D,T)=>(Qt(),Jt("div",{ref_for:!0,ref:"leftNavRefs",key:D.id,style:_e({height:D.isOpen?"auto":"50px",overflow:"hidden"}),class:"workflow-left-id"},[Nt("div",{class:"workflow-left-title",onClick:E=>xt.onTitleClick(D)},[Nt("span",null,Pe(D.title),1),qt(u,{name:D.isOpen?"ele-ArrowDown":"ele-ArrowRight"},null,8,["name"])],8,dn),(Qt(!0),Jt(be,null,ye(D.children,(E,p)=>(Qt(),Jt("div",{class:"workflow-left-item",key:p,"data-name":E.name,"data-icon":E.icon,"data-id":E.id},[Nt("div",gn,[qt(u,{name:E.icon,class:"workflow-icon-drag"},null,8,["name"]),Nt("div",vn,Pe(E.name),1)])],8,pn))),128))],4))),128))]),_:1})]),Nt("div",mn,[(Qt(!0),Jt(be,null,ye(xt.jsplumbData.nodeList,(D,T)=>(Qt(),Jt("div",{key:D.nodeId,id:D.nodeId,"data-node-id":D.nodeId,class:Oe(D.class),style:_e({left:D.left,top:D.top}),onClick:E=>xt.onItemCloneClick(T),onContextmenu:Ve(E=>xt.onContextmenu(D,T,E),["prevent"])},[Nt("div",{class:Oe(["workflow-right-box",{"workflow-right-active":xt.jsPlumbNodeIndex===T}])},[Nt("div",yn,[qt(u,{name:D.icon,class:"workflow-icon-drag"},null,8,["name"]),Nt("div",_n,Pe(D.name),1)])],2)],46,bn))),128))],512)])])],4),qt(s,{dropdown:xt.dropdownNode,ref:"contextmenuNodeRef",onCurrent:xt.onCurrentNodeClick},null,8,["dropdown","onCurrent"]),qt(s,{dropdown:xt.dropdownLine,ref:"contextmenuLineRef",onCurrent:xt.onCurrentLineClick},null,8,["dropdown","onCurrent"]),qt(i,{ref:"drawerRef",onLabel:xt.setLineLabel,onNode:xt.setNodeContent},null,8,["onLabel","onNode"]),qt(b,{ref:"helpRef"},null,512)])}var Mn=We(an,[["render",Pn],["__scopeId","data-v-05ea24de"]]);export{Mn as default};
